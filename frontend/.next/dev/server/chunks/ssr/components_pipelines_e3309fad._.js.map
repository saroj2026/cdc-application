{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Saroj/Desktop/CDC_final_latest_febuary/cdc-application/frontend/components/pipelines/pipeline-wizard.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\r\nimport { ChevronRight, ChevronLeft, Copy, GripVertical, Loader2, Database, X, Trash2, Plus, Check, Edit2 } from \"lucide-react\"\r\nimport { useAppSelector, useAppDispatch } from \"@/lib/store/hooks\"\r\nimport { fetchConnections } from \"@/lib/store/slices/connectionSlice\"\r\nimport { apiClient } from \"@/lib/api/client\"\r\nimport { DatabaseLogo } from \"@/lib/database-logo-loader\"\r\nimport { getDatabaseByConnectionType } from \"@/lib/database-icons\"\r\n\r\ninterface PipelineWizardProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onSave: (data: any) => void\r\n  editingPipeline?: any | null\r\n}\r\n\r\n// Mock data removed - using real data from API\r\n\r\nexport function PipelineWizard({ isOpen, onClose, onSave, editingPipeline }: PipelineWizardProps) {\r\n  const dispatch = useAppDispatch()\r\n  const { connections } = useAppSelector((state) => state.connections)\r\n  const [step, setStep] = useState(1)\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    sourceConnection: \"\",\r\n    targetConnection: \"\",\r\n    mode: \"full_load_cdc\",\r\n    schedule: \"hourly\",\r\n  })\r\n  \r\n  // Initialize form data when editing\r\n  useEffect(() => {\r\n    if (editingPipeline && isOpen) {\r\n      setFormData({\r\n        name: editingPipeline.name || \"\",\r\n        description: editingPipeline.description || \"\",\r\n        sourceConnection: editingPipeline.sourceConnection || \"\",\r\n        targetConnection: editingPipeline.targetConnection || \"\",\r\n        mode: editingPipeline.cdc_enabled \r\n          ? (editingPipeline.full_load_type === \"overwrite\" ? \"full_load_cdc\" : \"cdc_only\")\r\n          : \"full_load\",\r\n        schedule: \"hourly\",\r\n      })\r\n      // Load existing table mappings if available\r\n      if (editingPipeline.table_mappings && editingPipeline.table_mappings.length > 0) {\r\n        const mapping: Record<string, string> = {}\r\n        const tables: string[] = []\r\n        editingPipeline.table_mappings.forEach((tm: any) => {\r\n          const sourceKey = tm.source_schema ? `${tm.source_schema}.${tm.source_table}` : tm.source_table\r\n          mapping[sourceKey] = tm.target_table\r\n          tables.push(sourceKey)\r\n        })\r\n        setTableMapping(mapping)\r\n        setSelectedTables(tables)\r\n        setTargetTables(Object.values(mapping))\r\n      }\r\n      setStep(1)\r\n    } else if (!editingPipeline && isOpen) {\r\n      // Reset form for new pipeline\r\n      setFormData({\r\n        name: \"\",\r\n        description: \"\",\r\n        sourceConnection: \"\",\r\n        targetConnection: \"\",\r\n        mode: \"full_load_cdc\",\r\n        schedule: \"hourly\",\r\n      })\r\n      setSelectedTables([])\r\n      setTableMapping({})\r\n      setTargetTables([])\r\n      setTargetTableSchemas({})\r\n      setStep(1)\r\n    }\r\n  }, [editingPipeline, isOpen])\r\n  const [selectedTables, setSelectedTables] = useState<string[]>([])\r\n  const [tableMapping, setTableMapping] = useState<Record<string, string>>({})\r\n  const [tableSchemas, setTableSchemas] = useState<Record<string, any>>({})\r\n  const [targetTableSchemas, setTargetTableSchemas] = useState<Record<string, any>>({})\r\n  const [newFieldInputs, setNewFieldInputs] = useState<Record<string, { name: string; type: string; nullable: boolean }>>({})\r\n  const [draggedTable, setDraggedTable] = useState<string | null>(null)\r\n  const [availableTables, setAvailableTables] = useState<any[]>([])\r\n  const [loadingTables, setLoadingTables] = useState(false)\r\n  const [targetTables, setTargetTables] = useState<string[]>([])\r\n  const [showSchemaConfirm, setShowSchemaConfirm] = useState(false)\r\n  const [schemaConfirmData, setSchemaConfirmData] = useState<{\r\n    sourceTable: string\r\n    targetTable: string\r\n    sourceSchema: any\r\n  } | null>(null)\r\n\r\n  useEffect(() => {\r\n    if (isOpen && connections.length === 0) {\r\n      dispatch(fetchConnections())\r\n    }\r\n  }, [isOpen, connections.length, dispatch])\r\n\r\n  // Get only successful/tested connections - user can choose any as source or target\r\n  const successfulConnections = connections.filter(c => \r\n    c.last_test_status === \"success\" || c.last_test_status === true\r\n  )\r\n\r\n  // Get source connection object\r\n  const sourceConnection = connections.find(c => c.name === formData.sourceConnection)\r\n\r\n  const handleInputChange = (field: string, value: string) => {\r\n    setFormData((prev) => ({ ...prev, [field]: value }))\r\n  }\r\n\r\n  // Helper function to parse table name (handles schema.table format)\r\n  const parseTableName = (tableName: string): { schema?: string; table: string } => {\r\n    if (!tableName) return { table: tableName }\r\n    \r\n    // Check if table name contains a dot (schema.table format)\r\n    const parts = tableName.split('.')\r\n    if (parts.length === 2) {\r\n      return {\r\n        schema: parts[0].trim(),\r\n        table: parts[1].trim()\r\n      }\r\n    }\r\n    return { table: tableName.trim() }\r\n  }\r\n\r\n  const handleTableRename = (originalTable: string, newName: string) => {\r\n    setTableMapping((prev) => ({ ...prev, [originalTable]: newName }))\r\n    // Also update target schema if it exists\r\n    if (targetTableSchemas[originalTable]) {\r\n      setTargetTableSchemas((prev) => {\r\n        const newMap = { ...prev }\r\n        const schema = newMap[originalTable]\r\n        if (schema) {\r\n          newMap[newName] = {\r\n            ...schema,\r\n            full_name: newName\r\n          }\r\n          delete newMap[originalTable]\r\n        }\r\n        return newMap\r\n      })\r\n    }\r\n  }\r\n\r\n  // Helper function to get default schema based on database type\r\n  const getDefaultSchemaForDbType = (dbType: string | undefined): string => {\r\n    if (!dbType) return \"public\"\r\n    const normalizedType = dbType.toLowerCase()\r\n    if (normalizedType === \"sqlserver\" || normalizedType === \"mssql\" || normalizedType === \"sql_server\") {\r\n      return \"dbo\"\r\n    } else if (normalizedType === \"snowflake\") {\r\n      return \"PUBLIC\"\r\n    } else if (normalizedType === \"oracle\") {\r\n      return \"\" // Oracle uses username as schema\r\n    }\r\n    return \"public\" // PostgreSQL, MySQL, etc.\r\n  }\r\n\r\n  // Helper function to automatically copy schema when mapping a table\r\n  const copySchemaToTarget = (sourceTable: string, targetTable: string) => {\r\n    const sourceSchema = tableSchemas[sourceTable]\r\n    if (sourceSchema) {\r\n      const sourceParsed = parseTableName(sourceTable)\r\n      const targetParsed = parseTableName(targetTable)\r\n      \r\n      // Get target connection to determine default schema\r\n      const targetConn = connections.find(c => c.name === formData.targetConnection)\r\n      const targetDbType = targetConn?.connection_type || targetConn?.database_type\r\n      const defaultTargetSchema = getDefaultSchemaForDbType(targetDbType)\r\n      \r\n      // Determine target schema name - use target DB default if source doesn't have one\r\n      let targetSchemaName: string | undefined\r\n      if (targetParsed.schema && targetParsed.schema !== \"undefined\" && targetParsed.schema.trim() !== \"\") {\r\n        // Target already has a schema specified\r\n        targetSchemaName = targetParsed.schema\r\n      } else if (sourceParsed.schema && sourceParsed.schema !== \"undefined\" && sourceParsed.schema.trim() !== \"\") {\r\n        // Use source schema, but only if it makes sense for target (same DB type or both PostgreSQL-like)\r\n        const sourceConn = connections.find(c => c.name === formData.sourceConnection)\r\n        const sourceDbType = sourceConn?.connection_type || sourceConn?.database_type\r\n        \r\n        // If source and target are same DB type, use source schema\r\n        // Otherwise, use target's default schema\r\n        if (sourceDbType?.toLowerCase() === targetDbType?.toLowerCase()) {\r\n          targetSchemaName = sourceParsed.schema\r\n        } else {\r\n          // Different DB types: use target's default schema\r\n          targetSchemaName = defaultTargetSchema\r\n        }\r\n      } else if (sourceSchema.schema && sourceSchema.schema !== \"undefined\" && sourceSchema.schema.trim() !== \"\") {\r\n        targetSchemaName = sourceSchema.schema\r\n      } else {\r\n        // No schema from source, use target's default\r\n        targetSchemaName = defaultTargetSchema\r\n      }\r\n      \r\n      // Construct full target name with schema if needed\r\n      let fullTargetName = targetTable\r\n      if (targetSchemaName && !targetTable.includes('.')) {\r\n        // Only add schema if target doesn't already have one\r\n        fullTargetName = `${targetSchemaName}.${targetParsed.table || targetTable}`\r\n      } else if (targetTable.includes('.') && !targetParsed.schema) {\r\n        // If target has a dot but no valid schema, reconstruct it\r\n        if (targetSchemaName) {\r\n          fullTargetName = `${targetSchemaName}.${targetParsed.table || targetTable.split('.')[1]}`\r\n        }\r\n      }\r\n      \r\n      // Copy schema to target - ensure schema is never \"undefined\"\r\n      const finalSchemaName = targetSchemaName && targetSchemaName !== \"undefined\" ? targetSchemaName : undefined\r\n      \r\n      setTargetTableSchemas((prev) => ({\r\n        ...prev,\r\n        [fullTargetName]: {\r\n          ...sourceSchema,\r\n          schema: finalSchemaName,\r\n          full_name: fullTargetName\r\n        }\r\n      }))\r\n      \r\n      // Update table mapping to use full name if schema was added\r\n      if (fullTargetName !== targetTable) {\r\n        setTableMapping((prev) => {\r\n          const newMap = { ...prev }\r\n          newMap[sourceTable] = fullTargetName\r\n          return newMap\r\n        })\r\n        return fullTargetName\r\n      }\r\n    }\r\n    return targetTable\r\n  }\r\n\r\n  const handleLoadTables = async () => {\r\n    if (!sourceConnection) {\r\n      alert(\"Please select a source connection first\")\r\n      return\r\n    }\r\n\r\n    setLoadingTables(true)\r\n    try {\r\n      const result = await apiClient.getConnectionTables(sourceConnection.id)\r\n      setAvailableTables(result.tables || [])\r\n      \r\n      // Store schemas for later use - use full_name for Oracle tables with schema\r\n      const schemas: Record<string, any> = {}\r\n      result.tables?.forEach((table: any) => {\r\n        // Use full_name if available (for Oracle schema.table format), otherwise use name\r\n        const key = table.full_name || table.name\r\n        schemas[key] = table\r\n        // Also store by name for backward compatibility\r\n        if (table.full_name && table.full_name !== table.name) {\r\n          schemas[table.name] = table\r\n        }\r\n      })\r\n      setTableSchemas(schemas)\r\n    } catch (error: any) {\r\n      console.error(\"Failed to load tables:\", error)\r\n      const errorMessage = error.response?.data?.detail || error.response?.data?.message || error.message || \"Unknown error\"\r\n      // Format multi-line error messages for better readability\r\n      const formattedMessage = errorMessage.split('\\n').join('\\n')\r\n      alert(`Failed to load tables:\\n\\n${formattedMessage}`)\r\n    } finally {\r\n      setLoadingTables(false)\r\n    }\r\n  }\r\n\r\n  // Load target connection tables\r\n  const targetConnection = connections.find(c => c.name === formData.targetConnection)\r\n  const [targetAvailableTables, setTargetAvailableTables] = useState<any[]>([])\r\n  const [loadingTargetTables, setLoadingTargetTables] = useState(false)\r\n\r\n  const handleLoadTargetTables = async () => {\r\n    if (!targetConnection) {\r\n      alert(\"Please select a target connection first\")\r\n      return\r\n    }\r\n\r\n    setLoadingTargetTables(true)\r\n    try {\r\n      const result = await apiClient.getConnectionTables(targetConnection.id)\r\n      setTargetAvailableTables(result.tables || [])\r\n      \r\n      // Store target table schemas\r\n      const targetSchemas: Record<string, any> = {}\r\n      result.tables?.forEach((table: any) => {\r\n        const key = table.full_name || table.name\r\n        targetSchemas[key] = table\r\n        if (table.full_name && table.full_name !== table.name) {\r\n          targetSchemas[table.name] = table\r\n        }\r\n      })\r\n      // Merge with existing target schemas\r\n      setTargetTableSchemas((prev) => ({ ...prev, ...targetSchemas }))\r\n    } catch (error: any) {\r\n      console.error(\"Failed to load target tables:\", error)\r\n      const errorMessage = error.response?.data?.detail || error.response?.data?.message || error.message || \"Unknown error\"\r\n      alert(`Failed to load target tables:\\n\\n${errorMessage}`)\r\n    } finally {\r\n      setLoadingTargetTables(false)\r\n    }\r\n  }\r\n\r\n  const handleCopySchema = (table: string) => {\r\n    const schema = tableSchemas[table]\r\n    if (schema && schema.columns) {\r\n      const schemaText = `Table: ${schema.full_name || table}\\nColumns:\\n${schema.columns.map((col: any) => `  - ${col.name} (${col.type})`).join(\"\\n\")}`\r\n      navigator.clipboard.writeText(schemaText)\r\n      alert(\"Schema copied to clipboard!\")\r\n    } else {\r\n      alert(\"Schema information not available for this table\")\r\n    }\r\n  }\r\n\r\n  const handleDragStart = (table: string) => {\r\n    setDraggedTable(table)\r\n  }\r\n\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault()\r\n  }\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    if (draggedTable) {\r\n      // Ensure the table is in selected tables\r\n      if (!selectedTables.includes(draggedTable)) {\r\n        setSelectedTables((prev) => [...prev, draggedTable])\r\n      }\r\n      \r\n      // Map source table to target table (default to same name, can be edited in Step 4)\r\n      let targetName = draggedTable // Default: use same name, user can edit in Step 4\r\n      \r\n      // Automatically copy schema when mapping\r\n      targetName = copySchemaToTarget(draggedTable, targetName)\r\n      \r\n      setTableMapping((prev) => ({ ...prev, [draggedTable]: targetName }))\r\n      \r\n      // Add to target tables if not already there\r\n      if (!targetTables.includes(targetName)) {\r\n        setTargetTables((prev) => [...prev, targetName])\r\n      }\r\n      \r\n      setDraggedTable(null)\r\n    }\r\n  }\r\n\r\n  const handleTableSelect = (table: string) => {\r\n    if (!selectedTables.includes(table)) {\r\n      setSelectedTables([...selectedTables, table])\r\n      let targetName = table\r\n      // Automatically copy schema when selecting\r\n      targetName = copySchemaToTarget(table, targetName)\r\n      setTableMapping((prev) => ({ ...prev, [table]: targetName }))\r\n      if (!targetTables.includes(targetName)) {\r\n        setTargetTables([...targetTables, targetName])\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleSave = async () => {\r\n    if (!formData.name || !formData.sourceConnection || !formData.targetConnection || selectedTables.length === 0) {\r\n      alert(\"Please complete all required fields and select at least one table\")\r\n      return\r\n    }\r\n\r\n    const mappedTables = selectedTables.map((table) => ({\r\n      source: table,\r\n      target: tableMapping[table] || table,\r\n    }))\r\n\r\n    try {\r\n      // Call onSave and wait for it to complete\r\n      await onSave({\r\n        ...formData,\r\n        tables: selectedTables,\r\n        tableMapping: mappedTables,\r\n      })\r\n      // Only reset and close if save was successful\r\n      resetWizard()\r\n      onClose() // Close the wizard after successful save\r\n    } catch (error) {\r\n      // If save fails, don't close the wizard so user can fix errors\r\n      console.error(\"Failed to save pipeline:\", error)\r\n      // Error handling is done in the onSave callback (handleAddPipeline/handleEditPipeline)\r\n    }\r\n  }\r\n\r\n  const resetWizard = () => {\r\n    setStep(1)\r\n    setFormData({\r\n      name: \"\",\r\n      description: \"\",\r\n      sourceConnection: \"\",\r\n      targetConnection: \"\",\r\n      mode: \"full_load_cdc\",\r\n      schedule: \"hourly\",\r\n    })\r\n    setSelectedTables([])\r\n    setTableMapping({})\r\n    setTableSchemas({})\r\n    setTargetTableSchemas({})\r\n    setAvailableTables([])\r\n    setTargetTables([])\r\n  }\r\n\r\n  // Reset when modal closes\r\n  // Reset wizard when closing (but not when editing)\r\n  useEffect(() => {\r\n    if (!isOpen && !editingPipeline) {\r\n      resetWizard()\r\n    }\r\n  }, [isOpen, editingPipeline])\r\n\r\n  const canProceedToNext = () => {\r\n    switch (step) {\r\n      case 1:\r\n        return formData.name && formData.sourceConnection && formData.targetConnection && formData.mode\r\n      case 2:\r\n        return selectedTables.length > 0\r\n      case 3:\r\n        return selectedTables.length > 0\r\n      case 4:\r\n        return selectedTables.length > 0\r\n      case 5:\r\n        return formData.schedule\r\n      default:\r\n        return true\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onClose}>\r\n      <DialogContent className=\"max-w-[95%] w-[95%] lg:max-w-[80%] lg:w-[80%] bg-surface border-border max-h-[96vh] h-[96vh] overflow-hidden p-6 flex flex-col\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-foreground\">\r\n            {editingPipeline ? \"Edit Replication Pipeline\" : \"Create Replication Pipeline\"}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        {/* Progress Bar */}\r\n        <div className=\"flex items-center justify-between gap-2 mb-4 flex-shrink-0\">\r\n          {[1, 2, 3, 4, 5].map((stepNum) => (\r\n            <div key={stepNum} className=\"flex items-center flex-1\">\r\n              <div\r\n                className={`w-8 h-8 rounded-full flex items-center justify-center font-semibold transition-all ${\r\n                  stepNum <= step\r\n                    ? \"bg-primary text-foreground\"\r\n                    : \"bg-surface-hover text-foreground-muted border border-border\"\r\n                }`}\r\n              >\r\n                {stepNum}\r\n              </div>\r\n              {stepNum < 5 && (\r\n                <div className={`flex-1 h-1 mx-2 transition-all ${stepNum < step ? \"bg-primary\" : \"bg-border\"}`}></div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Step Content Container */}\r\n        <div className=\"flex-1 min-h-0 overflow-hidden flex flex-col\">\r\n        {/* Step 1: Basic Configuration */}\r\n        {step === 1 && (\r\n          <div className=\"space-y-4 flex-1 overflow-y-auto min-h-0\">\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Step 1: Basic Configuration</h3>\r\n\r\n            <div>\r\n              <Label className=\"text-foreground\">Pipeline Name *</Label>\r\n              <Input\r\n                placeholder=\"e.g., Orders Replication\"\r\n                value={formData.name}\r\n                onChange={(e) => handleInputChange(\"name\", e.target.value)}\r\n                className=\"mt-1\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Label className=\"text-foreground\">Description</Label>\r\n              <Input\r\n                placeholder=\"Optional description\"\r\n                value={formData.description}\r\n                onChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n                className=\"mt-1\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div className=\"p-4 bg-primary/5 border border-primary/20 rounded-lg\">\r\n                <p className=\"text-sm text-foreground-muted mb-4\">\r\n                  Select which connection will be the <strong className=\"text-foreground\">source</strong> (where data comes from) \r\n                  and which will be the <strong className=\"text-foreground\">target</strong> (where data goes to). \r\n                  Only successfully tested connections are shown.\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label className=\"text-foreground flex items-center gap-2\">\r\n                    <span className=\"w-2 h-2 rounded-full bg-primary\"></span>\r\n                    Source Connection\r\n                  </Label>\r\n                  <Select\r\n                    value={formData.sourceConnection}\r\n                    onValueChange={(value) => {\r\n                      handleInputChange(\"sourceConnection\", value)\r\n                      setSelectedTables([])\r\n                      setTableMapping({})\r\n                    }}\r\n                  >\r\n                  <SelectTrigger className=\"mt-1 bg-input border-border\">\r\n                    <SelectValue placeholder=\"Select source database\">\r\n                      {formData.sourceConnection && (() => {\r\n                        const selectedConn = successfulConnections.find(c => c.name === formData.sourceConnection)\r\n                        if (selectedConn) {\r\n                          const dbInfo = getDatabaseByConnectionType(selectedConn.connection_type)\r\n                          return (\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <DatabaseLogo\r\n                                connectionType={selectedConn.connection_type}\r\n                                databaseId={dbInfo?.id}\r\n                                displayName={dbInfo?.displayName || selectedConn.connection_type}\r\n                                size={20}\r\n                                className=\"w-5 h-5 flex-shrink-0\"\r\n                              />\r\n                              <span>{selectedConn.name}</span>\r\n                            </div>\r\n                          )\r\n                        }\r\n                        return formData.sourceConnection\r\n                      })()}\r\n                    </SelectValue>\r\n                  </SelectTrigger>\r\n                    <SelectContent className=\"bg-surface border-border\">\r\n                      {successfulConnections.length === 0 ? (\r\n                        <div className=\"px-2 py-1.5 text-sm text-foreground-muted\">\r\n                          No successful connections available. Please test your connections first.\r\n                        </div>\r\n                      ) : (\r\n                        successfulConnections\r\n                          .filter(conn => conn.name !== formData.targetConnection)\r\n                          .map((conn) => {\r\n                            const dbInfo = getDatabaseByConnectionType(conn.connection_type)\r\n                            return (\r\n                              <SelectItem key={conn.id} value={conn.name}>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <DatabaseLogo\r\n                                    connectionType={conn.connection_type}\r\n                                    databaseId={dbInfo?.id}\r\n                                    displayName={dbInfo?.displayName || conn.connection_type}\r\n                                    size={20}\r\n                                    className=\"w-5 h-5 flex-shrink-0\"\r\n                                  />\r\n                                  <span>{conn.name}</span>\r\n                                  <span className=\"text-xs text-foreground-muted\">({conn.connection_type.toUpperCase()})</span>\r\n                                </div>\r\n                              </SelectItem>\r\n                            )\r\n                          })\r\n                      )}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                <div>\r\n                  <Label className=\"text-foreground flex items-center gap-2\">\r\n                    <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\r\n                    Target Connection\r\n                  </Label>\r\n                  <Select\r\n                    value={formData.targetConnection}\r\n                    onValueChange={(value) => handleInputChange(\"targetConnection\", value)}\r\n                  >\r\n                    <SelectTrigger className=\"mt-1 bg-input border-border\">\r\n                      <SelectValue placeholder=\"Select target database\">\r\n                        {formData.targetConnection && (() => {\r\n                          const selectedConn = successfulConnections.find(c => c.name === formData.targetConnection)\r\n                          if (selectedConn) {\r\n                            const dbInfo = getDatabaseByConnectionType(selectedConn.connection_type)\r\n                            return (\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <DatabaseLogo\r\n                                  connectionType={selectedConn.connection_type}\r\n                                  databaseId={dbInfo?.id}\r\n                                  displayName={dbInfo?.displayName || selectedConn.connection_type}\r\n                                  size={20}\r\n                                  className=\"w-5 h-5 flex-shrink-0\"\r\n                                />\r\n                                <span>{selectedConn.name}</span>\r\n                              </div>\r\n                            )\r\n                          }\r\n                          return formData.targetConnection\r\n                        })()}\r\n                      </SelectValue>\r\n                    </SelectTrigger>\r\n                    <SelectContent className=\"bg-surface border-border\">\r\n                      {successfulConnections.length === 0 ? (\r\n                        <div className=\"px-2 py-1.5 text-sm text-foreground-muted\">\r\n                          No successful connections available. Please test your connections first.\r\n                        </div>\r\n                      ) : (\r\n                        successfulConnections\r\n                          .filter(conn => conn.name !== formData.sourceConnection)\r\n                          .map((conn) => {\r\n                            const dbInfo = getDatabaseByConnectionType(conn.connection_type)\r\n                            return (\r\n                              <SelectItem key={conn.id} value={conn.name}>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <DatabaseLogo\r\n                                    connectionType={conn.connection_type}\r\n                                    databaseId={dbInfo?.id}\r\n                                    displayName={dbInfo?.displayName || conn.connection_type}\r\n                                    size={20}\r\n                                    className=\"w-5 h-5 flex-shrink-0\"\r\n                                  />\r\n                                  <span>{conn.name}</span>\r\n                                  <span className=\"text-xs text-foreground-muted\">({conn.connection_type.toUpperCase()})</span>\r\n                                </div>\r\n                              </SelectItem>\r\n                            )\r\n                          })\r\n                      )}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <Label className=\"text-foreground\">Replication Mode</Label>\r\n              <Select value={formData.mode} onValueChange={(value) => handleInputChange(\"mode\", value)}>\r\n                <SelectTrigger className=\"mt-1 bg-input border-border\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-surface border-border\">\r\n                  <SelectItem value=\"full_load\">Full Load Only</SelectItem>\r\n                  <SelectItem value=\"cdc_only\">CDC Only</SelectItem>\r\n                  <SelectItem value=\"full_load_cdc\">Full Load + CDC</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Step 2: Table Selection */}\r\n        {step === 2 && (\r\n          <div className=\"space-y-4 flex flex-col h-full overflow-hidden\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-foreground\">Step 2: Select Tables</h3>\r\n                <p className=\"text-sm text-foreground-muted\">\r\n                  Load tables from source connection or manually add table names.\r\n                </p>\r\n              </div>\r\n              {sourceConnection && (\r\n                <Button\r\n                  onClick={handleLoadTables}\r\n                  disabled={loadingTables}\r\n                  className=\"bg-primary hover:bg-primary/90 text-foreground gap-2\"\r\n                >\r\n                  {loadingTables ? (\r\n                    <>\r\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                      Loading...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Database className=\"w-4 h-4\" />\r\n                      Load Tables\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              )}\r\n            </div>\r\n\r\n            {!sourceConnection && (\r\n              <div className=\"p-4 bg-warning/10 border border-warning/30 rounded text-warning\">\r\n                Please select a source connection in Step 1 to load tables automatically.\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"space-y-3 flex-1 min-h-0 flex flex-col\">\r\n              {/* Available Tables from Database */}\r\n              {availableTables.length > 0 && (\r\n                <div className=\"space-y-2 flex-1 min-h-0 flex flex-col\">\r\n                  <Label className=\"text-foreground font-semibold\">Available Tables ({availableTables.length})</Label>\r\n                  <div className=\"grid grid-cols-2 gap-2 flex-1 min-h-0 overflow-y-auto p-2 bg-surface-hover rounded\">\r\n                    {availableTables.map((table: any) => (\r\n                      <Card\r\n                        key={table.name}\r\n                        className={`bg-surface border-border p-3 cursor-pointer hover:border-primary/50 transition-colors ${\r\n                          selectedTables.includes(table.name) ? \"border-primary bg-primary/10\" : \"\"\r\n                        }`}\r\n                        onClick={() => handleTableSelect(table.name)}\r\n                      >\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <p className=\"font-semibold text-foreground text-sm\">{table.full_name || table.name}</p>\r\n                            <p className=\"text-xs text-foreground-muted\">\r\n                              {table.columns?.length || 0} columns\r\n                            </p>\r\n                          </div>\r\n                          {selectedTables.includes(table.name) && (\r\n                            <div className=\"w-2 h-2 rounded-full bg-primary\"></div>\r\n                          )}\r\n                        </div>\r\n                      </Card>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Manual Table Input */}\r\n              <div className=\"space-y-2\">\r\n                <Label className=\"text-foreground\">Or Add Table Manually</Label>\r\n                <div className=\"flex gap-2\">\r\n                  <Input\r\n                    placeholder=\"Enter table name (e.g., orders)\"\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === \"Enter\") {\r\n                        e.preventDefault()\r\n                        const input = e.currentTarget\r\n                        const tableName = input.value.trim()\r\n                        if (tableName && !selectedTables.includes(tableName)) {\r\n                          setSelectedTables([...selectedTables, tableName])\r\n                          setTableMapping((prev) => ({ ...prev, [tableName]: tableName }))\r\n                          if (!targetTables.includes(tableName)) {\r\n                            setTargetTables([...targetTables, tableName])\r\n                          }\r\n                          input.value = \"\"\r\n                        }\r\n                      }\r\n                    }}\r\n                    className=\"flex-1\"\r\n                  />\r\n                  <Button\r\n                    onClick={() => {\r\n                      const input = document.querySelector('input[placeholder*=\"table name\"]') as HTMLInputElement\r\n                      if (input) {\r\n                        const tableName = input.value.trim()\r\n                        if (tableName && !selectedTables.includes(tableName)) {\r\n                          setSelectedTables([...selectedTables, tableName])\r\n                          setTableMapping((prev) => ({ ...prev, [tableName]: tableName }))\r\n                          if (!targetTables.includes(tableName)) {\r\n                            setTargetTables([...targetTables, tableName])\r\n                          }\r\n                          input.value = \"\"\r\n                        }\r\n                      }\r\n                    }}\r\n                  >\r\n                    Add\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Selected Tables */}\r\n              {selectedTables.length > 0 && (\r\n                <div className=\"space-y-2 flex-1 min-h-0 flex flex-col\">\r\n                  <Label className=\"text-foreground font-semibold\">Selected Tables ({selectedTables.length})</Label>\r\n                  <div className=\"space-y-2 flex-1 min-h-0 overflow-y-auto\">\r\n                    {selectedTables.map((table) => (\r\n                      <Card\r\n                        key={table}\r\n                        className=\"bg-surface border-border p-3 flex items-center justify-between\"\r\n                      >\r\n                        <div className=\"flex-1\">\r\n                          <span className=\"font-semibold text-foreground\">{table}</span>\r\n                          {tableSchemas[table] && (\r\n                            <p className=\"text-xs text-foreground-muted\">\r\n                              {tableSchemas[table].columns?.length || 0} columns\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => {\r\n                            setSelectedTables(selectedTables.filter(t => t !== table))\r\n                            setTableMapping((prev) => {\r\n                              const newMap = { ...prev }\r\n                              delete newMap[table]\r\n                              return newMap\r\n                            })\r\n                            setTargetTables(targetTables.filter(t => t !== table))\r\n                          }}\r\n                          className=\"text-error hover:text-error\"\r\n                        >\r\n                          Remove\r\n                        </Button>\r\n                      </Card>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {selectedTables.length === 0 && availableTables.length === 0 && (\r\n                <div className=\"text-center py-8 text-foreground-muted\">\r\n                  <p>No tables selected. Click \"Load Tables\" to fetch from source or add manually.</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Step 3: Drag & Drop Table Mapping */}\r\n        {step === 3 && (\r\n          <div className=\"space-y-4 flex flex-col h-full overflow-hidden\">\r\n            <div className=\"flex items-center justify-between flex-shrink-0\">\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-foreground\">Step 3: Map Tables Source to Target</h3>\r\n                <p className=\"text-sm text-foreground-muted\">\r\n                  Review and manage table mappings. Source and target tables are displayed in separate sections.\r\n                </p>\r\n              </div>\r\n              {selectedTables.length > 0 && targetTables.length < selectedTables.length && (\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => {\r\n                    selectedTables.forEach((table) => {\r\n                      if (!targetTables.includes(table)) {\r\n                        let targetName = table\r\n                        // Automatically copy schema when auto-mapping\r\n                        targetName = copySchemaToTarget(table, targetName)\r\n                        setTableMapping((prev) => ({ ...prev, [table]: targetName }))\r\n                        if (!targetTables.includes(targetName)) {\r\n                          setTargetTables((prev) => [...prev, targetName])\r\n                        }\r\n                      }\r\n                    })\r\n                  }}\r\n                  className=\"bg-transparent border-border hover:bg-surface-hover\"\r\n                >\r\n                  Auto-map All Tables\r\n                </Button>\r\n              )}\r\n            </div>\r\n\r\n            {selectedTables.length === 0 ? (\r\n              <div className=\"text-center py-12 text-foreground-muted bg-surface-hover rounded-lg border border-border flex-shrink-0\">\r\n                <p className=\"text-sm\">No tables selected. Go back to Step 2 to select tables.</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-2 gap-6 flex-1 min-h-0 overflow-hidden\">\r\n                {/* Source Tables Section */}\r\n                <div className=\"flex flex-col border-2 border-border rounded-lg overflow-hidden bg-surface-hover/30\">\r\n                  <div className=\"bg-surface-hover border-b-2 border-border px-4 py-3 flex-shrink-0\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Database className=\"w-5 h-5 text-primary\" />\r\n                      <h4 className=\"font-bold text-foreground text-base\">Source Tables</h4>\r\n                      <span className=\"ml-auto text-xs text-foreground-muted bg-surface px-2 py-1 rounded\">\r\n                        {selectedTables.length} table{selectedTables.length !== 1 ? 's' : ''}\r\n                      </span>\r\n                    </div>\r\n                    {formData.sourceConnection && (\r\n                      <p className=\"text-xs text-foreground-muted mt-1\">\r\n                        Connection: <span className=\"font-semibold text-foreground\">{formData.sourceConnection}</span>\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1 overflow-y-auto p-4 space-y-3 min-h-0\">\r\n                    {selectedTables.map((sourceTable) => {\r\n                      const sourceSchema = tableSchemas[sourceTable]\r\n                      const mappedTarget = tableMapping[sourceTable]\r\n                      const isMapped = !!mappedTarget\r\n                      \r\n                      return (\r\n                        <Card\r\n                          key={sourceTable}\r\n                          draggable\r\n                          onDragStart={(e) => {\r\n                            handleDragStart(sourceTable)\r\n                            e.dataTransfer.effectAllowed = 'move'\r\n                          }}\r\n                          className={`p-4 border-2 transition-all cursor-move ${\r\n                            isMapped \r\n                              ? 'bg-primary/10 border-primary/50 shadow-md' \r\n                              : 'bg-surface border-border hover:border-primary/30 hover:shadow-md'\r\n                          }`}\r\n                        >\r\n                            <div className=\"space-y-2\">\r\n                            <div className=\"flex items-start justify-between gap-2\">\r\n                              <div className=\"flex-1 min-w-0\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <GripVertical className=\"w-4 h-4 text-foreground-muted flex-shrink-0\" />\r\n                                  <div className=\"font-bold text-foreground text-sm mb-1\">{sourceTable}</div>\r\n                                </div>\r\n                                {sourceSchema && (\r\n                                  <div className=\"text-xs text-foreground-muted space-y-0.5\">\r\n                                    <div>\r\n                                      {sourceSchema.columns?.length || 0} columns\r\n                                      {sourceSchema.schema && (\r\n                                        <span className=\"ml-2\">• Schema: <span className=\"font-semibold\">{sourceSchema.schema}</span></span>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                              {isMapped && (\r\n                                <div className=\"flex-shrink-0\">\r\n                                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                            {isMapped && (\r\n                              <div className=\"pt-2 border-t border-border/50\">\r\n                                <div className=\"text-xs text-primary font-semibold flex items-center gap-1\">\r\n                                  <ChevronRight className=\"w-3 h-3\" />\r\n                                  Mapped to: <span className=\"font-bold\">{mappedTarget}</span>\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </Card>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Target Tables Section */}\r\n                <div \r\n                  className=\"flex flex-col border-2 border-primary/50 rounded-lg overflow-hidden bg-primary/5\"\r\n                  onDragOver={handleDragOver}\r\n                  onDrop={handleDrop}\r\n                >\r\n                  <div className=\"bg-primary/10 border-b-2 border-primary/50 px-4 py-3 flex-shrink-0\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Database className=\"w-5 h-5 text-primary\" />\r\n                      <h4 className=\"font-bold text-foreground text-base\">Target Tables</h4>\r\n                      <span className=\"ml-auto text-xs text-foreground-muted bg-primary/20 px-2 py-1 rounded\">\r\n                        {targetTables.length} table{targetTables.length !== 1 ? 's' : ''}\r\n                      </span>\r\n                    </div>\r\n                    {formData.targetConnection && (\r\n                      <p className=\"text-xs text-foreground-muted mt-1\">\r\n                        Connection: <span className=\"font-semibold text-foreground\">{formData.targetConnection}</span>\r\n                      </p>\r\n                    )}\r\n                    {draggedTable && (\r\n                      <p className=\"text-xs text-primary font-semibold mt-2 animate-pulse\">\r\n                        Drop \"{draggedTable}\" here to map\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  <div \r\n                    className={`flex-1 overflow-y-auto p-4 space-y-3 min-h-0 transition-all ${\r\n                      draggedTable ? 'bg-primary/10 border-2 border-dashed border-primary/50' : ''\r\n                    }`}\r\n                    onDragOver={handleDragOver}\r\n                    onDrop={handleDrop}\r\n                  >\r\n                    {targetTables.length === 0 ? (\r\n                      <div className=\"text-center py-12 text-foreground-muted\">\r\n                        <p className=\"text-sm italic\">No target tables mapped yet</p>\r\n                        <p className=\"text-xs mt-2\">Use \"Auto-map All Tables\" or map individually</p>\r\n                      </div>\r\n                    ) : (\r\n                      targetTables.map((targetTable) => {\r\n                        // Find the source table that maps to this target\r\n                        const sourceTable = Object.keys(tableMapping).find(\r\n                          (key) => tableMapping[key] === targetTable || key === targetTable\r\n                        ) || targetTable\r\n                        const targetParsed = parseTableName(targetTable)\r\n                        \r\n                        return (\r\n                          <Card\r\n                            key={targetTable}\r\n                            className=\"p-4 border-2 border-primary/50 bg-primary/10 hover:border-primary/70 transition-all shadow-sm\"\r\n                          >\r\n                            <div className=\"space-y-2\">\r\n                              <div className=\"flex items-start justify-between gap-2\">\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                  <div className=\"font-bold text-foreground text-sm mb-1\">{targetTable}</div>\r\n                                  {targetParsed.schema && (\r\n                                    <div className=\"text-xs text-foreground-muted\">\r\n                                      Schema: <span className=\"font-semibold\">{targetParsed.schema}</span>\r\n                                    </div>\r\n                                  )}\r\n                                  {targetTable !== sourceTable && (\r\n                                    <div className=\"text-xs text-primary mt-1 font-medium\">\r\n                                      ← From: {sourceTable}\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                                <Button\r\n                                  variant=\"outline\"\r\n                                  size=\"sm\"\r\n                                  onClick={() => {\r\n                                    // Remove from target tables\r\n                                    setTargetTables(targetTables.filter(t => {\r\n                                      const mappedTarget = tableMapping[sourceTable]\r\n                                      return t !== mappedTarget && t !== sourceTable\r\n                                    }))\r\n                                    // Remove from table mapping\r\n                                    setTableMapping((prev) => {\r\n                                      const newMap = { ...prev }\r\n                                      delete newMap[sourceTable]\r\n                                      return newMap\r\n                                    })\r\n                                  }}\r\n                                  className=\"bg-error/10 border-error/30 text-error hover:bg-error/20 hover:border-error/50 hover:text-error flex-shrink-0\"\r\n                                  title=\"Remove mapping\"\r\n                                >\r\n                                  <Trash2 className=\"w-4 h-4\" />\r\n                                </Button>\r\n                              </div>\r\n                            </div>\r\n                          </Card>\r\n                        )\r\n                      })\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {draggedTable && (\r\n              <div className=\"p-3 bg-primary/10 border border-primary/30 rounded text-sm text-primary flex-shrink-0\">\r\n                Dragging \"{draggedTable}\" - Drop it in the target area\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Step 4: Configure Target Tables */}\r\n        {step === 4 && (\r\n          <div className=\"space-y-4 flex flex-col h-full overflow-hidden\">\r\n            <div className=\"flex-shrink-0\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-bold text-foreground mb-2\">Step 4: Configure Target Tables</h3>\r\n                  <p className=\"text-sm text-foreground-muted\">\r\n                    Edit target table names and review source and target table schemas side by side.\r\n                  </p>\r\n                </div>\r\n                {targetConnection && (\r\n                  <Button\r\n                    onClick={handleLoadTargetTables}\r\n                    disabled={loadingTargetTables}\r\n                    variant=\"outline\"\r\n                    className=\"bg-primary/10 border-primary/30 hover:bg-primary/20 gap-2\"\r\n                    title=\"Load existing tables from target connection\"\r\n                  >\r\n                    {loadingTargetTables ? (\r\n                      <>\r\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                        Loading...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Database className=\"w-4 h-4\" />\r\n                        Load Target Tables\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n              {targetAvailableTables.length > 0 && (\r\n                <div className=\"mt-3 p-3 bg-info/10 border border-info/30 rounded text-sm text-foreground\">\r\n                  <p className=\"font-semibold\">Found {targetAvailableTables.length} existing table{targetAvailableTables.length !== 1 ? 's' : ''} in target connection</p>\r\n                  <p className=\"text-xs text-foreground-muted mt-1\">\r\n                    These tables are available in your target database. You can map source tables to these existing tables or create new ones.\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"space-y-4 flex-1 overflow-y-auto pr-2 min-h-0\">\r\n              {selectedTables.length === 0 ? (\r\n                <div className=\"text-center py-12 text-foreground-muted bg-surface-hover rounded-lg border border-border\">\r\n                  <p>No tables selected. Go back to Step 2 to select tables.</p>\r\n                </div>\r\n              ) : (\r\n                selectedTables.map((sourceTable) => {\r\n                  // Get source schema - check both full_name and name for Oracle tables\r\n                  const schema = tableSchemas[sourceTable] || tableSchemas[sourceTable.split('.').pop() || sourceTable]\r\n                  const mappedTarget = tableMapping[sourceTable] || sourceTable\r\n                  \r\n                  // Get target schema - check both full_name and name, and also check if target table exists in target connection\r\n                  let targetSchema = targetTableSchemas[mappedTarget]\r\n                  if (!targetSchema) {\r\n                    // Try to find by just table name (without schema)\r\n                    const targetParsed = parseTableName(mappedTarget)\r\n                    targetSchema = targetTableSchemas[targetParsed.table] || targetTableSchemas[mappedTarget]\r\n                  }\r\n                  \r\n                  // Use source schema for target if target schema doesn't exist yet\r\n                  const displayTargetSchema = targetSchema || schema\r\n                  \r\n                  return (\r\n                    <Card key={sourceTable} className=\"bg-surface border-2 border-border p-6 shadow-lg\">\r\n                      <div className=\"space-y-6\">\r\n                        {/* Header Section */}\r\n                        <div className=\"flex items-start justify-between pb-4 border-b border-border\">\r\n                          <div className=\"flex-1 space-y-2\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <Database className=\"w-5 h-5 text-primary\" />\r\n                              <div>\r\n                                <Label className=\"text-base font-bold text-foreground\">\r\n                                  Source Table\r\n                                </Label>\r\n                                <p className=\"text-sm font-medium text-foreground mt-1\">{sourceTable}</p>\r\n                              </div>\r\n                            </div>\r\n                            {schema && (\r\n                              <div className=\"flex items-center gap-4 text-xs text-foreground-muted ml-8\">\r\n                                <span>Schema: <span className=\"font-semibold text-foreground\">{schema.schema || \"default\"}</span></span>\r\n                                <span>•</span>\r\n                                <span>Columns: <span className=\"font-semibold text-foreground\">{schema.columns?.length || 0}</span></span>\r\n                                {formData.sourceConnection && (\r\n                                  <>\r\n                                    <span>•</span>\r\n                                    <span>Connection: <span className=\"font-semibold text-foreground\">{formData.sourceConnection}</span></span>\r\n                                  </>\r\n                                )}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              className=\"bg-transparent border-border hover:bg-surface-hover gap-2\"\r\n                              onClick={() => handleCopySchema(sourceTable)}\r\n                              title=\"Copy schema to clipboard\"\r\n                            >\r\n                              <Copy className=\"w-4 h-4\" />\r\n                              Copy to Clipboard\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"ghost\"\r\n                              className=\"text-error hover:text-error hover:bg-error/10 gap-2\"\r\n                              onClick={() => {\r\n                                const mappedTarget = tableMapping[sourceTable] || sourceTable\r\n                                setSelectedTables(selectedTables.filter(t => t !== sourceTable))\r\n                                setTargetTables(targetTables.filter(t => {\r\n                                  return t !== mappedTarget && t !== sourceTable\r\n                                }))\r\n                                setTableMapping((prev) => {\r\n                                  const newMap = { ...prev }\r\n                                  delete newMap[sourceTable]\r\n                                  return newMap\r\n                                })\r\n                                setTargetTableSchemas((prev) => {\r\n                                  const newMap = { ...prev }\r\n                                  delete newMap[mappedTarget]\r\n                                  return newMap\r\n                                })\r\n                              }}\r\n                              title=\"Remove this table mapping\"\r\n                            >\r\n                              <Trash2 className=\"w-4 h-4\" />\r\n                              Remove\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Target Table Configuration */}\r\n                        <div className=\"space-y-3 bg-surface-hover/50 p-4 rounded-lg border border-border\">\r\n                          <div>\r\n                            <Label className=\"text-sm font-semibold text-foreground mb-2 block\">\r\n                              Target Table Name *\r\n                            </Label>\r\n                            <div className=\"flex gap-3\">\r\n                              {/* Show dropdown if target tables are available */}\r\n                              {targetAvailableTables.length > 0 && (\r\n                                <Select\r\n                                  value={(() => {\r\n                                    const mapped = tableMapping[sourceTable] || sourceTable\r\n                                    const parsed = parseTableName(mapped)\r\n                                    // Try to find matching table in available tables\r\n                                    const matchingTable = targetAvailableTables.find(t => \r\n                                      (t.full_name || t.name) === mapped || \r\n                                      t.name === parsed.table ||\r\n                                      (t.full_name && t.full_name.includes(parsed.table))\r\n                                    )\r\n                                    return matchingTable ? (matchingTable.full_name || matchingTable.name) : \"\"\r\n                                  })()}\r\n                                  onValueChange={(value) => {\r\n                                    if (value === \"__new__\") {\r\n                                      // User wants to create new table - clear selection\r\n                                      return\r\n                                    }\r\n                                    const selectedTable = targetAvailableTables.find(t => \r\n                                      (t.full_name || t.name) === value\r\n                                    )\r\n                                    if (selectedTable) {\r\n                                      const newTarget = selectedTable.full_name || selectedTable.name\r\n                                      handleTableRename(sourceTable, newTarget)\r\n                                      // Update target schema if available\r\n                                      if (selectedTable.columns) {\r\n                                        setTargetTableSchemas((prev) => ({\r\n                                          ...prev,\r\n                                          [newTarget]: selectedTable\r\n                                        }))\r\n                                      }\r\n                                    }\r\n                                  }}\r\n                                >\r\n                                  <SelectTrigger className=\"flex-1 text-base\">\r\n                                    <SelectValue placeholder=\"Select existing table or create new\" />\r\n                                  </SelectTrigger>\r\n                                  <SelectContent className=\"bg-surface border-border max-h-60\">\r\n                                    <SelectItem value=\"__new__\">+ Create New Table</SelectItem>\r\n                                    {targetAvailableTables.map((table: any) => (\r\n                                      <SelectItem \r\n                                        key={table.full_name || table.name} \r\n                                        value={table.full_name || table.name}\r\n                                      >\r\n                                        {table.full_name || table.name} \r\n                                        {table.columns && ` (${table.columns.length} columns)`}\r\n                                      </SelectItem>\r\n                                    ))}\r\n                                  </SelectContent>\r\n                                </Select>\r\n                              )}\r\n                              <Input\r\n                                value={(() => {\r\n                                  const mapped = tableMapping[sourceTable] || sourceTable\r\n                                  const parsed = parseTableName(mapped)\r\n                                  // If dropdown is shown and a table is selected, show empty for new table input\r\n                                  if (targetAvailableTables.length > 0) {\r\n                                    const matchingTable = targetAvailableTables.find(t => \r\n                                      (t.full_name || t.name) === mapped\r\n                                    )\r\n                                    if (matchingTable) {\r\n                                      return \"\" // Show empty when existing table is selected\r\n                                    }\r\n                                  }\r\n                                  return parsed.table\r\n                                })()}\r\n                                onChange={(e) => {\r\n                                  const newTableName = e.target.value.trim()\r\n                                  const oldTarget = tableMapping[sourceTable] || sourceTable\r\n                                  \r\n                                  // Determine target schema based on target connection type\r\n                                  const targetConn = connections.find(c => c.name === formData.targetConnection)\r\n                                  const targetDbType = targetConn?.connection_type || targetConn?.database_type\r\n                                  const defaultTargetSchema = getDefaultSchemaForDbType(targetDbType)\r\n                                  \r\n                                  // Check if user typed a schema (contains '.')\r\n                                  let newTarget = newTableName\r\n                                  const targetParsed = parseTableName(newTableName)\r\n                                  if (targetParsed.schema && targetParsed.schema !== \"undefined\") {\r\n                                    // User specified a schema - use it as-is\r\n                                    newTarget = newTableName\r\n                                  } else if (newTableName && !newTableName.includes('.')) {\r\n                                    // No schema specified - use target's default schema\r\n                                    newTarget = `${defaultTargetSchema}.${newTableName}`\r\n                                  }\r\n                                  \r\n                                  handleTableRename(sourceTable, newTarget)\r\n                                  if (targetTableSchemas[oldTarget]) {\r\n                                    setTargetTableSchemas((prev) => {\r\n                                      const newMap = { ...prev }\r\n                                      newMap[newTarget] = newMap[oldTarget]\r\n                                      delete newMap[oldTarget]\r\n                                      return newMap\r\n                                    })\r\n                                  }\r\n                                }}\r\n                                className=\"flex-1 text-base\"\r\n                                placeholder={targetAvailableTables.length > 0 ? \"Or enter new table name\" : \"Enter target table name\"}\r\n                              />\r\n                              {(() => {\r\n                                // Only show Copy Schema button if schema hasn't been copied yet\r\n                                const sourceParsed = parseTableName(sourceTable)\r\n                                if (sourceParsed.schema && sourceParsed.schema !== \"undefined\" && schema && !targetSchema) {\r\n                                  return (\r\n                                    <Button\r\n                                      type=\"button\"\r\n                                      variant=\"outline\"\r\n                                      size=\"default\"\r\n                                      onClick={() => {\r\n                                        const sourceParsed = parseTableName(sourceTable)\r\n                                        const currentTarget = tableMapping[sourceTable] || sourceTable\r\n                                        const targetParsed = parseTableName(currentTarget)\r\n                                        \r\n                                        // Construct target name with schema\r\n                                        let newTarget = currentTarget\r\n                                        if (sourceParsed.schema && sourceParsed.schema !== \"undefined\") {\r\n                                          if (!targetParsed.schema || targetParsed.schema === \"undefined\") {\r\n                                            newTarget = `${sourceParsed.schema}.${targetParsed.table || sourceParsed.table}`\r\n                                          }\r\n                                        }\r\n                                        \r\n                                        setSchemaConfirmData({\r\n                                          sourceTable: sourceTable,\r\n                                          targetTable: newTarget,\r\n                                          sourceSchema: schema\r\n                                        })\r\n                                        setShowSchemaConfirm(true)\r\n                                      }}\r\n                                      className=\"bg-primary/10 border-primary/30 text-primary hover:bg-primary/20 hover:border-primary/50 whitespace-nowrap gap-2\"\r\n                                      title=\"Manually copy schema (schema is automatically copied when mapping tables)\"\r\n                                    >\r\n                                      <Copy className=\"w-4 h-4\" />\r\n                                      Copy Schema\r\n                                    </Button>\r\n                                  )\r\n                                }\r\n                                return null\r\n                              })()}\r\n                            </div>\r\n                            {(() => {\r\n                              const mapped = tableMapping[sourceTable] || sourceTable\r\n                              const sourceParsed = parseTableName(sourceTable)\r\n                              const targetParsed = parseTableName(mapped)\r\n                              if (sourceParsed.schema && targetParsed.schema) {\r\n                                return (\r\n                                  <p className=\"text-xs text-foreground-muted mt-2 ml-1\">\r\n                                    Full target name: <span className=\"font-mono font-semibold text-foreground\">{mapped}</span>\r\n                                    <span className=\"ml-2\">(Schema: {targetParsed.schema}, Table: {targetParsed.table})</span>\r\n                                  </p>\r\n                                )\r\n                              } else if (targetParsed.schema) {\r\n                                return (\r\n                                  <p className=\"text-xs text-foreground-muted mt-2 ml-1\">\r\n                                    Full target name: <span className=\"font-mono font-semibold text-foreground\">{mapped}</span>\r\n                                    <span className=\"ml-2\">(Schema: {targetParsed.schema})</span>\r\n                                  </p>\r\n                                )\r\n                              }\r\n                              return null\r\n                            })()}\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Source and Target Schema Display Side by Side */}\r\n                        <div>\r\n                          <div className=\"flex items-center justify-between mb-4\">\r\n                            <h4 className=\"text-sm font-bold text-foreground uppercase tracking-wide\">Schema Comparison</h4>\r\n                            <div className=\"flex items-center gap-4 text-xs text-foreground-muted\">\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <div className=\"w-3 h-3 rounded bg-surface-hover border border-border\"></div>\r\n                                <span>Source</span>\r\n                              </div>\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <div className=\"w-3 h-3 rounded bg-primary/20 border border-primary/50\"></div>\r\n                                <span>Target</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6\">\r\n                            {/* Source Schema */}\r\n                            <div className=\"space-y-3\">\r\n                              <div className=\"flex items-center gap-2 pb-2 border-b border-border\">\r\n                                <Database className=\"w-4 h-4 text-foreground-muted\" />\r\n                                <p className=\"text-sm font-bold text-foreground\">Source Table Schema</p>\r\n                              </div>\r\n                              {schema && schema.columns && schema.columns.length > 0 ? (\r\n                                <div className=\"text-sm p-4 bg-surface-hover rounded-lg border-2 border-border shadow-inner\">\r\n                                  <div className=\"space-y-2 max-h-80 overflow-y-auto\">\r\n                                    {schema.columns.map((col: any, idx: number) => (\r\n                                      <div key={idx} className=\"flex items-start gap-3 text-foreground py-2 px-3 bg-surface rounded border border-border/50 hover:border-border transition-colors\">\r\n                                        <span className=\"font-mono text-sm font-semibold text-primary flex-shrink-0 w-32\">{col.name}</span>\r\n                                        <div className=\"flex-1 flex items-center gap-2 flex-wrap\">\r\n                                          <span className=\"text-xs px-2 py-1 bg-surface-hover rounded border border-border/50\">{col.type}</span>\r\n                                          {col.nullable && (\r\n                                            <span className=\"text-xs px-2 py-1 bg-primary/10 text-primary rounded border border-primary/30\">nullable</span>\r\n                                          )}\r\n                                        </div>\r\n                                      </div>\r\n                                    ))}\r\n                                  </div>\r\n                                  <div className=\"mt-3 pt-3 border-t border-border text-xs text-foreground-muted flex-shrink-0\">\r\n                                    <p className=\"font-semibold text-foreground\">Total: {schema.columns.length} columns</p>\r\n                                  </div>\r\n                                </div>\r\n                              ) : (\r\n                                <div className=\"text-sm text-foreground-muted p-6 bg-surface-hover rounded-lg border-2 border-dashed border-border text-center\">\r\n                                  <p className=\"font-medium\">Schema information not available</p>\r\n                                  <p className=\"text-xs mt-1\">Will be detected during pipeline execution</p>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n\r\n                            {/* Target Schema */}\r\n                            <div className=\"space-y-3 flex flex-col min-h-0\">\r\n                              <div className=\"flex items-center justify-between gap-2 pb-2 border-b border-border flex-shrink-0 flex-wrap\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <Database className=\"w-4 h-4 text-primary\" />\r\n                                  <p className=\"text-sm font-bold text-foreground\">Target Table Schema</p>\r\n                                  {targetSchema && (\r\n                                    <span className=\"text-xs px-2 py-1 bg-primary/20 text-primary rounded border border-primary/50 font-semibold\">\r\n                                      ✓ Copied\r\n                                    </span>\r\n                                  )}\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2 flex-wrap\">\r\n                                  {!targetSchema && schema && (\r\n                                    <Button\r\n                                      type=\"button\"\r\n                                      variant=\"outline\"\r\n                                      size=\"sm\"\r\n                                      onClick={() => {\r\n                                        const sourceParsed = parseTableName(sourceTable)\r\n                                        const currentTarget = tableMapping[sourceTable] || sourceTable\r\n                                        const targetParsed = parseTableName(currentTarget)\r\n                                        \r\n                                        // Construct target table name - only include schema if source has one\r\n                                        let newTarget: string\r\n                                        if (sourceParsed.schema) {\r\n                                          // Use source schema with target table name\r\n                                          newTarget = `${sourceParsed.schema}.${targetParsed.table || sourceParsed.table}`\r\n                                        } else {\r\n                                          // No schema, just use table name\r\n                                          newTarget = targetParsed.table || sourceParsed.table\r\n                                        }\r\n                                        \r\n                                        // Confirm and copy schema\r\n                                        if (schema) {\r\n                                          const targetSchemaName = sourceParsed.schema || targetParsed.schema || schema.schema\r\n                                          setTargetTableSchemas((prev) => ({\r\n                                            ...prev,\r\n                                            [newTarget]: {\r\n                                              ...schema,\r\n                                              schema: targetSchemaName || undefined,\r\n                                              full_name: newTarget\r\n                                            }\r\n                                          }))\r\n                                          handleTableRename(sourceTable, newTarget)\r\n                                        }\r\n                                      }}\r\n                                      className=\"bg-primary hover:bg-primary/90 text-foreground gap-1\"\r\n                                      title=\"Confirm schema copy\"\r\n                                    >\r\n                                      <Check className=\"w-3 h-3\" />\r\n                                      Confirm\r\n                                    </Button>\r\n                                  )}\r\n                                  <Button\r\n                                    type=\"button\"\r\n                                    variant=\"outline\"\r\n                                    size=\"sm\"\r\n                                    onClick={() => {\r\n                                      const mappedTarget = tableMapping[sourceTable] || sourceTable\r\n                                      setNewFieldInputs((prev) => ({\r\n                                        ...prev,\r\n                                        [mappedTarget]: { name: '', type: 'VARCHAR', nullable: false }\r\n                                      }))\r\n                                    }}\r\n                                    className=\"bg-transparent border-border hover:bg-surface-hover gap-1\"\r\n                                    title=\"Add new field to target schema\"\r\n                                  >\r\n                                    <Plus className=\"w-3 h-3\" />\r\n                                    Add Field\r\n                                  </Button>\r\n                                </div>\r\n                              </div>\r\n                              {displayTargetSchema && displayTargetSchema.columns && displayTargetSchema.columns.length > 0 ? (\r\n                                <div className={`text-sm p-4 rounded-lg border-2 shadow-inner flex-1 min-h-0 flex flex-col ${\r\n                                  targetSchema \r\n                                    ? 'bg-primary/5 border-primary/40' \r\n                                    : 'bg-surface-hover border-border'\r\n                                }`}>\r\n                                  <div className=\"space-y-2 flex-1 overflow-y-auto min-h-0\">\r\n                                    {displayTargetSchema.columns.map((col: any, idx: number) => (\r\n                                      <div key={idx} className={`flex items-start gap-3 text-foreground py-2 px-3 rounded border transition-colors ${\r\n                                        targetSchema\r\n                                          ? 'bg-primary/10 border-primary/30 hover:border-primary/50'\r\n                                          : 'bg-surface border-border/50 hover:border-border'\r\n                                      }`}>\r\n                                        <span className={`font-mono text-sm font-semibold flex-shrink-0 w-32 ${\r\n                                          targetSchema ? 'text-primary' : 'text-foreground-muted'\r\n                                        }`}>{col.name}</span>\r\n                                        <div className=\"flex-1 flex items-center gap-2 flex-wrap\">\r\n                                          <span className={`text-xs px-2 py-1 rounded border ${\r\n                                            targetSchema\r\n                                              ? 'bg-primary/20 border-primary/40 text-primary'\r\n                                              : 'bg-surface-hover border-border/50'\r\n                                          }`}>{col.type}</span>\r\n                                          {col.nullable && (\r\n                                            <span className=\"text-xs px-2 py-1 bg-primary/20 text-primary rounded border border-primary/40\">nullable</span>\r\n                                          )}\r\n                                        </div>\r\n                                      </div>\r\n                                    ))}\r\n                                    {/* Add Field Input */}\r\n                                    {(() => {\r\n                                      const mappedTarget = tableMapping[sourceTable] || sourceTable\r\n                                      const newField = newFieldInputs[mappedTarget]\r\n                                      if (newField) {\r\n                                        return (\r\n                                          <div className=\"flex items-start gap-3 text-foreground py-2 px-3 rounded border-2 border-dashed border-primary/50 bg-primary/5\">\r\n                                            <Input\r\n                                              placeholder=\"Field name\"\r\n                                              value={newField.name}\r\n                                              onChange={(e) => {\r\n                                                setNewFieldInputs((prev) => ({\r\n                                                  ...prev,\r\n                                                  [mappedTarget]: { ...prev[mappedTarget], name: e.target.value }\r\n                                                }))\r\n                                              }}\r\n                                              className=\"flex-1 text-xs h-8\"\r\n                                            />\r\n                                            <Select\r\n                                              value={newField.type}\r\n                                              onValueChange={(value) => {\r\n                                                setNewFieldInputs((prev) => ({\r\n                                                  ...prev,\r\n                                                  [mappedTarget]: { ...prev[mappedTarget], type: value }\r\n                                                }))\r\n                                              }}\r\n                                            >\r\n                                              <SelectTrigger className=\"w-32 h-8 text-xs\">\r\n                                                <SelectValue />\r\n                                              </SelectTrigger>\r\n                                              <SelectContent>\r\n                                                <SelectItem value=\"VARCHAR\">VARCHAR</SelectItem>\r\n                                                <SelectItem value=\"INTEGER\">INTEGER</SelectItem>\r\n                                                <SelectItem value=\"BIGINT\">BIGINT</SelectItem>\r\n                                                <SelectItem value=\"DECIMAL\">DECIMAL</SelectItem>\r\n                                                <SelectItem value=\"DATE\">DATE</SelectItem>\r\n                                                <SelectItem value=\"TIMESTAMP\">TIMESTAMP</SelectItem>\r\n                                                <SelectItem value=\"BOOLEAN\">BOOLEAN</SelectItem>\r\n                                                <SelectItem value=\"TEXT\">TEXT</SelectItem>\r\n                                              </SelectContent>\r\n                                            </Select>\r\n                                            <label className=\"flex items-center gap-1 px-2 py-1 border border-border rounded text-xs cursor-pointer hover:bg-surface-hover\">\r\n                                              <input\r\n                                                type=\"checkbox\"\r\n                                                id={`nullable-${mappedTarget}`}\r\n                                                checked={newField.nullable}\r\n                                                onChange={(e) => {\r\n                                                  setNewFieldInputs((prev) => ({\r\n                                                    ...prev,\r\n                                                    [mappedTarget]: { ...prev[mappedTarget], nullable: e.target.checked }\r\n                                                  }))\r\n                                                }}\r\n                                                className=\"mr-1\"\r\n                                              />\r\n                                              Nullable\r\n                                            </label>\r\n                                            <Button\r\n                                              type=\"button\"\r\n                                              variant=\"outline\"\r\n                                              size=\"sm\"\r\n                                              onClick={() => {\r\n                                                if (newField.name.trim()) {\r\n                                                  const mappedTarget = tableMapping[sourceTable] || sourceTable\r\n                                                  const currentSchema = targetTableSchemas[mappedTarget] || displayTargetSchema\r\n                                                  const updatedColumns = [...(currentSchema.columns || []), {\r\n                                                    name: newField.name.trim(),\r\n                                                    type: newField.type,\r\n                                                    nullable: newField.nullable\r\n                                                  }]\r\n                                                  setTargetTableSchemas((prev) => ({\r\n                                                    ...prev,\r\n                                                    [mappedTarget]: {\r\n                                                      ...currentSchema,\r\n                                                      columns: updatedColumns\r\n                                                    }\r\n                                                  }))\r\n                                                  setNewFieldInputs((prev) => {\r\n                                                    const newInputs = { ...prev }\r\n                                                    delete newInputs[mappedTarget]\r\n                                                    return newInputs\r\n                                                  })\r\n                                                }\r\n                                              }}\r\n                                              className=\"bg-primary hover:bg-primary/90 text-foreground h-8\"\r\n                                              disabled={!newField.name.trim()}\r\n                                            >\r\n                                              <Check className=\"w-3 h-3\" />\r\n                                            </Button>\r\n                                            <Button\r\n                                              type=\"button\"\r\n                                              variant=\"outline\"\r\n                                              size=\"sm\"\r\n                                              onClick={() => {\r\n                                                setNewFieldInputs((prev) => {\r\n                                                  const newInputs = { ...prev }\r\n                                                  delete newInputs[mappedTarget]\r\n                                                  return newInputs\r\n                                                })\r\n                                              }}\r\n                                              className=\"h-8\"\r\n                                            >\r\n                                              <X className=\"w-3 h-3\" />\r\n                                            </Button>\r\n                                          </div>\r\n                                        )\r\n                                      }\r\n                                      return null\r\n                                    })()}\r\n                                  </div>\r\n                                  <div className={`mt-3 pt-3 border-t flex-shrink-0 ${\r\n                                    targetSchema ? 'border-primary/30' : 'border-border'\r\n                                  } text-xs`}>\r\n                                    <p className={`font-semibold ${\r\n                                      targetSchema ? 'text-primary' : 'text-foreground-muted'\r\n                                    }`}>\r\n                                      Total: {displayTargetSchema.columns.length} columns\r\n                                      {!targetSchema && schema && (\r\n                                        <span className=\"ml-2 text-xs font-normal italic\">\r\n                                          (showing source schema - click \"Copy Schema\" to confirm)\r\n                                        </span>\r\n                                      )}\r\n                                    </p>\r\n                                  </div>\r\n                                </div>\r\n                              ) : (\r\n                                <div className=\"text-sm text-foreground-muted p-6 bg-surface-hover rounded-lg border-2 border-dashed border-border text-center\">\r\n                                  <p className=\"font-medium\">No schema available</p>\r\n                                  <p className=\"text-xs mt-1\">Click \"Copy Schema\" to copy from source</p>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </Card>\r\n                  )\r\n                })\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Step 5: Schedule */}\r\n        {step === 5 && (\r\n          <div className=\"space-y-4 flex-1 overflow-y-auto min-h-0\">\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Step 5: Configure Schedule</h3>\r\n\r\n            <Card className=\"bg-surface border-border p-4 space-y-3\">\r\n              <div>\r\n                <Label className=\"text-foreground\">Replication Schedule</Label>\r\n                <Select value={formData.schedule} onValueChange={(value) => handleInputChange(\"schedule\", value)}>\r\n                  <SelectTrigger className=\"mt-1 bg-input border-border\">\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-surface border-border\">\r\n                    <SelectItem value=\"immediate\">Immediate Start</SelectItem>\r\n                    <SelectItem value=\"hourly\">Every Hour</SelectItem>\r\n                    <SelectItem value=\"every_6h\">Every 6 Hours</SelectItem>\r\n                    <SelectItem value=\"daily\">Daily at 2 AM</SelectItem>\r\n                    <SelectItem value=\"weekly\">Weekly (Monday)</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"p-3 bg-primary/10 border border-primary/30 rounded\">\r\n                <p className=\"text-sm text-foreground-muted\">\r\n                  <span className=\"font-semibold text-foreground\">Pipeline Summary:</span>\r\n                </p>\r\n                <ul className=\"text-sm text-foreground mt-2 space-y-1\">\r\n                  <li>\r\n                    • <span className=\"font-medium\">{formData.name}</span>\r\n                  </li>\r\n                  <li>\r\n                    • Tables: <span className=\"font-medium\">{selectedTables.length}</span>\r\n                  </li>\r\n                  <li>\r\n                    • Mode: <span className=\"font-medium\">{formData.mode.replace(/_/g, \" \")}</span>\r\n                  </li>\r\n                  <li>\r\n                    • Schedule: <span className=\"font-medium\">{formData.schedule}</span>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </Card>\r\n          </div>\r\n        )}\r\n        </div>\r\n\r\n        {/* Navigation Buttons */}\r\n        <div className=\"flex justify-between gap-3 pt-4 flex-shrink-0 border-t border-border\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => (step === 1 ? onClose() : setStep(step - 1))}\r\n            className=\"bg-transparent border-border hover:bg-surface-hover gap-2\"\r\n          >\r\n            <ChevronLeft className=\"w-4 h-4\" />\r\n            {step === 1 ? \"Cancel\" : \"Back\"}\r\n          </Button>\r\n\r\n          <div className=\"flex gap-2\">\r\n            {step < 5 && (\r\n              <Button\r\n                onClick={() => setStep(step + 1)}\r\n                disabled={!canProceedToNext()}\r\n                className=\"bg-primary hover:bg-primary/90 text-foreground gap-2\"\r\n              >\r\n                Next\r\n                <ChevronRight className=\"w-4 h-4\" />\r\n              </Button>\r\n            )}\r\n            {step === 5 && (\r\n              <Button onClick={handleSave} className=\"bg-primary hover:bg-primary/90 text-foreground\">\r\n                {editingPipeline ? \"Update Pipeline\" : \"Create Pipeline\"}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n\r\n      {/* Schema Copy Confirmation Dialog */}\r\n      <Dialog open={showSchemaConfirm} onOpenChange={setShowSchemaConfirm}>\r\n        <DialogContent className=\"max-w-[95%] w-[95%] lg:max-w-[80%] lg:w-[80%] bg-surface border-border max-h-[94vh] h-[94vh] overflow-hidden p-6 flex flex-col\">\r\n          <DialogHeader className=\"flex-shrink-0\">\r\n            <DialogTitle className=\"text-foreground text-xl\">Confirm Schema Copy</DialogTitle>\r\n          </DialogHeader>\r\n          \r\n          {schemaConfirmData && (\r\n            <div className=\"space-y-4 flex-1 min-h-0 flex flex-col\">\r\n              <p className=\"text-sm text-foreground-muted flex-shrink-0\">\r\n                Please review the source and target table information before confirming the schema copy.\r\n              </p>\r\n              \r\n              {/* Side by side comparison table */}\r\n              <div className=\"border border-border rounded-lg overflow-hidden flex-1 min-h-0 flex flex-col\">\r\n                <table className=\"w-full border-collapse\">\r\n                  <thead>\r\n                    <tr className=\"bg-surface-hover border-b border-border\">\r\n                      <th className=\"px-4 py-3 text-left text-sm font-semibold text-foreground border-r border-border w-1/2\">\r\n                        Source Table\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-sm font-semibold text-foreground w-1/2\">\r\n                        Target Table\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {/* Table Name Row */}\r\n                    <tr className=\"border-b border-border\">\r\n                      <td className=\"px-4 py-3 text-sm text-foreground border-r border-border bg-surface-hover/50\">\r\n                        <div className=\"font-medium\">{schemaConfirmData.sourceTable}</div>\r\n                        <div className=\"text-xs text-foreground-muted mt-1\">\r\n                          {(() => {\r\n                            const parsed = parseTableName(schemaConfirmData.sourceTable)\r\n                            return parsed.schema ? `Schema: ${parsed.schema}` : 'No schema'\r\n                          })()}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-foreground bg-surface-hover/50\">\r\n                        <div className=\"font-medium\">{schemaConfirmData.targetTable}</div>\r\n                        <div className=\"text-xs text-foreground-muted mt-1\">\r\n                          {(() => {\r\n                            const parsed = parseTableName(schemaConfirmData.targetTable)\r\n                            return parsed.schema ? `Schema: ${parsed.schema}` : 'No schema'\r\n                          })()}\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                    \r\n                    {/* Connection Info Row */}\r\n                    <tr className=\"border-b border-border\">\r\n                      <td className=\"px-4 py-3 text-sm text-foreground border-r border-border\">\r\n                        <div className=\"text-xs text-foreground-muted mb-1\">Connection:</div>\r\n                        <div className=\"font-medium\">{formData.sourceConnection || 'N/A'}</div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-foreground\">\r\n                        <div className=\"text-xs text-foreground-muted mb-1\">Connection:</div>\r\n                        <div className=\"font-medium\">{formData.targetConnection || 'N/A'}</div>\r\n                      </td>\r\n                    </tr>\r\n                    \r\n                    {/* Column Count Row */}\r\n                    <tr className=\"border-b border-border\">\r\n                      <td className=\"px-4 py-3 text-sm text-foreground border-r border-border\">\r\n                        <div className=\"text-xs text-foreground-muted mb-1\">Columns:</div>\r\n                        <div className=\"font-medium\">\r\n                          {schemaConfirmData.sourceSchema?.columns?.length || 0} columns\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-foreground\">\r\n                        <div className=\"text-xs text-foreground-muted mb-1\">Columns (will be copied):</div>\r\n                        <div className=\"font-medium\">\r\n                          {schemaConfirmData.sourceSchema?.columns?.length || 0} columns\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n\r\n              {/* Column Details Table */}\r\n              {schemaConfirmData.sourceSchema?.columns && schemaConfirmData.sourceSchema.columns.length > 0 && (\r\n                <div className=\"space-y-2 flex-1 min-h-0 flex flex-col\">\r\n                  <h4 className=\"text-sm font-semibold text-foreground flex-shrink-0\">Column Details</h4>\r\n                  <div className=\"border border-border rounded-lg overflow-hidden flex-1 min-h-0 flex flex-col\">\r\n                    <div className=\"flex-1 overflow-y-auto min-h-0\">\r\n                      <table className=\"w-full border-collapse\">\r\n                        <thead className=\"sticky top-0 bg-surface-hover\">\r\n                          <tr className=\"border-b border-border\">\r\n                            <th className=\"px-4 py-2 text-left text-xs font-semibold text-foreground border-r border-border w-1/2\">\r\n                              Source Column\r\n                            </th>\r\n                            <th className=\"px-4 py-2 text-left text-xs font-semibold text-foreground w-1/2\">\r\n                              Target Column (will be created)\r\n                            </th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {schemaConfirmData.sourceSchema.columns.map((col: any, idx: number) => (\r\n                            <tr key={idx} className=\"border-b border-border hover:bg-surface-hover/50\">\r\n                              <td className=\"px-4 py-2 text-xs text-foreground border-r border-border\">\r\n                                <div className=\"font-medium\">{col.name}</div>\r\n                                <div className=\"text-foreground-muted mt-0.5\">\r\n                                  {col.type}\r\n                                  {col.nullable && <span className=\"ml-1\">(nullable)</span>}\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"px-4 py-2 text-xs text-foreground\">\r\n                                <div className=\"font-medium\">{col.name}</div>\r\n                                <div className=\"text-foreground-muted mt-0.5\">\r\n                                  {col.type}\r\n                                  {col.nullable && <span className=\"ml-1\">(nullable)</span>}\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"flex justify-end gap-3 pt-4 border-t border-border flex-shrink-0 mt-auto\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => {\r\n                    setShowSchemaConfirm(false)\r\n                    setSchemaConfirmData(null)\r\n                  }}\r\n                  className=\"bg-transparent border-border hover:bg-surface-hover\"\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  onClick={() => {\r\n                    if (schemaConfirmData) {\r\n                      handleTableRename(schemaConfirmData.sourceTable, schemaConfirmData.targetTable)\r\n                      // Store the target schema (copy of source schema)\r\n                      if (schemaConfirmData.sourceSchema) {\r\n                        const targetParsed = parseTableName(schemaConfirmData.targetTable)\r\n                        const sourceParsed = parseTableName(schemaConfirmData.sourceTable)\r\n                        // Use target schema if it exists and is valid, otherwise use source schema, but never \"undefined\"\r\n                        const targetSchemaName = targetParsed.schema && targetParsed.schema !== \"undefined\" \r\n                          ? targetParsed.schema \r\n                          : (sourceParsed.schema && sourceParsed.schema !== \"undefined\" ? sourceParsed.schema : undefined)\r\n                        \r\n                        setTargetTableSchemas((prev) => ({\r\n                          ...prev,\r\n                          [schemaConfirmData.targetTable]: {\r\n                            ...schemaConfirmData.sourceSchema,\r\n                            schema: targetSchemaName,\r\n                            full_name: schemaConfirmData.targetTable\r\n                          }\r\n                        }))\r\n                      }\r\n                      setShowSchemaConfirm(false)\r\n                      setSchemaConfirmData(null)\r\n                    }\r\n                  }}\r\n                  className=\"bg-primary hover:bg-primary/90 text-foreground\"\r\n                >\r\n                  Confirm & Copy Schema\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4086, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Saroj/Desktop/CDC_final_latest_febuary/cdc-application/frontend/components/pipelines/pipeline-modal.tsx"],"sourcesContent":["\"use client\"\r\nimport { PipelineWizard } from \"./pipeline-wizard\"\r\n\r\ninterface PipelineModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onSave: (data: any) => void\r\n}\r\n\r\nconst mockTables = {\r\n  mysql: [\"orders\", \"order_items\", \"customers\", \"products\", \"inventory\"],\r\n  postgresql: [\"users\", \"transactions\", \"analytics\", \"events\"],\r\n}\r\n\r\nexport function PipelineModal({ isOpen, onClose, onSave }: PipelineModalProps) {\r\n  return <PipelineWizard isOpen={isOpen} onClose={onClose} onSave={onSave} />\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AASA,MAAM,aAAa;IACjB,OAAO;QAAC;QAAU;QAAe;QAAa;QAAY;KAAY;IACtE,YAAY;QAAC;QAAS;QAAgB;QAAa;KAAS;AAC9D;AAEO,SAAS,cAAc,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAsB;IAC3E,qBAAO,8OAAC,gKAAc;QAAC,QAAQ;QAAQ,SAAS;QAAS,QAAQ;;;;;;AACnE"}},
    {"offset": {"line": 4125, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Saroj/Desktop/CDC_final_latest_febuary/cdc-application/frontend/components/pipelines/checkpoint-manager.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Database, RefreshCw, Trash2, Save, Loader2, AlertCircle } from \"lucide-react\"\r\nimport { apiClient } from \"@/lib/api/client\"\r\nimport { useAppSelector } from \"@/lib/store/hooks\"\r\n\r\ninterface Checkpoint {\r\n  id: string\r\n  pipeline_id: string\r\n  table_name: string\r\n  schema_name?: string\r\n  lsn?: string\r\n  scn?: number\r\n  binlog_file?: string\r\n  binlog_position?: number\r\n  sql_server_lsn?: string\r\n  resume_token?: string\r\n  checkpoint_value?: string\r\n  checkpoint_type?: string\r\n  rows_processed: number\r\n  last_event_timestamp?: string\r\n  last_updated_at: string\r\n}\r\n\r\ninterface CheckpointManagerProps {\r\n  pipelineId: string | number\r\n  sourceConnectionType?: string\r\n  tableMappings?: Array<{\r\n    source_table: string\r\n    target_table: string\r\n    source_schema?: string\r\n    target_schema?: string\r\n  }>\r\n}\r\n\r\nexport function CheckpointManager({ pipelineId, sourceConnectionType, tableMappings = [] }: CheckpointManagerProps) {\r\n  const { connections } = useAppSelector((state) => state.connections)\r\n  const [checkpoints, setCheckpoints] = useState<Checkpoint[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [editingCheckpoint, setEditingCheckpoint] = useState<string | null>(null)\r\n  const [editData, setEditData] = useState<Partial<Checkpoint>>({})\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // Ensure checkpoints is always an array\r\n  const safeCheckpoints = Array.isArray(checkpoints) ? checkpoints : []\r\n\r\n  // Get source connection to determine database type\r\n  const sourceConn = connections.find(c => c.id === pipelineId) // This might need adjustment based on how pipeline stores connection info\r\n\r\n  useEffect(() => {\r\n    fetchCheckpoints()\r\n  }, [pipelineId])\r\n\r\n  const fetchCheckpoints = async (retryCount = 0) => {\r\n    setLoading(true)\r\n    setError(null)\r\n    try {\r\n      const data = await apiClient.getPipelineCheckpoints(pipelineId)\r\n      console.log('[CheckpointManager] Received data:', data)\r\n      \r\n      // Handle both response formats: { checkpoints: [...] } or direct array\r\n      if (data) {\r\n        if (Array.isArray(data)) {\r\n          setCheckpoints(data)\r\n        } else if (data.checkpoints && Array.isArray(data.checkpoints)) {\r\n          setCheckpoints(data.checkpoints)\r\n        } else {\r\n          console.warn('[CheckpointManager] Unexpected data format:', data)\r\n          setCheckpoints([])\r\n        }\r\n      } else {\r\n        setCheckpoints([])\r\n      }\r\n    } catch (err: any) {\r\n      // Check if error is a timeout - but getPipelineCheckpoints should handle this now\r\n      const isTimeout = err?.isTimeout || err?.code === 'ECONNABORTED' || err?.message?.includes('timeout')\r\n      \r\n      // If getPipelineCheckpoints handled it, data should be returned, so this shouldn't happen\r\n      // But if it does, just set empty checkpoints\r\n      if (isTimeout && retryCount < 1) {\r\n        // Retry once after a short delay\r\n        console.log('[CheckpointManager] Timeout, retrying...')\r\n        setTimeout(() => fetchCheckpoints(retryCount + 1), 1000)\r\n        return\r\n      }\r\n      \r\n      // After retry or if not timeout, just set empty checkpoints\r\n      // Don't show error to user - empty checkpoints are acceptable\r\n      console.warn('[CheckpointManager] Error fetching checkpoints, using empty list:', err?.message || err)\r\n      setCheckpoints([])\r\n      setError(null) // Don't show error to user\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleEdit = (checkpoint: Checkpoint) => {\r\n    setEditingCheckpoint(checkpoint.id)\r\n    setEditData({\r\n      lsn: checkpoint.lsn,\r\n      scn: checkpoint.scn,\r\n      binlog_file: checkpoint.binlog_file,\r\n      binlog_position: checkpoint.binlog_position,\r\n      sql_server_lsn: checkpoint.sql_server_lsn,\r\n      resume_token: checkpoint.resume_token,\r\n      checkpoint_value: checkpoint.checkpoint_value,\r\n      checkpoint_type: checkpoint.checkpoint_type,\r\n    })\r\n  }\r\n\r\n  const handleSave = async (checkpoint: Checkpoint) => {\r\n    try {\r\n      await apiClient.updatePipelineCheckpoint(\r\n        pipelineId,\r\n        checkpoint.table_name,\r\n        {\r\n          lsn: editData.lsn,\r\n          scn: editData.scn,\r\n          binlog_file: editData.binlog_file,\r\n          binlog_position: editData.binlog_position,\r\n          sql_server_lsn: editData.sql_server_lsn,\r\n          resume_token: editData.resume_token,\r\n          checkpoint_value: editData.checkpoint_value,\r\n          checkpoint_type: editData.checkpoint_type,\r\n        },\r\n        checkpoint.schema_name\r\n      )\r\n      setEditingCheckpoint(null)\r\n      setEditData({})\r\n      fetchCheckpoints()\r\n    } catch (err: any) {\r\n      console.error(\"Failed to update checkpoint:\", err)\r\n      alert(err?.message || \"Failed to update checkpoint\")\r\n    }\r\n  }\r\n\r\n  const handleReset = async (checkpoint: Checkpoint) => {\r\n    if (!confirm(`Are you sure you want to reset the checkpoint for ${checkpoint.table_name}? This will delete the checkpoint and replication will start from the beginning.`)) {\r\n      return\r\n    }\r\n    try {\r\n      await apiClient.resetPipelineCheckpoint(pipelineId, checkpoint.table_name, checkpoint.schema_name)\r\n      fetchCheckpoints()\r\n    } catch (err: any) {\r\n      console.error(\"Failed to reset checkpoint:\", err)\r\n      alert(err?.message || \"Failed to reset checkpoint\")\r\n    }\r\n  }\r\n\r\n  const getCheckpointDisplay = (checkpoint: Checkpoint) => {\r\n    const dbType = sourceConnectionType?.toLowerCase() || \"\"\r\n    \r\n    if (dbType === \"postgresql\" && checkpoint.lsn) {\r\n      return { label: \"LSN\", value: checkpoint.lsn }\r\n    } else if (dbType === \"oracle\" && checkpoint.scn) {\r\n      return { label: \"SCN\", value: checkpoint.scn.toString() }\r\n    } else if (dbType === \"mysql\" && checkpoint.binlog_file) {\r\n      return { \r\n        label: \"Binlog Position\", \r\n        value: `${checkpoint.binlog_file}:${checkpoint.binlog_position || 0}` \r\n      }\r\n    } else if (dbType === \"sqlserver\" && checkpoint.sql_server_lsn) {\r\n      return { label: \"LSN\", value: checkpoint.sql_server_lsn }\r\n    } else if (dbType === \"mongodb\" && checkpoint.resume_token) {\r\n      return { label: \"Resume Token\", value: checkpoint.resume_token.substring(0, 50) + \"...\" }\r\n    } else if (checkpoint.checkpoint_value) {\r\n      return { label: checkpoint.checkpoint_type || \"Checkpoint\", value: checkpoint.checkpoint_value }\r\n    }\r\n    return { label: \"No Checkpoint\", value: \"Not set\" }\r\n  }\r\n\r\n  const getCheckpointFields = (dbType: string) => {\r\n    const type = dbType?.toLowerCase() || \"\"\r\n    if (type === \"postgresql\") {\r\n      return [{ key: \"lsn\", label: \"LSN (Log Sequence Number)\", type: \"text\" }]\r\n    } else if (type === \"oracle\") {\r\n      return [{ key: \"scn\", label: \"SCN (System Change Number)\", type: \"number\" }]\r\n    } else if (type === \"mysql\") {\r\n      return [\r\n        { key: \"binlog_file\", label: \"Binlog File\", type: \"text\" },\r\n        { key: \"binlog_position\", label: \"Binlog Position\", type: \"number\" }\r\n      ]\r\n    } else if (type === \"sqlserver\") {\r\n      return [{ key: \"sql_server_lsn\", label: \"LSN\", type: \"text\" }]\r\n    } else if (type === \"mongodb\") {\r\n      return [{ key: \"resume_token\", label: \"Resume Token\", type: \"text\" }]\r\n    }\r\n    return [{ key: \"checkpoint_value\", label: \"Checkpoint Value\", type: \"text\" }]\r\n  }\r\n\r\n  if (loading && safeCheckpoints.length === 0) {\r\n    return (\r\n      <Card className=\"bg-surface border-border p-6\">\r\n        <div className=\"flex items-center justify-center py-8\">\r\n          <Loader2 className=\"w-6 h-6 animate-spin text-foreground-muted\" />\r\n          <span className=\"ml-2 text-foreground-muted\">Loading checkpoints...</span>\r\n        </div>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Card className=\"bg-surface border-border p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-foreground\">CDC Checkpoints</h3>\r\n          <p className=\"text-sm text-foreground-muted mt-1\">\r\n            Track replication position (LSN/SCN/Binlog) for each table\r\n          </p>\r\n        </div>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={fetchCheckpoints}\r\n          className=\"bg-transparent border-border hover:bg-surface-hover gap-2\"\r\n        >\r\n          <RefreshCw className=\"w-4 h-4\" />\r\n          Refresh\r\n        </Button>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className={`p-3 rounded-lg mb-4 ${\r\n          error.includes(\"slowly\") || error.includes(\"timeout\")\r\n            ? \"bg-warning/10 border border-warning/30\"\r\n            : \"bg-error/10 border border-error/30\"\r\n        }`}>\r\n          <div className={`flex items-center gap-2 ${\r\n            error.includes(\"slowly\") || error.includes(\"timeout\")\r\n              ? \"text-warning\"\r\n              : \"text-error\"\r\n          }`}>\r\n            <AlertCircle className=\"w-4 h-4\" />\r\n            <span className=\"text-sm\">{error}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {safeCheckpoints.length === 0 ? (\r\n        <div className=\"text-center py-8 text-foreground-muted\">\r\n          <Database className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n          <p>No checkpoints found. Checkpoints will be created automatically when CDC replication starts.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          {safeCheckpoints.map((checkpoint) => {\r\n            const isEditing = editingCheckpoint === checkpoint.id\r\n            const display = getCheckpointDisplay(checkpoint)\r\n            const fields = getCheckpointFields(sourceConnectionType || \"\")\r\n\r\n            return (\r\n              <div\r\n                key={checkpoint.id}\r\n                className=\"p-4 bg-surface-hover rounded-lg border border-border\"\r\n              >\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center gap-2 mb-1\">\r\n                      <Database className=\"w-4 h-4 text-foreground-muted\" />\r\n                      <span className=\"font-medium text-foreground\">\r\n                        {checkpoint.schema_name ? `${checkpoint.schema_name}.` : \"\"}{checkpoint.table_name}\r\n                      </span>\r\n                      <Badge variant=\"outline\" className=\"text-xs\">\r\n                        {display.label}\r\n                      </Badge>\r\n                    </div>\r\n                    {!isEditing && (\r\n                      <div className=\"mt-2\">\r\n                        <span className=\"text-sm text-foreground-muted\">{display.label}: </span>\r\n                        <span className=\"text-sm font-mono text-foreground\">{display.value}</span>\r\n                        {checkpoint.rows_processed > 0 && (\r\n                          <span className=\"text-xs text-foreground-muted ml-3\">\r\n                            • {checkpoint.rows_processed.toLocaleString()} rows processed\r\n                          </span>\r\n                        )}\r\n                        {checkpoint.last_event_timestamp && (\r\n                          <span className=\"text-xs text-foreground-muted ml-3\">\r\n                            • Last event: {new Date(checkpoint.last_event_timestamp).toLocaleString()}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {isEditing ? (\r\n                      <>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          onClick={() => handleSave(checkpoint)}\r\n                          className=\"bg-primary hover:bg-primary/90 text-foreground gap-1\"\r\n                        >\r\n                          <Save className=\"w-3 h-3\" />\r\n                          Save\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"outline\"\r\n                          onClick={() => {\r\n                            setEditingCheckpoint(null)\r\n                            setEditData({})\r\n                          }}\r\n                          className=\"bg-transparent border-border hover:bg-surface-hover\"\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"outline\"\r\n                          onClick={() => handleEdit(checkpoint)}\r\n                          className=\"bg-transparent border-border hover:bg-surface-hover gap-1\"\r\n                        >\r\n                          Edit\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"outline\"\r\n                          onClick={() => handleReset(checkpoint)}\r\n                          className=\"bg-transparent border-border hover:bg-error/10 text-error hover:text-error gap-1\"\r\n                        >\r\n                          <Trash2 className=\"w-3 h-3\" />\r\n                          Reset\r\n                        </Button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {isEditing && (\r\n                  <div className=\"mt-3 pt-3 border-t border-border space-y-3\">\r\n                    {fields.map((field) => (\r\n                      <div key={field.key}>\r\n                        <Label className=\"text-sm text-foreground-muted\">{field.label}</Label>\r\n                        <Input\r\n                          type={field.type}\r\n                          value={\r\n                            field.type === \"number\"\r\n                              ? (editData[field.key as keyof typeof editData] as number) || \"\"\r\n                              : (editData[field.key as keyof typeof editData] as string) || \"\"\r\n                          }\r\n                          onChange={(e) =>\r\n                            setEditData({\r\n                              ...editData,\r\n                              [field.key]: field.type === \"number\" ? parseInt(e.target.value) || 0 : e.target.value,\r\n                            })\r\n                          }\r\n                          className=\"mt-1 bg-input border-border text-foreground\"\r\n                          placeholder={`Enter ${field.label.toLowerCase()}`}\r\n                        />\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      )}\r\n    </Card>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAVA;;;;;;;;;;;AAyCO,SAAS,kBAAkB,EAAE,UAAU,EAAE,oBAAoB,EAAE,gBAAgB,EAAE,EAA0B;IAChH,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,uIAAc,EAAC,CAAC,QAAU,MAAM,WAAW;IACnE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAe,EAAE;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAgB;IAC1E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAsB,CAAC;IAC/D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,wCAAwC;IACxC,MAAM,kBAAkB,MAAM,OAAO,CAAC,eAAe,cAAc,EAAE;IAErE,mDAAmD;IACnD,MAAM,aAAa,YAAY,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,YAAY,0EAA0E;;IAExI,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAW;IAEf,MAAM,mBAAmB,OAAO,aAAa,CAAC;QAC5C,WAAW;QACX,SAAS;QACT,IAAI;YACF,MAAM,OAAO,MAAM,iIAAS,CAAC,sBAAsB,CAAC;YACpD,QAAQ,GAAG,CAAC,sCAAsC;YAElD,uEAAuE;YACvE,IAAI,MAAM;gBACR,IAAI,MAAM,OAAO,CAAC,OAAO;oBACvB,eAAe;gBACjB,OAAO,IAAI,KAAK,WAAW,IAAI,MAAM,OAAO,CAAC,KAAK,WAAW,GAAG;oBAC9D,eAAe,KAAK,WAAW;gBACjC,OAAO;oBACL,QAAQ,IAAI,CAAC,+CAA+C;oBAC5D,eAAe,EAAE;gBACnB;YACF,OAAO;gBACL,eAAe,EAAE;YACnB;QACF,EAAE,OAAO,KAAU;YACjB,kFAAkF;YAClF,MAAM,YAAY,KAAK,aAAa,KAAK,SAAS,kBAAkB,KAAK,SAAS,SAAS;YAE3F,0FAA0F;YAC1F,6CAA6C;YAC7C,IAAI,aAAa,aAAa,GAAG;gBAC/B,iCAAiC;gBACjC,QAAQ,GAAG,CAAC;gBACZ,WAAW,IAAM,iBAAiB,aAAa,IAAI;gBACnD;YACF;YAEA,4DAA4D;YAC5D,8DAA8D;YAC9D,QAAQ,IAAI,CAAC,qEAAqE,KAAK,WAAW;YAClG,eAAe,EAAE;YACjB,SAAS,OAAM,2BAA2B;QAC5C,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,qBAAqB,WAAW,EAAE;QAClC,YAAY;YACV,KAAK,WAAW,GAAG;YACnB,KAAK,WAAW,GAAG;YACnB,aAAa,WAAW,WAAW;YACnC,iBAAiB,WAAW,eAAe;YAC3C,gBAAgB,WAAW,cAAc;YACzC,cAAc,WAAW,YAAY;YACrC,kBAAkB,WAAW,gBAAgB;YAC7C,iBAAiB,WAAW,eAAe;QAC7C;IACF;IAEA,MAAM,aAAa,OAAO;QACxB,IAAI;YACF,MAAM,iIAAS,CAAC,wBAAwB,CACtC,YACA,WAAW,UAAU,EACrB;gBACE,KAAK,SAAS,GAAG;gBACjB,KAAK,SAAS,GAAG;gBACjB,aAAa,SAAS,WAAW;gBACjC,iBAAiB,SAAS,eAAe;gBACzC,gBAAgB,SAAS,cAAc;gBACvC,cAAc,SAAS,YAAY;gBACnC,kBAAkB,SAAS,gBAAgB;gBAC3C,iBAAiB,SAAS,eAAe;YAC3C,GACA,WAAW,WAAW;YAExB,qBAAqB;YACrB,YAAY,CAAC;YACb;QACF,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,MAAM,KAAK,WAAW;QACxB;IACF;IAEA,MAAM,cAAc,OAAO;QACzB,IAAI,CAAC,QAAQ,CAAC,kDAAkD,EAAE,WAAW,UAAU,CAAC,gFAAgF,CAAC,GAAG;YAC1K;QACF;QACA,IAAI;YACF,MAAM,iIAAS,CAAC,uBAAuB,CAAC,YAAY,WAAW,UAAU,EAAE,WAAW,WAAW;YACjG;QACF,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM,KAAK,WAAW;QACxB;IACF;IAEA,MAAM,uBAAuB,CAAC;QAC5B,MAAM,SAAS,sBAAsB,iBAAiB;QAEtD,IAAI,WAAW,gBAAgB,WAAW,GAAG,EAAE;YAC7C,OAAO;gBAAE,OAAO;gBAAO,OAAO,WAAW,GAAG;YAAC;QAC/C,OAAO,IAAI,WAAW,YAAY,WAAW,GAAG,EAAE;YAChD,OAAO;gBAAE,OAAO;gBAAO,OAAO,WAAW,GAAG,CAAC,QAAQ;YAAG;QAC1D,OAAO,IAAI,WAAW,WAAW,WAAW,WAAW,EAAE;YACvD,OAAO;gBACL,OAAO;gBACP,OAAO,GAAG,WAAW,WAAW,CAAC,CAAC,EAAE,WAAW,eAAe,IAAI,GAAG;YACvE;QACF,OAAO,IAAI,WAAW,eAAe,WAAW,cAAc,EAAE;YAC9D,OAAO;gBAAE,OAAO;gBAAO,OAAO,WAAW,cAAc;YAAC;QAC1D,OAAO,IAAI,WAAW,aAAa,WAAW,YAAY,EAAE;YAC1D,OAAO;gBAAE,OAAO;gBAAgB,OAAO,WAAW,YAAY,CAAC,SAAS,CAAC,GAAG,MAAM;YAAM;QAC1F,OAAO,IAAI,WAAW,gBAAgB,EAAE;YACtC,OAAO;gBAAE,OAAO,WAAW,eAAe,IAAI;gBAAc,OAAO,WAAW,gBAAgB;YAAC;QACjG;QACA,OAAO;YAAE,OAAO;YAAiB,OAAO;QAAU;IACpD;IAEA,MAAM,sBAAsB,CAAC;QAC3B,MAAM,OAAO,QAAQ,iBAAiB;QACtC,IAAI,SAAS,cAAc;YACzB,OAAO;gBAAC;oBAAE,KAAK;oBAAO,OAAO;oBAA6B,MAAM;gBAAO;aAAE;QAC3E,OAAO,IAAI,SAAS,UAAU;YAC5B,OAAO;gBAAC;oBAAE,KAAK;oBAAO,OAAO;oBAA8B,MAAM;gBAAS;aAAE;QAC9E,OAAO,IAAI,SAAS,SAAS;YAC3B,OAAO;gBACL;oBAAE,KAAK;oBAAe,OAAO;oBAAe,MAAM;gBAAO;gBACzD;oBAAE,KAAK;oBAAmB,OAAO;oBAAmB,MAAM;gBAAS;aACpE;QACH,OAAO,IAAI,SAAS,aAAa;YAC/B,OAAO;gBAAC;oBAAE,KAAK;oBAAkB,OAAO;oBAAO,MAAM;gBAAO;aAAE;QAChE,OAAO,IAAI,SAAS,WAAW;YAC7B,OAAO;gBAAC;oBAAE,KAAK;oBAAgB,OAAO;oBAAgB,MAAM;gBAAO;aAAE;QACvE;QACA,OAAO;YAAC;gBAAE,KAAK;gBAAoB,OAAO;gBAAoB,MAAM;YAAO;SAAE;IAC/E;IAEA,IAAI,WAAW,gBAAgB,MAAM,KAAK,GAAG;QAC3C,qBACE,8OAAC,iIAAI;YAAC,WAAU;sBACd,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,4NAAO;wBAAC,WAAU;;;;;;kCACnB,8OAAC;wBAAK,WAAU;kCAA6B;;;;;;;;;;;;;;;;;IAIrD;IAEA,qBACE,8OAAC,iIAAI;QAAC,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAwC;;;;;;0CACtD,8OAAC;gCAAE,WAAU;0CAAqC;;;;;;;;;;;;kCAIpD,8OAAC,qIAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;;0CAEV,8OAAC,6NAAS;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;YAKpC,uBACC,8OAAC;gBAAI,WAAW,CAAC,oBAAoB,EACnC,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,aACvC,2CACA,sCACJ;0BACA,cAAA,8OAAC;oBAAI,WAAW,CAAC,wBAAwB,EACvC,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,aACvC,iBACA,cACJ;;sCACA,8OAAC,mOAAW;4BAAC,WAAU;;;;;;sCACvB,8OAAC;4BAAK,WAAU;sCAAW;;;;;;;;;;;;;;;;;YAKhC,gBAAgB,MAAM,KAAK,kBAC1B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,sNAAQ;wBAAC,WAAU;;;;;;kCACpB,8OAAC;kCAAE;;;;;;;;;;;qCAGL,8OAAC;gBAAI,WAAU;0BACZ,gBAAgB,GAAG,CAAC,CAAC;oBACpB,MAAM,YAAY,sBAAsB,WAAW,EAAE;oBACrD,MAAM,UAAU,qBAAqB;oBACrC,MAAM,SAAS,oBAAoB,wBAAwB;oBAE3D,qBACE,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,sNAAQ;wDAAC,WAAU;;;;;;kEACpB,8OAAC;wDAAK,WAAU;;4DACb,WAAW,WAAW,GAAG,GAAG,WAAW,WAAW,CAAC,CAAC,CAAC,GAAG;4DAAI,WAAW,UAAU;;;;;;;kEAEpF,8OAAC,mIAAK;wDAAC,SAAQ;wDAAU,WAAU;kEAChC,QAAQ,KAAK;;;;;;;;;;;;4CAGjB,CAAC,2BACA,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;;4DAAiC,QAAQ,KAAK;4DAAC;;;;;;;kEAC/D,8OAAC;wDAAK,WAAU;kEAAqC,QAAQ,KAAK;;;;;;oDACjE,WAAW,cAAc,GAAG,mBAC3B,8OAAC;wDAAK,WAAU;;4DAAqC;4DAChD,WAAW,cAAc,CAAC,cAAc;4DAAG;;;;;;;oDAGjD,WAAW,oBAAoB,kBAC9B,8OAAC;wDAAK,WAAU;;4DAAqC;4DACpC,IAAI,KAAK,WAAW,oBAAoB,EAAE,cAAc;;;;;;;;;;;;;;;;;;;kDAMjF,8OAAC;wCAAI,WAAU;kDACZ,0BACC;;8DACE,8OAAC,qIAAM;oDACL,MAAK;oDACL,SAAS,IAAM,WAAW;oDAC1B,WAAU;;sEAEV,8OAAC,0MAAI;4DAAC,WAAU;;;;;;wDAAY;;;;;;;8DAG9B,8OAAC,qIAAM;oDACL,MAAK;oDACL,SAAQ;oDACR,SAAS;wDACP,qBAAqB;wDACrB,YAAY,CAAC;oDACf;oDACA,WAAU;8DACX;;;;;;;yEAKH;;8DACE,8OAAC,qIAAM;oDACL,MAAK;oDACL,SAAQ;oDACR,SAAS,IAAM,WAAW;oDAC1B,WAAU;8DACX;;;;;;8DAGD,8OAAC,qIAAM;oDACL,MAAK;oDACL,SAAQ;oDACR,SAAS,IAAM,YAAY;oDAC3B,WAAU;;sEAEV,8OAAC,oNAAM;4DAAC,WAAU;;;;;;wDAAY;;;;;;;;;;;;;;;;;;;;4BAQvC,2BACC,8OAAC;gCAAI,WAAU;0CACZ,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;;0DACC,8OAAC,mIAAK;gDAAC,WAAU;0DAAiC,MAAM,KAAK;;;;;;0DAC7D,8OAAC,mIAAK;gDACJ,MAAM,MAAM,IAAI;gDAChB,OACE,MAAM,IAAI,KAAK,WACX,AAAC,QAAQ,CAAC,MAAM,GAAG,CAA0B,IAAe,KAC5D,AAAC,QAAQ,CAAC,MAAM,GAAG,CAA0B,IAAe;gDAElE,UAAU,CAAC,IACT,YAAY;wDACV,GAAG,QAAQ;wDACX,CAAC,MAAM,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,WAAW,SAAS,EAAE,MAAM,CAAC,KAAK,KAAK,IAAI,EAAE,MAAM,CAAC,KAAK;oDACvF;gDAEF,WAAU;gDACV,aAAa,CAAC,MAAM,EAAE,MAAM,KAAK,CAAC,WAAW,IAAI;;;;;;;uCAhB3C,MAAM,GAAG;;;;;;;;;;;uBAjFpB,WAAW,EAAE;;;;;gBAyGxB;;;;;;;;;;;;AAKV"}},
    {"offset": {"line": 4744, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Saroj/Desktop/CDC_final_latest_febuary/cdc-application/frontend/components/pipelines/pipeline-detail.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, useMemo, useRef } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Progress } from \"@/components/ui/progress\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { ArrowLeft, Play, Pause, Square, Download, CheckCircle, Eye, X, Loader2, ChevronLeft, ChevronRight, Activity, Database, AlertCircle, RefreshCw, RotateCw, Zap, Clock } from \"lucide-react\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from \"recharts\"\r\nimport { apiClient } from \"@/lib/api/client\"\r\nimport { useAppSelector, useAppDispatch } from \"@/lib/store/hooks\"\r\nimport { fetchMonitoringMetrics, fetchReplicationEvents } from \"@/lib/store/slices/monitoringSlice\"\r\nimport { triggerPipeline, pausePipeline, stopPipeline, fetchPipelines, updatePipeline, setSelectedPipeline } from \"@/lib/store/slices/pipelineSlice\"\r\nimport { wsClient } from \"@/lib/websocket/client\"\r\nimport { CheckpointManager } from \"./checkpoint-manager\"\r\nimport { useConfirmDialog } from \"@/components/ui/confirm-dialog\"\r\nimport { useErrorToast } from \"@/components/ui/error-toast\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface Pipeline {\r\n  id: string | number\r\n  name: string\r\n  description?: string\r\n  source_connection_id?: string | number\r\n  target_connection_id?: string | number\r\n  source_connection_uuid?: string  // Actual UUID for connection lookup\r\n  target_connection_uuid?: string  // Actual UUID for connection lookup\r\n  sourceConnection?: string\r\n  targetConnection?: string\r\n  table_mappings?: Array<{\r\n    source_schema?: string\r\n    source_table: string\r\n    target_schema?: string\r\n    target_table: string\r\n  }>\r\n  tables?: string[] // Legacy support\r\n  mode?: string\r\n  full_load_type?: string\r\n  cdc_enabled?: boolean\r\n  cdc_filters?: any[]\r\n  status: string\r\n  lastRun?: string\r\n  nextRun?: string\r\n  tableCount?: number\r\n  recordsProcessed?: number\r\n  lagSeconds?: number\r\n  consumerLag?: any\r\n  created_at?: string\r\n  updated_at?: string\r\n  current_lsn?: string\r\n  current_offset?: string\r\n  current_scn?: string\r\n  last_offset_updated?: string\r\n  // Nested structures from pipeline status API\r\n  full_load?: {\r\n    lsn?: string  // Format: \"SCN:17026643\" or \"LSN:...\"\r\n    message?: string\r\n    success?: boolean\r\n    tables_transferred?: any[]\r\n    total_rows?: number\r\n  }\r\n  debezium_connector?: {\r\n    name?: string\r\n    status?: string\r\n    offset?: string | object\r\n  }\r\n  sink_connector?: {\r\n    name?: string\r\n    status?: string\r\n  }\r\n  kafka_topics?: string[]\r\n}\r\n\r\n// Performance data will be calculated from real metrics\r\n\r\nexport function PipelineDetail({ pipeline, onBack }: { pipeline?: Pipeline; onBack: () => void }) {\r\n  const router = useRouter()\r\n  const dispatch = useAppDispatch()\r\n  const { metrics, events } = useAppSelector((state) => state.monitoring)\r\n  const { isLoading: pipelineLoading } = useAppSelector((state) => state.pipelines)\r\n  const { connections } = useAppSelector((state) => state.connections)\r\n  const { showConfirm, ConfirmDialogComponent } = useConfirmDialog()\r\n  const { showError, ErrorToastComponent } = useErrorToast()\r\n  const [selectedTable, setSelectedTable] = useState<{ source: string, target: string, sourceSchema?: string, targetSchema?: string } | null>(null)\r\n  const [sourceData, setSourceData] = useState<any>(null)\r\n  const [targetData, setTargetData] = useState<any>(null)\r\n  const [loadingData, setLoadingData] = useState(false)\r\n  const [dataError, setDataError] = useState<string | null>(null)\r\n  const [sourcePage, setSourcePage] = useState(1)\r\n  const [targetPage, setTargetPage] = useState(1)\r\n  const [retryingTarget, setRetryingTarget] = useState(false)\r\n  const recordsPerPage = 10\r\n  const [isComparing, setIsComparing] = useState(false) // Guard to prevent multiple simultaneous compare calls\r\n  const [replicationProgress, setReplicationProgress] = useState<{\r\n    full_load?: {\r\n      status: string\r\n      progress_percent: number\r\n      records_loaded: number\r\n      total_records: number\r\n      current_table?: string\r\n      error_message?: string\r\n    }\r\n    cdc?: {\r\n      status: string\r\n      events_captured: number\r\n      events_applied: number\r\n      events_failed: number\r\n      last_event_time?: string\r\n      error_message?: string\r\n    }\r\n    consumer_lag?: Record<string, any>\r\n  } | null>(null)\r\n  const progressPollIntervalRef = useRef<NodeJS.Timeout | null>(null)\r\n  const [retryingEventId, setRetryingEventId] = useState<string | null>(null)\r\n\r\n  // Fetch connections if not loaded\r\n  useEffect(() => {\r\n    if (connections.length === 0) {\r\n      import(\"@/lib/store/slices/connectionSlice\").then(({ fetchConnections }) => {\r\n        dispatch(fetchConnections())\r\n      })\r\n    }\r\n  }, [connections.length, dispatch])\r\n\r\n  // Always refresh pipeline on mount to get latest status (including on page refresh/navigation)\r\n  useEffect(() => {\r\n    if (pipeline?.id) {\r\n      // Always fetch latest pipeline status from backend\r\n      dispatch(fetchPipelines())\r\n\r\n      import(\"@/lib/api/client\").then(({ apiClient }) => {\r\n        // Fetch individual pipeline to get latest status and UUIDs\r\n        apiClient.getPipeline(pipeline.id).then((updatedPipeline) => {\r\n          if (updatedPipeline) {\r\n            console.log(\"[PipelineDetail] Refreshed pipeline:\", {\r\n              id: updatedPipeline.id,\r\n              status: updatedPipeline.status,\r\n              source_uuid: updatedPipeline.source_connection_uuid,\r\n              target_uuid: updatedPipeline.target_connection_uuid,\r\n            })\r\n            dispatch(setSelectedPipeline(updatedPipeline))\r\n            dispatch(fetchPipelines()) // Refresh all pipelines to keep list updated\r\n          }\r\n        }).catch((err) => {\r\n          console.warn(\"Failed to refresh pipeline:\", err)\r\n          // Still refresh pipelines list even if individual fetch fails\r\n          dispatch(fetchPipelines())\r\n        })\r\n      })\r\n    }\r\n  }, [pipeline?.id, dispatch])\r\n\r\n  // Auto-refresh pipeline status every 10 seconds to keep it updated\r\n  useEffect(() => {\r\n    if (!pipeline?.id) return\r\n\r\n    const interval = setInterval(() => {\r\n      // Refresh pipeline status from backend\r\n      dispatch(fetchPipelines())\r\n\r\n      import(\"@/lib/api/client\").then(({ apiClient }) => {\r\n        apiClient.getPipeline(pipeline.id).then((updatedPipeline) => {\r\n          if (updatedPipeline) {\r\n            dispatch(setSelectedPipeline(updatedPipeline))\r\n          }\r\n        }).catch((err) => {\r\n          console.warn(\"Failed to refresh pipeline status:\", err)\r\n        })\r\n      })\r\n    }, 10000) // Refresh every 10 seconds\r\n\r\n    return () => clearInterval(interval)\r\n  }, [pipeline?.id, dispatch])\r\n\r\n  // Extract stable pipeline ID and status to prevent unnecessary re-renders\r\n  const stablePipelineId = useMemo(() => {\r\n    if (!pipeline?.id) return null\r\n    const pipelineIdStr = String(pipeline.id)\r\n    const numId = pipeline.id\r\n    const pipelineId = !isNaN(Number(numId)) && isFinite(Number(numId)) ? numId : pipelineIdStr\r\n    // Validate pipeline ID is not NaN or undefined\r\n    if (!pipelineId || pipelineId === 'NaN' || pipelineId === 'undefined' || (typeof pipelineId === 'number' && isNaN(pipelineId))) {\r\n      return null\r\n    }\r\n    return pipelineId\r\n  }, [pipeline?.id])\r\n\r\n  const pipelineStatus = useMemo(() => pipeline?.status || null, [pipeline?.status])\r\n\r\n  // Fetch real-time metrics and events for this pipeline\r\n  useEffect(() => {\r\n    if (!stablePipelineId) {\r\n      return\r\n    }\r\n\r\n    console.log('[PipelineDetail] Using pipeline ID:', stablePipelineId, 'type:', typeof stablePipelineId)\r\n\r\n    dispatch(fetchMonitoringMetrics({ pipelineId: stablePipelineId }))\r\n    dispatch(fetchReplicationEvents({ pipelineId: stablePipelineId, limit: 10000, todayOnly: false })) // Fetch more events to get accurate count\r\n\r\n    // Subscribe to WebSocket for real-time updates\r\n    wsClient.subscribePipeline(stablePipelineId)\r\n\r\n    // Auto-refresh events every 5 seconds for real-time updates\r\n    const refreshInterval = setInterval(() => {\r\n      dispatch(fetchReplicationEvents({ pipelineId: stablePipelineId, limit: 10000, todayOnly: false }))\r\n    }, 5000)\r\n\r\n    return () => {\r\n      wsClient.unsubscribePipeline(stablePipelineId)\r\n      clearInterval(refreshInterval)\r\n    }\r\n  }, [stablePipelineId, dispatch]) // Use stable memoized value instead of pipeline?.id\r\n\r\n  // Poll for replication progress\r\n  const progressRetryCountRef = useRef(0)\r\n  const lastPipelineIdRef = useRef<string | number | null>(null)\r\n  const lastPipelineStatusRef = useRef<string | null>(null)\r\n  const fetchProgressRef = useRef<(() => Promise<void>) | null>(null)\r\n\r\n  useEffect(() => {\r\n    if (!stablePipelineId) return\r\n\r\n    // Get current status directly from pipeline to avoid stale closures\r\n    const currentStatus = pipeline?.status || null\r\n\r\n    // Skip if pipeline ID and status haven't changed\r\n    if (lastPipelineIdRef.current === stablePipelineId && lastPipelineStatusRef.current === currentStatus) {\r\n      return\r\n    }\r\n\r\n    // Update refs\r\n    lastPipelineIdRef.current = stablePipelineId\r\n    lastPipelineStatusRef.current = currentStatus\r\n\r\n    // Create fetchProgress function and store in ref for use in onClick handlers\r\n    const fetchProgress = async () => {\r\n      try {\r\n        const progress = await apiClient.getPipelineProgress(stablePipelineId)\r\n\r\n        // Map backend response to expected format (handle both nested and flat formats)\r\n        const mappedProgress: any = {\r\n          full_load: progress.full_load || {\r\n            status: progress.full_load_status?.toLowerCase() || \"unknown\",\r\n            progress_percent: progress.progress_percentage || 0,\r\n            records_loaded: progress.records_loaded || progress.records_processed || 0,\r\n            total_records: progress.total_records || progress.records_total || 0,\r\n            current_table: progress.current_table,\r\n            error_message: progress.error_message\r\n          },\r\n          cdc: progress.cdc || {\r\n            status: progress.cdc_status?.toLowerCase() || \"unknown\"\r\n          }\r\n        }\r\n\r\n        // Normalize status values\r\n        if (mappedProgress.full_load.status === \"completed\" || mappedProgress.full_load.status === \"COMPLETED\") {\r\n          mappedProgress.full_load.status = \"completed\"\r\n          mappedProgress.full_load.progress_percent = Math.max(mappedProgress.full_load.progress_percent, 100)\r\n        } else if (mappedProgress.full_load.status === \"in_progress\" || mappedProgress.full_load.status === \"IN_PROGRESS\" || mappedProgress.full_load.status === \"running\") {\r\n          mappedProgress.full_load.status = \"running\"\r\n        } else if (mappedProgress.full_load.status === \"failed\" || mappedProgress.full_load.status === \"FAILED\") {\r\n          mappedProgress.full_load.status = \"failed\"\r\n        }\r\n\r\n        setReplicationProgress(mappedProgress)\r\n        progressRetryCountRef.current = 0 // Reset retry count on success\r\n      } catch (error: any) {\r\n        // Handle timeout errors gracefully\r\n        if (error?.isTimeout || error?.code === 'ECONNABORTED') {\r\n          progressRetryCountRef.current++\r\n          // Only log occasionally to avoid spam\r\n          if (progressRetryCountRef.current % 5 === 0) {\r\n            console.warn(`[PipelineProgress] Timeout (attempt ${progressRetryCountRef.current}) - endpoint may be slow`)\r\n          }\r\n        } else {\r\n          console.error(\"Error fetching progress:\", error)\r\n        }\r\n        // Don't update state on error - keep last known progress\r\n      }\r\n    }\r\n\r\n    // Store fetchProgress in ref for use in onClick handlers\r\n    fetchProgressRef.current = fetchProgress\r\n\r\n    // Clear any existing interval first\r\n    if (progressPollIntervalRef.current) {\r\n      clearInterval(progressPollIntervalRef.current)\r\n      progressPollIntervalRef.current = null\r\n    }\r\n\r\n    // Fetch immediately\r\n    fetchProgress()\r\n\r\n    // Poll every 3 seconds if pipeline is active/running/starting (reduced from 5s for better responsiveness)\r\n    // Use currentStatus from closure instead of pipelineStatus to avoid stale values\r\n    if (currentStatus === \"active\" || currentStatus === \"running\" || currentStatus === \"starting\") {\r\n      progressPollIntervalRef.current = setInterval(fetchProgress, 3000)\r\n    }\r\n\r\n    return () => {\r\n      if (progressPollIntervalRef.current) {\r\n        clearInterval(progressPollIntervalRef.current)\r\n        progressPollIntervalRef.current = null\r\n      }\r\n    }\r\n  }, [stablePipelineId, pipeline?.status]) // Use pipeline?.status directly instead of memoized value\r\n\r\n  // Calculate records synced from actual replication events\r\n  const recordsSynced = useMemo(() => {\r\n    if (!pipeline?.id) return 0\r\n\r\n    const pipelineIdStr = String(pipeline.id)\r\n    // Count all events for this pipeline (insert, update, delete)\r\n    // Only count successful events (status === \"applied\" or status !== \"failed\")\r\n    const pipelineEvents = events.filter(e => {\r\n      const eventPipelineId = String(e.pipeline_id || '')\r\n      return eventPipelineId === pipelineIdStr &&\r\n        e.status !== \"failed\" &&\r\n        e.status !== \"error\"\r\n    })\r\n    return pipelineEvents.length\r\n  }, [events, pipeline?.id])\r\n\r\n  // Calculate replication lag (average latency in seconds)\r\n  const replicationLag = useMemo(() => {\r\n    if (!pipeline?.id) return null\r\n\r\n    const pipelineIdStr = String(pipeline.id)\r\n    const pipelineId = !isNaN(Number(pipeline.id)) ? pipeline.id : pipelineIdStr\r\n    const pipelineEvents = events.filter(e => {\r\n      const eventPipelineId = String(e.pipeline_id || '')\r\n      const currentPipelineId = String(pipelineId)\r\n      return eventPipelineId === currentPipelineId &&\r\n        e.latency_ms &&\r\n        e.latency_ms > 0\r\n    })\r\n\r\n    if (pipelineEvents.length === 0) return null\r\n\r\n    // Only calculate from events that have been applied (have latency_ms > 0)\r\n    const eventsWithLatency = pipelineEvents.filter(e => e.latency_ms != null && e.latency_ms !== undefined && e.latency_ms > 0)\r\n    if (eventsWithLatency.length === 0) return null // No latency data available\r\n\r\n    const avgLatencyMs = eventsWithLatency.reduce((sum, e) => sum + (e.latency_ms || 0), 0) / eventsWithLatency.length\r\n    return Math.round(avgLatencyMs / 1000) // Convert to seconds\r\n  }, [events, pipeline?.id])\r\n\r\n  // Calculate performance data from real metrics\r\n  const performanceData = useMemo(() => {\r\n    // Ensure metrics is always an array\r\n    const safeMetrics = Array.isArray(metrics) ? metrics : []\r\n    const safeEvents = Array.isArray(events) ? events : []\r\n    const pipelineIdStr = String(pipeline?.id || '')\r\n\r\n    // Filter events by pipeline ID first\r\n    const pipelineEvents = safeEvents.filter(e => {\r\n      if (!e || !e.created_at) return false\r\n      const eventPipelineId = String(e.pipeline_id || '')\r\n      return eventPipelineId === pipelineIdStr\r\n    })\r\n\r\n    // Filter metrics by pipeline ID\r\n    const pipelineMetrics = safeMetrics.filter(m => {\r\n      const metricPipelineId = String(m.pipeline_id || '')\r\n      return metricPipelineId === pipelineIdStr\r\n    })\r\n\r\n    // If we have metrics, use them (preferred source)\r\n    if (pipelineMetrics.length > 0) {\r\n      const metricsData = pipelineMetrics.slice(-7).map(metric => {\r\n        const date = new Date(metric.timestamp)\r\n        const time = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false })\r\n        return {\r\n          time,\r\n          records: (metric as any).total_events || (metric as any).throughput_events_per_sec || 0,\r\n          latency: Math.round((metric as any).avg_latency_ms || ((metric as any).lag_seconds || 0) * 1000 || 0),\r\n        }\r\n      })\r\n\r\n      // If we have data, return it\r\n      if (metricsData.length > 0) {\r\n        return metricsData\r\n      }\r\n    }\r\n\r\n    // If no metrics, create from events grouped by hour\r\n    if (pipelineEvents.length > 0) {\r\n      const now = new Date()\r\n      const hourlyData = Array.from({ length: 7 }, (_, i) => {\r\n        const hour = new Date(now.getTime() - (6 - i) * 60 * 60 * 1000)\r\n        const time = hour.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false })\r\n\r\n        const hourEvents = pipelineEvents.filter(e => {\r\n          if (!e || !e.created_at) return false\r\n          const eventTime = new Date(e.created_at)\r\n          return eventTime >= hour && eventTime < new Date(hour.getTime() + 60 * 60 * 1000)\r\n        })\r\n\r\n        // Count all event types (insert, update, delete) for records\r\n        const records = hourEvents.filter(e => {\r\n          const eventType = String(e.event_type || '').toLowerCase()\r\n          return eventType === 'insert' || eventType === 'update' || eventType === 'delete'\r\n        }).length\r\n\r\n        const latency = hourEvents.length > 0\r\n          ? hourEvents.reduce((sum, e) => sum + (e.latency_ms || 0), 0) / hourEvents.length\r\n          : 0\r\n\r\n        return { time, records, latency: Math.round(latency) }\r\n      })\r\n\r\n      // If we have any data, return it\r\n      if (hourlyData.some(d => d.records > 0 || d.latency > 0)) {\r\n        return hourlyData\r\n      }\r\n    }\r\n\r\n    // Fallback: Return empty data structure so graph still renders\r\n    const now = new Date()\r\n    return Array.from({ length: 7 }, (_, i) => {\r\n      const hour = new Date(now.getTime() - (6 - i) * 60 * 60 * 1000)\r\n      const time = hour.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false })\r\n      return { time, records: 0, latency: 0 }\r\n    })\r\n  }, [metrics, events, pipeline?.id]) // Add pipeline.id to dependencies for stability\r\n\r\n  if (!pipeline) return null\r\n\r\n  // Extract table names from table_mappings or use tables array\r\n  const tableNames = pipeline.table_mappings\r\n    ? pipeline.table_mappings.map(tm => `${tm.source_table} → ${tm.target_table}`)\r\n    : (pipeline.tables || [])\r\n\r\n  const tableCount = pipeline.table_mappings?.length || pipeline.tables?.length || pipeline.tableCount || 0\r\n  const sourceConnObj = connections.find(c => String(c.id) === String(pipeline.source_connection_id))\r\n  const sourceConn = sourceConnObj?.name || pipeline.sourceConnection || `Connection ${pipeline.source_connection_id || 'N/A'}`\r\n  const targetConnObj = connections.find(c => String(c.id) === String(pipeline.target_connection_id))\r\n  const targetConn = targetConnObj?.name || pipeline.targetConnection || `Connection ${pipeline.target_connection_id || 'N/A'}`\r\n\r\n  const handleCompareTable = async (tm: { source_table: string, target_table: string, source_schema?: string, target_schema?: string }) => {\r\n    // Prevent multiple simultaneous calls - check early and return immediately\r\n    if (isComparing || loadingData) {\r\n      console.log(\"[Compare] Already comparing, ignoring duplicate call\")\r\n      return\r\n    }\r\n\r\n    // Set flags immediately to prevent duplicate calls\r\n    setIsComparing(true)\r\n    setLoadingData(true)\r\n    setDataError(null)\r\n    setSourceData(null)\r\n    setTargetData(null)\r\n\r\n    // Check if pipeline has orphaned connections and fix them automatically before comparing\r\n    if (pipeline?.id && (pipeline.source_connection_uuid || pipeline.target_connection_uuid)) {\r\n      try {\r\n        // Try to verify connections exist by attempting to get connection details\r\n        const sourceConn = pipeline.source_connection_uuid\r\n          ? connections.find(c => String(c.id) === String(pipeline.source_connection_uuid))\r\n          : null\r\n        const targetConn = pipeline.target_connection_uuid\r\n          ? connections.find(c => String(c.id) === String(pipeline.target_connection_uuid))\r\n          : null\r\n\r\n        // If connections don't exist in the local list, try to fix orphaned connections\r\n        if ((pipeline.source_connection_uuid && !sourceConn) || (pipeline.target_connection_uuid && !targetConn)) {\r\n          console.log(\"[Compare] Detected orphaned connections, attempting to fix...\")\r\n          try {\r\n            const result = await apiClient.fixOrphanedConnections()\r\n            console.log(\"[Compare] Fixed orphaned connections:\", result)\r\n            // Refresh pipeline after fixing\r\n            const updatedPipeline = await apiClient.getPipeline(pipeline.id)\r\n            dispatch(setSelectedPipeline(updatedPipeline))\r\n            dispatch(fetchPipelines())\r\n            // Update local pipeline reference\r\n            Object.assign(pipeline, updatedPipeline)\r\n          } catch (fixErr) {\r\n            console.warn(\"[Compare] Failed to fix orphaned connections automatically:\", fixErr)\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.warn(\"[Compare] Error checking connections:\", err)\r\n      }\r\n    }\r\n\r\n    // Set selected table after state is set\r\n    // Clean table names and schemas before setting selectedTable\r\n    // Extract schema from table name if it's included (e.g., \"public.projects_simple\" -> schema: \"public\", table: \"projects_simple\")\r\n    let cleanSourceTable = tm.source_table\r\n    let cleanSourceSchema = tm.source_schema\r\n    if (cleanSourceTable.includes('.') && !cleanSourceSchema) {\r\n      const parts = cleanSourceTable.split('.')\r\n      if (parts.length === 2) {\r\n        cleanSourceSchema = parts[0]\r\n        cleanSourceTable = parts[1]\r\n      }\r\n    }\r\n\r\n    let cleanTargetTable = tm.target_table\r\n    let cleanTargetSchema = tm.target_schema\r\n    if (cleanTargetTable.includes('.') && !cleanTargetSchema) {\r\n      const parts = cleanTargetTable.split('.')\r\n      if (parts.length === 2) {\r\n        cleanTargetSchema = parts[0]\r\n        cleanTargetTable = parts[1]\r\n      }\r\n    }\r\n\r\n    // Also remove schema from table name if it's already in the schema field\r\n    if (cleanTargetTable.includes('.') && cleanTargetSchema) {\r\n      const parts = cleanTargetTable.split('.')\r\n      if (parts.length === 2 && parts[0] === cleanTargetSchema) {\r\n        cleanTargetTable = parts[1]\r\n        console.log(`[Compare] Removed duplicate schema from target table name: \"${tm.target_table}\" -> \"${cleanTargetTable}\"`)\r\n      }\r\n    }\r\n\r\n    if (cleanSourceTable.includes('.') && cleanSourceSchema) {\r\n      const parts = cleanSourceTable.split('.')\r\n      if (parts.length === 2 && parts[0] === cleanSourceSchema) {\r\n        cleanSourceTable = parts[1]\r\n        console.log(`[Compare] Removed duplicate schema from source table name: \"${tm.source_table}\" -> \"${cleanSourceTable}\"`)\r\n      }\r\n    }\r\n\r\n    setSelectedTable({\r\n      source: cleanSourceTable,\r\n      target: cleanTargetTable,\r\n      sourceSchema: cleanSourceSchema,\r\n      targetSchema: cleanTargetSchema\r\n    })\r\n    setSourcePage(1) // Reset to first page\r\n    setTargetPage(1) // Reset to first page\r\n\r\n    const errors: string[] = []\r\n\r\n    try {\r\n      // Get connection types to determine if Oracle (for timeout adjustments)\r\n      // Try to find by UUID first, then by numeric ID\r\n      const sourceConn = pipeline.source_connection_uuid\r\n        ? connections.find(c => String(c.id) === String(pipeline.source_connection_uuid))\r\n        : connections.find(c => String(c.id) === String(pipeline.source_connection_id))\r\n      const targetConn = pipeline.target_connection_uuid\r\n        ? connections.find(c => String(c.id) === String(pipeline.target_connection_uuid))\r\n        : connections.find(c => String(c.id) === String(pipeline.target_connection_id))\r\n      const isSourceOracle = sourceConn?.connection_type?.toLowerCase() === 'oracle'\r\n      const isTargetOracle = targetConn?.connection_type?.toLowerCase() === 'oracle'\r\n\r\n      // Fetch source data first (sequential to avoid overwhelming backend)\r\n      let sourceTableName = tm.source_table\r\n      let sourceSchema = tm.source_schema && tm.source_schema !== \"undefined\" && tm.source_schema.trim() !== \"\"\r\n        ? tm.source_schema.trim()\r\n        : undefined\r\n      const sourceLimit = isSourceOracle ? 100 : 1000\r\n\r\n      // Split table name if it contains schema (e.g., \"public.employees\" -> schema: \"public\", table: \"employees\")\r\n      // Check if table name contains schema (format: \"schema.table\")\r\n      if (sourceTableName.includes('.') && !sourceSchema) {\r\n        const parts = sourceTableName.split('.')\r\n        if (parts.length === 2) {\r\n          sourceSchema = parts[0]\r\n          sourceTableName = parts[1]\r\n          console.log(`[Compare] Split table name: \"${tm.source_table}\" -> schema: \"${sourceSchema}\", table: \"${sourceTableName}\"`)\r\n        }\r\n      }\r\n\r\n      // Handle \"undefined\" schema string - convert to undefined/null\r\n      if (sourceSchema === \"undefined\" || sourceSchema?.trim() === \"\") {\r\n        sourceSchema = undefined\r\n      }\r\n\r\n      try {\r\n        console.log(`[Compare] Fetching source table: ${sourceTableName} (schema: ${sourceSchema || 'default'}, connection type: ${sourceConn?.connection_type || 'unknown'})`)\r\n\r\n        // Use UUID if available, otherwise fall back to numeric ID\r\n        const sourceConnectionId = pipeline.source_connection_uuid || pipeline.source_connection_id!\r\n        console.log(`[Compare] Using source connection ID: ${sourceConnectionId} (UUID: ${pipeline.source_connection_uuid || 'not available'}, numeric: ${pipeline.source_connection_id})`)\r\n        try {\r\n          const sourceResult = await apiClient.getTableData(\r\n            sourceConnectionId,\r\n            sourceTableName, // Use cleaned table name (without schema prefix)\r\n            sourceSchema, // Use cleaned schema (undefined if \"undefined\" string)\r\n            sourceLimit,\r\n            isSourceOracle ? 1 : 2, // Fewer retries for Oracle\r\n            isSourceOracle // Pass Oracle flag\r\n          )\r\n          setSourceData(sourceResult)\r\n          console.log(`[Compare] Source table loaded: ${sourceResult?.records?.length || 0} records`, {\r\n            fullResponse: sourceResult,\r\n            records: sourceResult?.records,\r\n            columns: sourceResult?.columns,\r\n            count: sourceResult?.count\r\n          })\r\n        } catch (sourceError: any) {\r\n          const errorMsg = sourceError?.message || \"Failed to fetch source table\"\r\n          // Check if it's a connection not found error\r\n          if (errorMsg.includes(\"Connection not found\")) {\r\n            setDataError(`⚠️ Source connection not found. The pipeline's source connection (${pipeline.source_connection_uuid || pipeline.source_connection_id}) doesn't exist. Please update the pipeline to use a valid connection.`)\r\n          } else {\r\n            setDataError(`⚠️ Source table unavailable: ${errorMsg}`)\r\n          }\r\n          throw sourceError\r\n        }\r\n      } catch (sourceError: any) {\r\n        console.error(\"[Compare] Failed to fetch source table:\", sourceError)\r\n        let sourceErrMsg = sourceError?.message || sourceError?.response?.data?.detail || \"Failed to fetch source table data\"\r\n\r\n        // Improve error messages for common error codes\r\n        // 08001 is PostgreSQL connection error code\r\n        if (sourceErrMsg.includes('08001') || (sourceError?.code && String(sourceError.code).includes('08001'))) {\r\n          sourceErrMsg = `Database connection error (08001): Cannot connect to source database. ` +\r\n            `This usually means:\\n` +\r\n            `1. Database server is not running or unreachable\\n` +\r\n            `2. Connection host/port is incorrect\\n` +\r\n            `3. Network connectivity issues (firewall blocking)\\n` +\r\n            `4. Database credentials are incorrect\\n` +\r\n            `Please verify the source database connection configuration and ensure the database server is accessible.`\r\n        }\r\n\r\n        // Remove misleading prefixes like \"Oracle Database Error:\" if it's not actually an Oracle error\r\n        const sourceErrMsgLower = sourceErrMsg.toLowerCase()\r\n        if (sourceErrMsgLower.includes('oracle database error:') &&\r\n          !sourceErrMsgLower.includes('ora-') &&\r\n          (sourceErrMsgLower.includes('08001') ||\r\n            sourceErrMsgLower.includes('postgresql') ||\r\n            sourceErrMsgLower.includes('connection refused'))) {\r\n          // This is incorrectly labeled as Oracle error - remove the prefix\r\n          sourceErrMsg = sourceErrMsg.replace(/^Oracle Database Error:\\s*/i, '').trim()\r\n        }\r\n\r\n        // Check if it's a connection not found error - try to fix automatically\r\n        if (sourceErrMsg.includes('Connection not found') && pipeline?.id) {\r\n          console.log(\"[Compare] Source connection not found, attempting to fix orphaned connections...\")\r\n          try {\r\n            const result = await apiClient.fixOrphanedConnections()\r\n            console.log(\"[Compare] Fixed orphaned connections:\", result)\r\n            // Refresh pipeline\r\n            const updatedPipeline = await apiClient.getPipeline(pipeline.id)\r\n            dispatch(setSelectedPipeline(updatedPipeline))\r\n            dispatch(fetchPipelines())\r\n            // Update local pipeline reference\r\n            Object.assign(pipeline, updatedPipeline)\r\n            // Retry the source fetch with updated connection\r\n            try {\r\n              const retrySourceConnectionId = updatedPipeline.source_connection_uuid || updatedPipeline.source_connection_id!\r\n              const retrySourceResult = await apiClient.getTableData(\r\n                retrySourceConnectionId,\r\n                sourceTableName,\r\n                sourceSchema,\r\n                sourceLimit,\r\n                isSourceOracle ? 1 : 2,\r\n                isSourceOracle\r\n              )\r\n              setSourceData(retrySourceResult)\r\n              console.log(\"[Compare] Source table loaded after fix:\", retrySourceResult?.records?.length || 0, \"records\")\r\n              // Don't add to errors since we successfully fetched after fix\r\n              return // Exit early, will continue to target fetch\r\n            } catch (retryErr) {\r\n              console.error(\"[Compare] Retry after fix failed:\", retryErr)\r\n              errors.push(`Source: ${sourceErrMsg} (fix attempted but failed)`)\r\n            }\r\n          } catch (fixErr) {\r\n            console.error(\"[Compare] Failed to fix orphaned connections:\", fixErr)\r\n            errors.push(`Source: ${sourceErrMsg}`)\r\n          }\r\n        } else {\r\n          errors.push(`Source: ${sourceErrMsg}`)\r\n        }\r\n        // Continue to try target even if source fails\r\n      }\r\n\r\n      // Fetch target data after source (sequential)\r\n      try {\r\n        // Split table name if it contains schema (e.g., \"dbo.employees\" -> schema: \"dbo\", table: \"employees\")\r\n        let targetTableName = tm.target_table\r\n        let targetSchema = tm.target_schema && tm.target_schema !== \"undefined\" && tm.target_schema.trim() !== \"\"\r\n          ? tm.target_schema.trim()\r\n          : undefined\r\n\r\n        // Check if table name contains schema (format: \"schema.table\")\r\n        if (targetTableName.includes('.') && !targetSchema) {\r\n          const parts = targetTableName.split('.')\r\n          if (parts.length === 2) {\r\n            targetSchema = parts[0]\r\n            targetTableName = parts[1]\r\n            console.log(`[Compare] Split target table name: \"${tm.target_table}\" -> schema: \"${targetSchema}\", table: \"${targetTableName}\"`)\r\n          }\r\n        }\r\n\r\n        // Handle \"undefined\" schema string - convert to undefined/null\r\n        if (targetSchema === \"undefined\" || targetSchema?.trim() === \"\") {\r\n          targetSchema = undefined\r\n        }\r\n\r\n        // SQL Server uses \"dbo\" as default schema, not \"public\"\r\n        // If target is SQL Server and schema is \"public\", convert to undefined (let backend use \"dbo\")\r\n        const isTargetSQLServer = targetConn?.connection_type?.toLowerCase() === 'sqlserver' || targetConn?.connection_type?.toLowerCase() === 'sql_server'\r\n        if (isTargetSQLServer && targetSchema?.toLowerCase() === 'public') {\r\n          console.log(`[Compare] SQL Server detected: Converting 'public' schema to undefined (will use 'dbo' default)`)\r\n          targetSchema = undefined\r\n        }\r\n\r\n        console.log(`[Compare] Fetching target table: ${targetTableName} (schema: ${targetSchema || 'default'}, connection type: ${targetConn?.connection_type || 'unknown'})`)\r\n\r\n        // Fetch all records (backend supports up to 1000)\r\n        // For Oracle connections, use smaller limit to avoid timeouts, but still fetch more records\r\n        const targetLimit = isTargetOracle ? 100 : 1000 // Increased from 20/25 to 100/1000\r\n        // Use UUID if available, otherwise fall back to numeric ID\r\n        const targetConnectionId = pipeline.target_connection_uuid || pipeline.target_connection_id!\r\n        console.log(`[Compare] Using target connection ID: ${targetConnectionId} (UUID: ${pipeline.target_connection_uuid || 'not available'}, numeric: ${pipeline.target_connection_id})`)\r\n        console.log(`[Compare] Calling getTableData with:`, {\r\n          connectionId: targetConnectionId,\r\n          tableName: targetTableName,\r\n          schema: targetSchema,\r\n          limit: targetLimit\r\n        })\r\n\r\n        const targetResult = await apiClient.getTableData(\r\n          targetConnectionId,\r\n          targetTableName, // Use cleaned table name (without schema prefix)\r\n          targetSchema, // Use cleaned schema (undefined if \"undefined\" string or SQL Server \"public\")\r\n          targetLimit,\r\n          isTargetOracle ? 1 : 2, // Fewer retries for Oracle\r\n          isTargetOracle // Pass Oracle flag\r\n        )\r\n\r\n        console.log(`[Compare] Raw target result:`, targetResult)\r\n\r\n        // Validate and set target data\r\n        if (targetResult && typeof targetResult === 'object') {\r\n          // Check if it's an error response\r\n          if (targetResult.success === false) {\r\n            console.error('[Compare] Target result indicates failure:', targetResult)\r\n            throw new Error(targetResult.error || 'Failed to fetch target table data')\r\n          }\r\n\r\n          // Ensure records is an array (default to empty array if missing)\r\n          if (!Array.isArray(targetResult.records)) {\r\n            console.warn('[Compare] Target result records is not an array, setting to empty array:', targetResult.records)\r\n            targetResult.records = []\r\n          }\r\n\r\n          // Ensure columns is an array (default to empty array if missing)\r\n          if (!Array.isArray(targetResult.columns)) {\r\n            console.warn('[Compare] Target result columns is not an array, setting to empty array:', targetResult.columns)\r\n            targetResult.columns = []\r\n          }\r\n\r\n          // Ensure count is a number\r\n          if (typeof targetResult.count !== 'number') {\r\n            targetResult.count = targetResult.records?.length || 0\r\n          }\r\n\r\n          // Validate that we actually got data\r\n          if (targetResult.success === true && Array.isArray(targetResult.records) && targetResult.records.length === 0 && targetResult.count > 0) {\r\n            console.warn(`[Compare] WARNING: Target table has count=${targetResult.count} but records array is empty! This may indicate a data fetching issue.`)\r\n            console.warn(`[Compare] Target table details:`, {\r\n              tableName: targetTableName,\r\n              schema: targetSchema,\r\n              connectionId: targetConnectionId,\r\n              connectionType: targetConn?.connection_type,\r\n              result: targetResult\r\n            })\r\n          }\r\n\r\n          // If records are empty and count is 0, check if table exists\r\n          if (targetResult?.count === 0 && (!Array.isArray(targetResult?.records) || targetResult.records.length === 0)) {\r\n            console.warn(`[Compare] Target table appears to be empty. This could mean: 1) Table doesn't exist, 2) Table exists but has no data, 3) Wrong table/schema name`)\r\n            console.warn(`[Compare] Table mapping: source=\"${tm.source_table}\" -> target=\"${tm.target_table}\" (schema: ${tm.target_schema || 'default'})`)\r\n            console.warn(`[Compare] Using table name: \"${targetTableName}\" with schema: \"${targetSchema || 'default'}\"`)\r\n          }\r\n\r\n          setTargetData(targetResult)\r\n          console.log(`[Compare] Target table loaded: ${targetResult?.records?.length || 0} records (count: ${targetResult?.count || 0})`, {\r\n            fullResponse: targetResult,\r\n            records: targetResult?.records,\r\n            recordsLength: targetResult?.records?.length,\r\n            columns: targetResult?.columns,\r\n            columnsLength: targetResult?.columns?.length,\r\n            count: targetResult?.count,\r\n            success: targetResult?.success,\r\n            hasRecords: Array.isArray(targetResult?.records) && targetResult.records.length > 0,\r\n            hasColumns: Array.isArray(targetResult?.columns) && targetResult.columns.length > 0,\r\n            tableName: targetTableName,\r\n            schema: targetSchema,\r\n            connectionId: targetConnectionId,\r\n            originalMapping: {\r\n              source_table: tm.source_table,\r\n              target_table: tm.target_table,\r\n              target_schema: tm.target_schema\r\n            }\r\n          })\r\n\r\n          // Log warning if records are empty but count > 0\r\n          if (targetResult?.count > 0 && (!Array.isArray(targetResult?.records) || targetResult.records.length === 0)) {\r\n            console.warn(`[Compare] Target table has ${targetResult.count} records but records array is empty. This may indicate a data fetching issue.`)\r\n            console.warn(`[Compare] Please check: 1) Table name is correct (${targetTableName}), 2) Schema is correct (${targetSchema || 'default'}), 3) Connection is valid (${targetConnectionId})`)\r\n          }\r\n        } else {\r\n          console.error('[Compare] Invalid target result (not an object):', targetResult, typeof targetResult)\r\n          // Even if invalid, set empty structure to show the table card\r\n          setTargetData({\r\n            success: false,\r\n            records: [],\r\n            columns: [],\r\n            count: 0,\r\n            error: 'Target table data format is invalid. Backend returned: ' + (typeof targetResult === 'string' ? targetResult : JSON.stringify(targetResult))\r\n          })\r\n          // Don't throw error, just set empty data so UI can show error message\r\n          console.error('[Compare] Target data is invalid, but continuing to show empty table')\r\n        }\r\n      } catch (targetError: any) {\r\n        console.error(\"[Compare] Failed to fetch target table:\", targetError)\r\n        // Extract error details more carefully\r\n        const errorDetails: any = {\r\n          message: targetError?.message,\r\n          name: targetError?.name,\r\n          code: targetError?.code,\r\n          table: tm.target_table,\r\n          schema: tm.target_schema,\r\n          connectionId: pipeline.target_connection_id\r\n        }\r\n        if (targetError?.response) {\r\n          errorDetails.response = {\r\n            status: targetError.response.status,\r\n            statusText: targetError.response.statusText,\r\n            data: targetError.response.data\r\n          }\r\n        }\r\n        if (targetError?.isTimeout) errorDetails.isTimeout = true\r\n        if (targetError?.isNetworkError) errorDetails.isNetworkError = true\r\n        console.error(\"[Compare] Target error details:\", errorDetails)\r\n\r\n        // Extract more specific error message\r\n        let targetErrMsg = \"Failed to fetch target table data\"\r\n        if (targetError?.response?.data?.detail) {\r\n          targetErrMsg = targetError.response.data.detail\r\n        } else if (targetError?.message) {\r\n          targetErrMsg = targetError.message\r\n        }\r\n\r\n        // Remove misleading prefixes like \"Oracle Database Error:\" if it's not actually an Oracle error\r\n        // This can happen if error detection is too broad\r\n        const targetErrMsgLower = targetErrMsg.toLowerCase()\r\n        if (targetErrMsgLower.includes('oracle database error:') &&\r\n          !targetErrMsgLower.includes('ora-') &&\r\n          (targetErrMsgLower.includes('aws_s3') ||\r\n            targetErrMsgLower.includes('s3') ||\r\n            targetErrMsgLower.includes('object storage') ||\r\n            targetErrMsgLower.includes('table comparison is not supported'))) {\r\n          // This is incorrectly labeled as Oracle error - remove the prefix\r\n          targetErrMsg = targetErrMsg.replace(/^Oracle Database Error:\\s*/i, '').trim()\r\n        }\r\n\r\n        // Simplify long error messages but keep important parts\r\n        if (targetErrMsg.length > 400) {\r\n          // Keep the first part and important keywords\r\n          const importantKeywords = ['timeout', 'connection', 'network', 'database', 'unreachable', 'oracle', 'not found', 'does not exist', 's3', 'aws_s3', 'object storage']\r\n          const hasImportant = importantKeywords.some(kw => targetErrMsg.toLowerCase().includes(kw))\r\n          if (hasImportant) {\r\n            targetErrMsg = targetErrMsg.substring(0, 400) + \"...\"\r\n          } else {\r\n            targetErrMsg = targetErrMsg.substring(0, 200) + \"...\"\r\n          }\r\n        }\r\n\r\n        errors.push(`Target: ${targetErrMsg}`)\r\n        // Set targetData to null on error to prevent showing stale data\r\n        setTargetData(null)\r\n        // Continue even if target fails - at least show source if available\r\n      }\r\n\r\n      // If both failed, show error\r\n      if (errors.length === 2) {\r\n        const hasOrphanedConnections = errors.some(err => err.includes('Connection not found'))\r\n        let errorMsg = `Failed to fetch both tables:\\n${errors.join('\\n\\n')}\\n\\nPlease check:\\n1. Database connections are configured correctly\\n2. Database servers are running and accessible\\n3. Network connectivity is available`\r\n        if (hasOrphanedConnections) {\r\n          errorMsg += `\\n\\n⚠️ This pipeline references connections that don't exist. The system will attempt to fix this automatically.`\r\n        }\r\n        setDataError(errorMsg)\r\n      } else if (errors.length === 1) {\r\n        // Partial success - show warning but allow viewing the successful table\r\n        // Make it less alarming since we're showing available data\r\n        const errorType = errors[0].startsWith('Target:') ? 'target' : 'source'\r\n        const simplifiedError = errors[0].replace(/^Target: |^Source: /, '')\r\n\r\n        // Check if it's a network/timeout error\r\n        if (simplifiedError.includes('Network Error') || simplifiedError.includes('timeout')) {\r\n          setDataError(`⚠️ ${errorType === 'target' ? 'Target' : 'Source'} table unavailable: ${simplifiedError}\\n\\nShowing available data. Please check the ${errorType} database connection.`)\r\n        } else {\r\n          setDataError(`⚠️ ${errorType === 'target' ? 'Target' : 'Source'} table: ${simplifiedError}\\n\\nShowing available data.`)\r\n        }\r\n      }\r\n      // If no errors, both tables loaded successfully\r\n\r\n    } catch (error: any) {\r\n      // Only log and set error if not already handled\r\n      if (!error?.handled) {\r\n        console.error(\"[Compare] Unexpected error in handleCompareTable:\", error)\r\n        let errorMessage = \"Failed to fetch table data\"\r\n        if (error?.message?.includes('timeout') || error?.isTimeout) {\r\n          errorMessage = \"Request timeout: The database connection is taking too long. Please check:\\n1. Database servers are running and accessible\\n2. Network connectivity is stable\\n3. Connection credentials are correct\"\r\n        } else if (error?.isNetworkError || error?.message?.includes('Network Error')) {\r\n          errorMessage = \"Network error: Cannot connect to backend or database. Please check:\\n1. Backend is running on http://localhost:8000\\n2. Database servers are accessible\\n3. Firewall/network settings allow connections\"\r\n        } else if (error?.response?.data?.detail) {\r\n          errorMessage = error.response.data.detail\r\n        } else if (error?.message) {\r\n          errorMessage = error.message\r\n        }\r\n        setDataError(errorMessage)\r\n      }\r\n    } finally {\r\n      // Always reset flags, even on error\r\n      setLoadingData(false)\r\n      setIsComparing(false) // Reset guard\r\n    }\r\n  }\r\n\r\n  const closeComparison = () => {\r\n    setSelectedTable(null)\r\n    setSourceData(null)\r\n    setTargetData(null)\r\n    setDataError(null)\r\n    setSourcePage(1)\r\n    setTargetPage(1)\r\n  }\r\n\r\n  // Separate pagination calculations for source and target\r\n  // Handle different response formats: records array or data array\r\n  const sourceRecords = Array.isArray(sourceData?.records)\r\n    ? sourceData.records\r\n    : Array.isArray(sourceData?.data)\r\n      ? sourceData.data\r\n      : []\r\n  // Extract records from targetData - backend returns {success, records, columns, count}\r\n  const targetRecords = Array.isArray(targetData?.records)\r\n    ? targetData.records\r\n    : Array.isArray(targetData?.data)\r\n      ? targetData.data\r\n      : []\r\n\r\n  // Calculate pagination\r\n  const sourceTotalPages = Math.max(1, Math.ceil(sourceRecords.length / recordsPerPage))\r\n  const targetTotalPages = Math.max(1, Math.ceil(targetRecords.length / recordsPerPage))\r\n  const sourceStartIndex = (sourcePage - 1) * recordsPerPage\r\n  const sourceEndIndex = sourceStartIndex + recordsPerPage\r\n  const targetStartIndex = (targetPage - 1) * recordsPerPage\r\n  const targetEndIndex = targetStartIndex + recordsPerPage\r\n  const paginatedSourceRecords = sourceRecords.slice(sourceStartIndex, sourceEndIndex)\r\n  const paginatedTargetRecords = targetRecords.slice(targetStartIndex, targetEndIndex)\r\n\r\n  // Debug logging - after variables are defined\r\n  if (process.env.NODE_ENV === 'development' && (sourceData || targetData)) {\r\n    console.log('[Table Data] Source data structure:', {\r\n      hasRecords: !!sourceData?.records,\r\n      recordsLength: sourceData?.records?.length,\r\n      hasData: !!sourceData?.data,\r\n      dataLength: sourceData?.data?.length,\r\n      sourceRecordsLength: sourceRecords.length,\r\n      paginatedLength: paginatedSourceRecords.length,\r\n      sourcePage: sourcePage,\r\n      sourceStartIndex: sourceStartIndex,\r\n      sourceEndIndex: sourceEndIndex,\r\n      firstRecord: sourceRecords[0],\r\n      fullSourceData: sourceData\r\n    })\r\n    console.log('[Table Data] Target data structure:', {\r\n      hasRecords: Array.isArray(targetData?.records) && targetData.records.length > 0,\r\n      recordsLength: Array.isArray(targetData?.records) ? targetData.records.length : 0,\r\n      hasData: Array.isArray(targetData?.records) && targetData.records.length > 0,\r\n      dataLength: Array.isArray(targetData?.records) ? targetData.records.length : 0,\r\n      targetRecordsLength: targetRecords.length,\r\n      paginatedLength: paginatedTargetRecords.length,\r\n      targetPage: targetPage,\r\n      targetStartIndex: targetStartIndex,\r\n      targetEndIndex: targetEndIndex,\r\n      firstRecord: targetRecords && targetRecords.length > 0 ? targetRecords[0] : (Array.isArray(targetData?.records) && targetData.records.length > 0 ? targetData.records[0] : null),\r\n      fullTargetData: targetData,\r\n      targetRecords: targetRecords,\r\n      targetDataRecords: targetData?.records,\r\n      targetDataRecordsType: Array.isArray(targetData?.records) ? 'array' : typeof targetData?.records\r\n    })\r\n    console.log('[Pagination] Source:', {\r\n      totalRecords: sourceRecords.length,\r\n      page: sourcePage,\r\n      totalPages: sourceTotalPages,\r\n      startIndex: sourceStartIndex,\r\n      endIndex: sourceEndIndex,\r\n      paginatedCount: paginatedSourceRecords.length,\r\n      firstRecord: paginatedSourceRecords[0]\r\n    })\r\n    console.log('[Pagination] Target:', {\r\n      totalRecords: targetRecords.length,\r\n      page: targetPage,\r\n      totalPages: targetTotalPages,\r\n      startIndex: targetStartIndex,\r\n      endIndex: targetEndIndex,\r\n      paginatedCount: paginatedTargetRecords.length,\r\n      firstRecord: paginatedTargetRecords[0]\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"space-y-4\">\r\n        {/* First Line: Back Button, Title, Connections, Status Badge */}\r\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6 pb-2\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={onBack}\r\n              className=\"bg-white/5 border-border hover:bg-white/10 text-foreground transition-all h-10 px-4\"\r\n            >\r\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n              Back\r\n            </Button>\r\n            <div className=\"space-y-1\">\r\n              <h1 className=\"text-4xl font-black text-foreground tracking-tighter drop-shadow-sm\">{pipeline.name}</h1>\r\n              <div className=\"flex items-center gap-3 text-foreground-muted\">\r\n                <div className=\"flex items-center gap-2 px-2 py-0.5 bg-muted rounded-md border border-border/50\">\r\n                  <Database className=\"w-3.5 h-3.5 text-primary/70\" />\r\n                  <span className=\"text-xs font-bold\">{sourceConn}</span>\r\n                </div>\r\n                <Zap className=\"w-3.5 h-3.5 text-info animate-pulse\" />\r\n                <div className=\"flex items-center gap-2 px-2 py-0.5 bg-muted rounded-md border border-border/50\">\r\n                  <Database className=\"w-3.5 h-3.5 text-info/70\" />\r\n                  <span className=\"text-xs font-bold\">{targetConn}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Deep Status Card - From User Request */}\r\n          <Card className={cn(\r\n            \"relative overflow-hidden border-none shadow-[0_15px_30px_-5px_rgba(0,0,0,0.2)] dark:shadow-[0_15px_40px_-10px_rgba(0,0,0,0.5)]\",\r\n            \"rounded-3xl min-w-[240px] h-24 flex flex-col justify-center px-8 transition-all duration-500 group\",\r\n            (pipeline.status === \"active\" || pipeline.status === \"running\") ? \"bg-emerald-500/5 ring-1 ring-emerald-500/20\" :\r\n              (pipeline.status === \"paused\") ? \"bg-amber-500/5 ring-1 ring-amber-500/20\" :\r\n                \"bg-red-500/5 ring-1 ring-red-500/20\"\r\n          )}>\r\n            {/* Background Heartbeat Animation */}\r\n            <div className=\"absolute inset-0 opacity-[0.15] group-hover:opacity-[0.25] transition-opacity\">\r\n              <svg viewBox=\"0 0 100 40\" className=\"w-full h-full\" preserveAspectRatio=\"none\">\r\n                {/* Static Base Line */}\r\n                <path d=\"M0,20 L15,20 L20,20 L22,10 L28,30 L30,20 L45,20 L50,20 L52,-5 L58,45 L60,20 L80,20 L82,15 L88,25 L90,20 L100,20\"\r\n                  fill=\"none\"\r\n                  stroke={(pipeline.status === \"active\" || pipeline.status === \"running\") ? \"rgb(16, 185, 129)\" :\r\n                    (pipeline.status === \"paused\") ? \"rgb(245, 158, 11)\" : \"rgb(239, 68, 68)\"}\r\n                  strokeWidth=\"0.5\"\r\n                  className=\"opacity-20\"\r\n                />\r\n                {/* Animated Pulse Line */}\r\n                <path d=\"M0,20 L15,20 L20,20 L22,10 L28,30 L30,20 L45,20 L50,20 L52,-5 L58,45 L60,20 L80,20 L82,15 L88,25 L90,20 L100,20\"\r\n                  fill=\"none\"\r\n                  stroke={(pipeline.status === \"active\" || pipeline.status === \"running\") ? \"rgb(16, 185, 129)\" :\r\n                    (pipeline.status === \"paused\") ? \"rgb(245, 158, 11)\" : \"rgb(239, 68, 68)\"}\r\n                  strokeWidth=\"0.8\"\r\n                  className=\"animate-heart-pulse\"\r\n                />\r\n              </svg>\r\n            </div>\r\n\r\n            {/* Very Deep Background Icon */}\r\n            <div className=\"absolute -right-6 -bottom-6 transition-all duration-700 group-hover:scale-110 group-hover:-rotate-12 pointer-events-none\">\r\n              <Activity className={cn(\r\n                \"w-36 h-36 opacity-[0.03] dark:opacity-[0.05] group-hover:opacity-[0.1] transition-opacity\",\r\n                (pipeline.status === \"active\" || pipeline.status === \"running\") ? \"text-emerald-500\" :\r\n                  (pipeline.status === \"paused\") ? \"text-amber-500\" : \"text-red-500\"\r\n              )} />\r\n            </div>\r\n\r\n            <div className=\"relative z-10 flex flex-col\">\r\n              <span className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.25em] mb-1\">STATUS</span>\r\n              <div className=\"flex items-center gap-3\">\r\n                <span className={cn(\r\n                  \"text-3xl font-black tracking-tighter drop-shadow-md transition-transform duration-500 group-hover:scale-105 origin-left\",\r\n                  (pipeline.status === \"active\" || pipeline.status === \"running\") ? \"text-emerald-500\" :\r\n                    (pipeline.status === \"paused\") ? \"text-amber-500\" : \"text-red-500\"\r\n                )}>\r\n                  {(pipeline.status || 'UNKNOWN').toUpperCase()}\r\n                </span>\r\n                <div className={cn(\r\n                  \"w-3 h-3 rounded-full animate-ping shadow-[0_0_10px_currentColor]\",\r\n                  (pipeline.status === \"active\" || pipeline.status === \"running\") ? \"bg-emerald-500 text-emerald-400\" :\r\n                    (pipeline.status === \"paused\") ? \"bg-amber-500 text-amber-400\" : \"bg-red-500 text-red-400\"\r\n                )}></div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Reflection Shine */}\r\n            <div className=\"absolute inset-0 bg-gradient-to-tr from-white/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000\"></div>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Second Line: Replication Mode and Action Buttons */}\r\n        <div className=\"flex items-center justify-between gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Label className=\"text-sm text-foreground-muted whitespace-nowrap\">Replication Mode:</Label>\r\n            <Select\r\n              value={\r\n                pipeline.cdc_enabled\r\n                  ? (pipeline.full_load_type === \"overwrite\" ? \"full_load_cdc\" : \"cdc_only\")\r\n                  : \"full_load\"\r\n              }\r\n              onValueChange={async (value) => {\r\n                // Only allow changes when pipeline is stopped, paused, or draft\r\n                const canChange = pipeline.status === \"stopped\" || pipeline.status === \"paused\" || pipeline.status === \"draft\" || pipeline.status === \"deleted\" || !pipeline.status || (pipeline.status !== \"active\" && pipeline.status !== \"running\")\r\n\r\n                if (!canChange) {\r\n                  showError(\"Please stop the pipeline before changing replication mode. Running pipelines cannot be modified.\", \"Cannot Change Mode\")\r\n                  return\r\n                }\r\n\r\n                if (!pipeline.id) return\r\n\r\n                try {\r\n                  // Determine cdc_enabled and full_load_type based on mode\r\n                  const cdc_enabled = value !== \"full_load\"\r\n                  const full_load_type = value === \"full_load_cdc\" ? \"overwrite\" : value === \"cdc_only\" ? \"append\" : \"overwrite\"\r\n\r\n                  // Build update data, only include fields that are provided\r\n                  const updateData: any = {\r\n                    name: pipeline.name,\r\n                    full_load_type: full_load_type,\r\n                    cdc_enabled: cdc_enabled,\r\n                  }\r\n\r\n                  // Only include optional fields if they have values\r\n                  if (pipeline.description !== undefined && pipeline.description !== null) {\r\n                    updateData.description = pipeline.description\r\n                  }\r\n\r\n                  if (pipeline.source_connection_id !== undefined && pipeline.source_connection_id !== null) {\r\n                    updateData.source_connection_id = String(pipeline.source_connection_id)\r\n                  }\r\n\r\n                  if (pipeline.target_connection_id !== undefined && pipeline.target_connection_id !== null) {\r\n                    updateData.target_connection_id = String(pipeline.target_connection_id)\r\n                  }\r\n\r\n                  if (pipeline.cdc_filters && Array.isArray(pipeline.cdc_filters) && pipeline.cdc_filters.length > 0) {\r\n                    updateData.cdc_filters = pipeline.cdc_filters\r\n                  }\r\n\r\n                  if (pipeline.table_mappings && Array.isArray(pipeline.table_mappings) && pipeline.table_mappings.length > 0) {\r\n                    updateData.table_mappings = pipeline.table_mappings\r\n                  }\r\n\r\n                  const updatedPipeline = await dispatch(updatePipeline({\r\n                    id: pipeline.id,\r\n                    data: updateData\r\n                  })).unwrap()\r\n\r\n                  // Update selected pipeline with the response\r\n                  if (updatedPipeline) {\r\n                    dispatch(setSelectedPipeline(updatedPipeline))\r\n                  }\r\n\r\n                  // Also refresh the pipelines list\r\n                  await dispatch(fetchPipelines())\r\n                } catch (error: any) {\r\n                  console.error(\"Failed to update replication mode:\", error)\r\n                  // Extract detailed error message\r\n                  let errorMessage = \"Failed to update replication mode\"\r\n\r\n                  // Handle Pydantic validation errors (array format)\r\n                  if (error?.response?.data?.detail) {\r\n                    const detail = error.response.data.detail\r\n                    if (Array.isArray(detail)) {\r\n                      // Pydantic validation errors are arrays\r\n                      errorMessage = detail.map((err: any) => {\r\n                        if (typeof err === 'object' && err.loc && err.msg) {\r\n                          return `${err.loc.join('.')}: ${err.msg}`\r\n                        } else if (typeof err === 'object' && err.msg) {\r\n                          return err.msg\r\n                        } else if (typeof err === 'string') {\r\n                          return err\r\n                        } else {\r\n                          return JSON.stringify(err)\r\n                        }\r\n                      }).join(', ')\r\n                    } else if (typeof detail === 'string') {\r\n                      errorMessage = detail\r\n                    } else if (typeof detail === 'object') {\r\n                      errorMessage = JSON.stringify(detail)\r\n                    }\r\n                  } else if (error?.response?.data?.message) {\r\n                    errorMessage = error.response.data.message\r\n                  } else if (error?.message) {\r\n                    errorMessage = error.message\r\n                  } else if (typeof error === 'string') {\r\n                    errorMessage = error\r\n                  } else if (Array.isArray(error)) {\r\n                    // Handle array of errors\r\n                    errorMessage = error.map((e: any) => {\r\n                      if (typeof e === 'object' && e.message) {\r\n                        return e.message\r\n                      } else if (typeof e === 'object') {\r\n                        return JSON.stringify(e)\r\n                      } else {\r\n                        return String(e)\r\n                      }\r\n                    }).join(', ')\r\n                  } else if (typeof error === 'object') {\r\n                    errorMessage = JSON.stringify(error)\r\n                  }\r\n\r\n                  showError(errorMessage, \"Error\")\r\n                }\r\n              }}\r\n              disabled={pipeline.status === \"active\" || pipeline.status === \"running\" || pipelineLoading}\r\n            >\r\n              <SelectTrigger className=\"w-[200px] bg-input border-border text-foreground\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-surface border-border\">\r\n                <SelectItem value=\"full_load\" className=\"text-foreground focus:bg-surface-hover focus:text-foreground\">\r\n                  Full Load Only\r\n                </SelectItem>\r\n                <SelectItem value=\"cdc_only\" className=\"text-foreground focus:bg-surface-hover focus:text-foreground\">\r\n                  CDC Only\r\n                </SelectItem>\r\n                <SelectItem value=\"full_load_cdc\" className=\"text-foreground focus:bg-surface-hover focus:text-foreground\">\r\n                  Full Load + CDC\r\n                </SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n            {(pipeline.status === \"active\" || pipeline.status === \"running\") && (\r\n              <span className=\"text-xs text-foreground-muted italic\">\r\n                (Stop pipeline to change mode)\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {(pipeline.status === \"active\" || pipeline.status === \"running\" || pipeline.status === \"starting\") ? (\r\n              <>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"bg-transparent border-border hover:bg-surface-hover text-foreground hover:text-foreground gap-2\"\r\n                  onClick={async () => {\r\n                    if (pipeline.id) {\r\n                      try {\r\n                        await dispatch(pausePipeline(pipeline.id)).unwrap()\r\n                        await dispatch(fetchPipelines())\r\n                        // Also fetch the specific pipeline to update selectedPipeline\r\n                        if (pipeline.id) {\r\n                          try {\r\n                            const updatedPipeline = await apiClient.getPipeline(pipeline.id)\r\n                            dispatch(setSelectedPipeline(updatedPipeline))\r\n                          } catch (error) {\r\n                            console.error(\"Failed to fetch updated pipeline:\", error)\r\n                          }\r\n                        }\r\n                      } catch (error: any) {\r\n                        console.error(\"Failed to pause pipeline:\", error)\r\n                        const errorMessage = error?.payload ||\r\n                          error?.message ||\r\n                          error?.response?.data?.detail ||\r\n                          \"Failed to pause pipeline\"\r\n                        showError(errorMessage, \"Failed to Pause Pipeline\")\r\n                      }\r\n                    }\r\n                  }}\r\n                  disabled={pipelineLoading}\r\n                >\r\n                  <Pause className=\"w-4 h-4\" />\r\n                  Pause\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"bg-transparent border-border hover:bg-error/10 text-error hover:text-error border-error/30 hover:border-error/50 gap-2\"\r\n                  onClick={() => {\r\n                    if (pipeline.id) {\r\n                      showConfirm(\r\n                        \"Stop Pipeline\",\r\n                        `Are you sure you want to stop \"${pipeline.name}\"? This will pause the pipeline and stop all ongoing replication processes. Any in-progress operations will be halted.`,\r\n                        async () => {\r\n                          try {\r\n                            await dispatch(stopPipeline(pipeline.id)).unwrap()\r\n                            await dispatch(fetchPipelines())\r\n                            // Also fetch the specific pipeline to update selectedPipeline\r\n                            if (pipeline.id) {\r\n                              try {\r\n                                const updatedPipeline = await apiClient.getPipeline(pipeline.id)\r\n                                dispatch(setSelectedPipeline(updatedPipeline))\r\n                              } catch (error) {\r\n                                console.error(\"Failed to fetch updated pipeline:\", error)\r\n                              }\r\n                            }\r\n                            // Clear replication progress when pipeline is stopped\r\n                            setReplicationProgress(null)\r\n                          } catch (error: any) {\r\n                            console.error(\"Failed to stop pipeline:\", error)\r\n                            // Show more detailed error message\r\n                            const errorMessage = error?.message ||\r\n                              error?.payload ||\r\n                              (typeof error === 'string' ? error : 'Failed to stop pipeline')\r\n                            showError(errorMessage, \"Failed to Stop Pipeline\")\r\n                          }\r\n                        },\r\n                        \"danger\",\r\n                        \"Stop Pipeline\",\r\n                        \"Cancel\"\r\n                      )\r\n                    }\r\n                  }}\r\n                  disabled={pipelineLoading}\r\n                >\r\n                  <Square className=\"w-4 h-4\" />\r\n                  Stop\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <Button\r\n                className=\"bg-primary hover:bg-primary/90 text-foreground gap-2\"\r\n                onClick={async () => {\r\n                  if (pipeline.id) {\r\n                    try {\r\n                      // Determine runType based on pipeline configuration\r\n                      let runType = \"full_load\"\r\n                      if (pipeline.cdc_enabled) {\r\n                        // If CDC is enabled, use full_load_cdc to do both\r\n                        runType = \"full_load_cdc\"\r\n                      }\r\n                      // Reset progress before starting\r\n                      setReplicationProgress(null)\r\n\r\n                      await dispatch(triggerPipeline({ id: pipeline.id, runType })).unwrap()\r\n\r\n                      // Refresh pipelines to get updated status\r\n                      await dispatch(fetchPipelines())\r\n\r\n                      // Also fetch the specific pipeline to update selectedPipeline\r\n                      if (pipeline.id) {\r\n                        try {\r\n                          const updatedPipeline = await apiClient.getPipeline(pipeline.id)\r\n                          dispatch(setSelectedPipeline(updatedPipeline))\r\n                        } catch (error) {\r\n                          console.error(\"Failed to fetch updated pipeline:\", error)\r\n                        }\r\n                      }\r\n\r\n                      // Progress polling is handled by the useEffect hook\r\n                      // Trigger an immediate fetch after pipeline starts\r\n                      if (fetchProgressRef.current) {\r\n                        // Small delay to let backend update pipeline status\r\n                        setTimeout(() => {\r\n                          if (fetchProgressRef.current) {\r\n                            fetchProgressRef.current().catch((err) => {\r\n                              console.debug(\"Initial progress fetch after trigger:\", err)\r\n                            })\r\n                          }\r\n                        }, 1000)\r\n                      }\r\n                    } catch (error: any) {\r\n                      console.error(\"Failed to trigger pipeline:\", error)\r\n                      // Extract detailed error message\r\n                      let errorMessage = \"Failed to trigger pipeline\"\r\n                      if (error?.message) {\r\n                        errorMessage = error.message\r\n                      } else if (error?.response?.data?.detail) {\r\n                        errorMessage = error.response.data.detail\r\n                      } else if (error?.response?.data?.message) {\r\n                        errorMessage = error.response.data.message\r\n                      } else if (typeof error === 'string') {\r\n                        errorMessage = error\r\n                      }\r\n                      // Extract actual error from Debezium connector error\r\n                      let displayError = errorMessage\r\n\r\n                      // Remove common wrapper messages\r\n                      if (displayError.includes(\"Failed to create Debezium connector\")) {\r\n                        // Extract the actual Kafka Connect error after the colon\r\n                        const match = displayError.match(/Failed to create Debezium connector[^:]*:\\s*(.+)/)\r\n                        if (match && match[1]) {\r\n                          displayError = match[1].trim()\r\n                        }\r\n                      }\r\n\r\n                      // Remove HTTP error wrapper if present\r\n                      if (displayError.includes(\"400 Client Error\") || displayError.includes(\"Bad Request\")) {\r\n                        // Try to extract the actual error message\r\n                        const parts = displayError.split(\"for url:\")\r\n                        if (parts.length > 1) {\r\n                          // The actual error should be before \"for url:\" or in the response data\r\n                          displayError = parts[0].replace(\"400 Client Error:\", \"\").replace(\"Bad Request\", \"\").trim()\r\n                        }\r\n                        // Also check response data\r\n                        if (error?.response?.data?.detail) {\r\n                          displayError = error.response.data.detail\r\n                        }\r\n                      }\r\n\r\n                      // If still generic, try to get from response\r\n                      if (displayError.includes(\"400\") && error?.response?.data?.detail) {\r\n                        displayError = error.response.data.detail\r\n                      }\r\n\r\n                      showError(displayError, \"Failed to Start Pipeline\")\r\n                    }\r\n                  }\r\n                }}\r\n                disabled={pipelineLoading}\r\n              >\r\n                <Play className=\"w-4 h-4\" />\r\n                Run Pipeline\r\n              </Button>\r\n            )}\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"bg-transparent border-border hover:bg-surface-hover text-foreground hover:text-foreground gap-2\"\r\n              onClick={() => router.push(`/pipelines/${pipeline.id}/monitor`)}\r\n            >\r\n              <Activity className=\"w-4 h-4\" />\r\n              Monitor\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"bg-transparent border-border hover:bg-surface-hover text-foreground hover:text-foreground gap-2\"\r\n              onClick={async () => {\r\n                if (!pipeline?.id) return\r\n                try {\r\n                  const blob = await apiClient.exportPipelineDag(pipeline.id)\r\n                  const url = window.URL.createObjectURL(blob)\r\n                  const a = document.createElement('a')\r\n                  a.href = url\r\n                  a.download = `pipeline_${pipeline.id}_dag.py`\r\n                  document.body.appendChild(a)\r\n                  a.click()\r\n                  window.URL.revokeObjectURL(url)\r\n                  document.body.removeChild(a)\r\n                } catch (error: any) {\r\n                  console.error(\"Failed to export DAG:\", error)\r\n                  showError(error?.message || \"Failed to export DAG file\", \"Export Failed\")\r\n                }\r\n              }}\r\n              disabled={pipelineLoading || !pipeline?.id}\r\n            >\r\n              <Download className=\"w-4 h-4\" />\r\n              Export DAG\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Offset/LSN/SCN Information */}\r\n      {(() => {\r\n        // Extract SCN/LSN from various possible locations in the pipeline data\r\n        let currentLsn: string | undefined = pipeline?.current_lsn\r\n        let currentOffset: string | undefined = pipeline?.current_offset\r\n        let currentScn: string | undefined = pipeline?.current_scn\r\n\r\n        // Check full_load.lsn (format: \"SCN:17026643\" or \"LSN:...\")\r\n        if ((pipeline as any)?.full_load?.lsn) {\r\n          const fullLoadLsn = (pipeline as any).full_load.lsn\r\n          if (typeof fullLoadLsn === 'string') {\r\n            // Parse formats like \"SCN:17026643\" or \"LSN:...\"\r\n            if (fullLoadLsn.startsWith('SCN:')) {\r\n              currentScn = fullLoadLsn.substring(4).trim() // Extract \"17026643\"\r\n            } else if (fullLoadLsn.startsWith('LSN:')) {\r\n              currentLsn = fullLoadLsn.substring(4).trim() // Extract LSN value\r\n            } else {\r\n              // If no prefix, check if it looks like SCN (numeric) or LSN (hex)\r\n              if (/^\\d+$/.test(fullLoadLsn)) {\r\n                currentScn = fullLoadLsn\r\n              } else {\r\n                currentLsn = fullLoadLsn\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        // Check debezium_connector for offset information\r\n        if ((pipeline as any)?.debezium_connector?.offset) {\r\n          const offset = (pipeline as any).debezium_connector.offset\r\n          if (typeof offset === 'string') {\r\n            currentOffset = offset\r\n          } else if (typeof offset === 'object') {\r\n            // Debezium offset might be an object with scn, lsn, etc.\r\n            if (offset.scn) {\r\n              currentScn = String(offset.scn)\r\n            }\r\n            if (offset.lsn) {\r\n              currentLsn = String(offset.lsn)\r\n            }\r\n            if (offset.binlog_file && offset.binlog_position) {\r\n              currentOffset = `${offset.binlog_file}:${offset.binlog_position}`\r\n            }\r\n          }\r\n        }\r\n\r\n        // Only show if we have at least one value\r\n        if (!currentLsn && !currentOffset && !currentScn) {\r\n          return null\r\n        }\r\n\r\n        return (\r\n          <Card className=\"bg-surface border-border p-6\">\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-4\">Replication Offset</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              {currentLsn && (\r\n                <div className=\"space-y-2\">\r\n                  <Label className=\"text-sm text-foreground-muted\">Current LSN</Label>\r\n                  <div className=\"p-3 bg-surface-hover rounded-lg border border-border\">\r\n                    <code className=\"text-sm text-foreground font-mono break-all\">{currentLsn}</code>\r\n                  </div>\r\n                  {pipeline?.last_offset_updated && (\r\n                    <p className=\"text-xs text-foreground-muted\">\r\n                      Updated: {new Date(pipeline.last_offset_updated).toLocaleString()}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n              {currentOffset && (\r\n                <div className=\"space-y-2\">\r\n                  <Label className=\"text-sm text-foreground-muted\">Binlog Position</Label>\r\n                  <div className=\"p-3 bg-surface-hover rounded-lg border border-border\">\r\n                    <code className=\"text-sm text-foreground font-mono break-all\">{currentOffset}</code>\r\n                  </div>\r\n                  {pipeline?.last_offset_updated && (\r\n                    <p className=\"text-xs text-foreground-muted\">\r\n                      Updated: {new Date(pipeline.last_offset_updated).toLocaleString()}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n              {currentScn && (\r\n                <div className=\"space-y-2\">\r\n                  <Label className=\"text-sm text-foreground-muted\">Current SCN</Label>\r\n                  <div className=\"p-3 bg-surface-hover rounded-lg border border-border\">\r\n                    <code className=\"text-sm text-foreground font-mono break-all\">{currentScn}</code>\r\n                  </div>\r\n                  {pipeline?.last_offset_updated && (\r\n                    <p className=\"text-xs text-foreground-muted\">\r\n                      Updated: {new Date(pipeline.last_offset_updated).toLocaleString()}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </Card>\r\n        )\r\n      })()}\r\n\r\n      {/* Replication Progress - Always Show */}\r\n      <Card className=\"bg-surface border-border p-6\">\r\n        <h3 className=\"text-lg font-semibold text-foreground mb-6\">Replication Progress</h3>\r\n        <div className=\"space-y-6\">\r\n          {/* Full Load Progress with Animation */}\r\n          {replicationProgress?.full_load || pipeline?.status === \"active\" || pipeline?.status === \"running\" || pipeline?.status === \"starting\" ? (\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-sm font-medium text-foreground\">Full Load</span>\r\n                  {(replicationProgress?.full_load?.status === \"running\" || pipeline?.status === \"starting\" || pipeline?.status === \"running\") && (\r\n                    <Loader2 className=\"w-4 h-4 animate-spin text-primary\" />\r\n                  )}\r\n                  {replicationProgress?.full_load?.status === \"completed\" && (\r\n                    <CheckCircle className=\"w-4 h-4 text-success\" />\r\n                  )}\r\n                  {replicationProgress?.full_load?.status === \"failed\" && (\r\n                    <AlertCircle className=\"w-4 h-4 text-error\" />\r\n                  )}\r\n                </div>\r\n                <span className=\"text-2xl font-extrabold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent\">\r\n                  {replicationProgress?.full_load ? (\r\n                    replicationProgress.full_load.status === \"completed\" || Math.min(100, Math.max(0, replicationProgress.full_load.progress_percent || 0)) >= 100\r\n                      ? '100%'\r\n                      : `${Math.min(100, Math.max(0, replicationProgress.full_load.progress_percent || 0)).toFixed(1)}%`\r\n                  ) : (\r\n                    pipeline?.status === \"starting\" || pipeline?.status === \"running\" ? \"0%\" : \"N/A\"\r\n                  )}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Enhanced Animated Transfer Visualization */}\r\n              <div className=\"relative flex items-center justify-between py-6\">\r\n                {/* Source Database - Enhanced */}\r\n                <div className=\"flex flex-col items-center gap-3 z-10\">\r\n                  <div className=\"relative group\">\r\n                    <div className=\"p-4 bg-gradient-to-br from-blue-500/20 to-blue-600/10 rounded-2xl border-2 border-blue-500/30 shadow-lg transition-all duration-300 group-hover:shadow-2xl group-hover:scale-105\">\r\n                      <Database className=\"w-14 h-14 text-blue-400\" />\r\n                    </div>\r\n                    {(replicationProgress?.full_load?.status === \"running\" || pipeline?.status === \"starting\" || pipeline?.status === \"running\") && (\r\n                      <>\r\n                        <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-400 rounded-full animate-ping\" />\r\n                        <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-400 rounded-full shadow-lg shadow-blue-400/50\" />\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"text-xs font-bold text-foreground text-center max-w-[120px] truncate px-3 py-1.5 bg-surface-hover rounded-lg border border-border\">\r\n                    {sourceConn}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Transfer Animation Path - Enhanced */}\r\n                <div className=\"flex-1 mx-6 relative\">\r\n                  {/* Progress Bar with Gradient */}\r\n                  <div className=\"relative h-2.5 bg-gradient-to-r from-border via-border to-border rounded-full overflow-hidden shadow-inner\">\r\n                    <div\r\n                      className={`h-full transition-all duration-500 ease-out rounded-full relative ${(replicationProgress?.full_load?.status === \"completed\" || ((replicationProgress?.full_load?.progress_percent ?? 0) >= 100 && replicationProgress?.full_load?.status !== \"failed\"))\r\n                        ? 'bg-gradient-to-r from-green-400 via-emerald-500 to-green-400'\r\n                        : 'bg-gradient-to-r from-cyan-400 via-blue-500 to-cyan-400'\r\n                        }`}\r\n                      style={{ width: `${Math.min(100, Math.max(0, replicationProgress?.full_load?.progress_percent || 0))}%` }}\r\n                    >\r\n                      {(replicationProgress?.full_load?.status === \"running\" || pipeline?.status === \"starting\" || pipeline?.status === \"running\") && !((replicationProgress?.full_load?.progress_percent ?? 0) >= 100) && (\r\n                        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-[shimmer_1.5s_infinite]\"\r\n                          style={{ backgroundSize: '200% 100%' }}\r\n                        />\r\n                      )}\r\n                      {(replicationProgress?.full_load?.status === \"completed\" || ((replicationProgress?.full_load?.progress_percent ?? 0) >= 100 && replicationProgress?.full_load?.status !== \"failed\")) && (\r\n                        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-[shimmer_2s_infinite]\"\r\n                          style={{ backgroundSize: '200% 100%' }}\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Animated File Icons Transferring */}\r\n                  {(replicationProgress?.full_load?.status === \"running\" || pipeline?.status === \"starting\" || pipeline?.status === \"running\") && !((replicationProgress?.full_load?.progress_percent ?? 0) >= 100) && (\r\n                    <div className=\"absolute top-1/2 left-0 right-0 -translate-y-1/2 pointer-events-none\">\r\n                      {[...Array(5)].map((_, i) => (\r\n                        <div\r\n                          key={i}\r\n                          className=\"absolute\"\r\n                          style={{\r\n                            animation: `fileTransfer 3s infinite ease-in-out`,\r\n                            animationDelay: `${i * 0.6}s`,\r\n                            left: '0%'\r\n                          }}\r\n                        >\r\n                          <div className=\"relative\">\r\n                            <div className=\"w-7 h-7 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-lg shadow-xl flex items-center justify-center\">\r\n                              <svg className=\"w-4 h-4 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                <path d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z\" />\r\n                              </svg>\r\n                            </div>\r\n                            <div className=\"absolute inset-0 bg-cyan-400 rounded-lg blur-md opacity-60 animate-pulse\" />\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  {/* Success animation when completed */}\r\n                  {(replicationProgress?.full_load?.status === \"completed\" || ((replicationProgress?.full_load?.progress_percent ?? 0) >= 100 && replicationProgress?.full_load?.status !== \"failed\")) && (\r\n                    <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none\">\r\n                      <div className=\"relative\">\r\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full shadow-xl flex items-center justify-center animate-bounce\">\r\n                          <CheckCircle className=\"w-8 h-8 text-white\" />\r\n                        </div>\r\n                        <div className=\"absolute inset-0 bg-green-400 rounded-full blur-xl opacity-60 animate-pulse\" />\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Speed Indicator */}\r\n                  {(replicationProgress?.full_load?.status === \"running\" || pipeline?.status === \"starting\" || pipeline?.status === \"running\") && !((replicationProgress?.full_load?.progress_percent ?? 0) >= 100) && (\r\n                    <div className=\"absolute -bottom-7 left-1/2 -translate-x-1/2 text-xs font-bold text-cyan-400 flex items-center gap-1.5 animate-pulse px-3 py-1 bg-cyan-500/10 rounded-full border border-cyan-500/30\">\r\n                      <Activity className=\"w-3.5 h-3.5\" />\r\n                      <span>Transferring Data...</span>\r\n                    </div>\r\n                  )}\r\n                  {(replicationProgress?.full_load?.status === \"completed\" || ((replicationProgress?.full_load?.progress_percent ?? 0) >= 100 && replicationProgress?.full_load?.status !== \"failed\")) && (\r\n                    <div className=\"absolute -bottom-7 left-1/2 -translate-x-1/2 text-xs font-bold text-green-400 flex items-center gap-1.5 animate-pulse px-3 py-1 bg-green-500/10 rounded-full border border-green-500/30\">\r\n                      <CheckCircle className=\"w-3.5 h-3.5\" />\r\n                      <span>Transfer Complete - 100%</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Target Database - Enhanced */}\r\n                <div className=\"flex flex-col items-center gap-3 z-10\">\r\n                  <div className=\"relative group\">\r\n                    <div className={`p-4 rounded-2xl border-2 shadow-lg transition-all duration-500 group-hover:scale-105 ${(replicationProgress?.full_load?.status === \"completed\" || ((replicationProgress?.full_load?.progress_percent ?? 0) >= 100 && replicationProgress?.full_load?.status !== \"failed\"))\r\n                      ? 'bg-gradient-to-br from-green-500/20 to-emerald-600/10 border-green-500/30 group-hover:shadow-2xl group-hover:shadow-green-500/20'\r\n                      : (replicationProgress?.full_load?.status === \"running\" || pipeline?.status === \"starting\" || pipeline?.status === \"running\")\r\n                        ? 'bg-gradient-to-br from-blue-500/20 to-cyan-600/10 border-blue-500/30 group-hover:shadow-2xl group-hover:shadow-blue-500/20'\r\n                        : 'bg-gradient-to-br from-gray-500/20 to-gray-600/10 border-gray-500/30'\r\n                      }`}>\r\n                      <Database className={`w-14 h-14 transition-colors duration-500 ${(replicationProgress?.full_load?.status === \"completed\" || ((replicationProgress?.full_load?.progress_percent ?? 0) >= 100 && replicationProgress?.full_load?.status !== \"failed\"))\r\n                        ? 'text-green-400'\r\n                        : (replicationProgress?.full_load?.status === \"running\" || pipeline?.status === \"starting\" || pipeline?.status === \"running\")\r\n                          ? 'text-blue-400 animate-pulse'\r\n                          : 'text-gray-400'\r\n                        }`} />\r\n                    </div>\r\n                    {(replicationProgress?.full_load?.status === \"completed\" || ((replicationProgress?.full_load?.progress_percent ?? 0) >= 100 && replicationProgress?.full_load?.status !== \"failed\")) && (\r\n                      <>\r\n                        <div className=\"absolute -top-2 -right-2 w-9 h-9 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/50 animate-bounce\">\r\n                          <CheckCircle className=\"w-6 h-6 text-white\" />\r\n                        </div>\r\n                        <div className=\"absolute inset-0 bg-green-400 rounded-2xl blur-xl opacity-40 animate-pulse\" />\r\n                      </>\r\n                    )}\r\n                    {(replicationProgress?.full_load?.status === \"running\" || pipeline?.status === \"starting\" || pipeline?.status === \"running\") && !((replicationProgress?.full_load?.progress_percent ?? 0) >= 100) && (\r\n                      <>\r\n                        <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-400 rounded-full animate-ping\" />\r\n                        <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-400 rounded-full shadow-lg shadow-blue-400/50\" />\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"text-xs font-bold text-foreground text-center max-w-[120px] truncate px-3 py-1.5 bg-surface-hover rounded-lg border border-border\">\r\n                    {targetConn}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Add CSS Keyframes for File Transfer Animation */}\r\n              <style jsx>{`\r\n                @keyframes fileTransfer {\r\n                  0% {\r\n                    left: 0%;\r\n                    opacity: 0;\r\n                    transform: translateY(0) scale(0.5) rotate(0deg);\r\n                  }\r\n                  10% {\r\n                    opacity: 1;\r\n                    transform: translateY(0) scale(1) rotate(0deg);\r\n                  }\r\n                  50% {\r\n                    transform: translateY(-10px) scale(1.15) rotate(5deg);\r\n                  }\r\n                  90% {\r\n                    opacity: 1;\r\n                    transform: translateY(0) scale(1) rotate(0deg);\r\n                  }\r\n                  100% {\r\n                    left: 100%;\r\n                    opacity: 0;\r\n                    transform: translateY(0) scale(0.5) rotate(0deg);\r\n                  }\r\n                }\r\n                @keyframes shimmer {\r\n                  0% {\r\n                    background-position: -200% 0;\r\n                  }\r\n                  100% {\r\n                    background-position: 200% 0;\r\n                  }\r\n                }\r\n              `}</style>\r\n\r\n              {/* Progress Details */}\r\n              {replicationProgress?.full_load ? (\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center justify-between text-xs text-foreground-muted\">\r\n                    <span>\r\n                      {replicationProgress.full_load.records_loaded?.toLocaleString() || 0} / {replicationProgress.full_load.total_records?.toLocaleString() || 0} records\r\n                    </span>\r\n                    {replicationProgress.full_load.current_table && (\r\n                      <span className=\"text-primary\">Processing: {replicationProgress.full_load.current_table}</span>\r\n                    )}\r\n                  </div>\r\n                  {replicationProgress.full_load.status === \"completed\" && (\r\n                    <div className=\"flex items-center gap-2 text-sm text-success bg-success/10 p-2 rounded\">\r\n                      <CheckCircle className=\"w-4 h-4\" />\r\n                      <span>Full load completed successfully - {Math.min(100, Math.max(0, replicationProgress.full_load.progress_percent || 100)).toFixed(1)}%</span>\r\n                    </div>\r\n                  )}\r\n                  {/* Also show success message if progress is 100% even if status is not \"completed\" */}\r\n                  {replicationProgress.full_load.progress_percent >= 100 && replicationProgress.full_load.status !== \"completed\" && (\r\n                    <div className=\"flex items-center gap-2 text-sm text-success bg-success/10 p-2 rounded\">\r\n                      <CheckCircle className=\"w-4 h-4\" />\r\n                      <span>Full load completed successfully - 100%</span>\r\n                    </div>\r\n                  )}\r\n                  {replicationProgress.full_load.status === \"failed\" && replicationProgress.full_load.error_message && (\r\n                    <div className=\"flex items-start gap-2 text-sm text-error bg-error/10 p-2 rounded\">\r\n                      <AlertCircle className=\"w-4 h-4 mt-0.5\" />\r\n                      <span>{replicationProgress.full_load.error_message}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ) : (pipeline?.status === \"starting\" || pipeline?.status === \"running\") ? (\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center justify-between text-xs text-foreground-muted\">\r\n                    <span>Initializing pipeline...</span>\r\n                    <Loader2 className=\"w-4 h-4 animate-spin text-primary\" />\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-foreground-muted\">\r\n              <Database className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\r\n              <p className=\"text-sm\">Full load not started yet</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* CDC Progress - Enhanced - Always show when CDC is enabled */}\r\n          {(pipeline.cdc_enabled || replicationProgress?.cdc) ? (\r\n            <div className=\"space-y-4 border-t border-border/50 pt-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <span className=\"text-base font-bold text-foreground\">CDC Monitoring</span>\r\n                  {(replicationProgress?.cdc?.status === \"watching\" ||\r\n                    replicationProgress?.cdc?.status === \"active\" ||\r\n                    (pipeline.cdc_enabled && !replicationProgress?.cdc) ||\r\n                    (pipeline.status === \"active\" || pipeline.status === \"running\")) && (\r\n                      <div className=\"relative flex items-center justify-center\">\r\n                        {/* Animated Eye/Watching Indicator */}\r\n                        <div className=\"relative\">\r\n                          <Eye className=\"w-6 h-6 text-cyan-400 animate-pulse\" />\r\n                          {/* Pulsing rings around the eye */}\r\n                          <div className=\"absolute inset-0 -m-2\">\r\n                            <div className=\"w-10 h-10 rounded-full border-2 border-cyan-400/30 animate-ping\" />\r\n                          </div>\r\n                          <div className=\"absolute inset-0 -m-2\">\r\n                            <div className=\"w-10 h-10 rounded-full border-2 border-cyan-400/20 animate-ping\" style={{ animationDelay: '0.5s' }} />\r\n                          </div>\r\n                          {/* Scanning beam effect */}\r\n                          <div className=\"absolute inset-0 -m-1\">\r\n                            <div className=\"w-8 h-8 rounded-full border border-cyan-400/40\" style={{\r\n                              clipPath: 'polygon(50% 50%, 50% 0%, 100% 0%, 100% 100%, 50% 100%)',\r\n                              animation: 'radar-scan 3s linear infinite',\r\n                              transformOrigin: '50% 50%'\r\n                            }} />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  {replicationProgress?.cdc?.status === \"stopped\" && (\r\n                    <Square className=\"w-5 h-5 text-foreground-muted\" />\r\n                  )}\r\n                  {replicationProgress?.cdc?.status === \"error\" && (\r\n                    <AlertCircle className=\"w-5 h-5 text-red-400\" />\r\n                  )}\r\n                </div>\r\n                <span className=\"text-sm font-bold text-green-400 capitalize px-3 py-1 bg-green-500/10 rounded-full border border-green-500/30 flex items-center gap-2\">\r\n                  {(replicationProgress?.cdc?.status === \"active\" ||\r\n                    replicationProgress?.cdc?.status === \"watching\" ||\r\n                    (pipeline.cdc_enabled && !replicationProgress?.cdc) ||\r\n                    (pipeline.status === \"active\" || pipeline.status === \"running\")) && (\r\n                      <div className=\"relative\">\r\n                        <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\" />\r\n                        <div className=\"absolute inset-0 w-2 h-2 bg-green-400/50 rounded-full animate-ping\" />\r\n                      </div>\r\n                    )}\r\n                  {replicationProgress?.cdc?.status === \"active\" || replicationProgress?.cdc?.status === \"watching\" ||\r\n                    (pipeline.cdc_enabled && !replicationProgress?.cdc) ||\r\n                    (pipeline.status === \"active\" || pipeline.status === \"running\")\r\n                    ? \"Watching CDC Events\"\r\n                    : replicationProgress?.cdc?.status || \"Ready\"}\r\n                </span>\r\n              </div>\r\n\r\n              {/* CDC Status Bar - Enhanced with continuous watching indicator */}\r\n              {(replicationProgress?.cdc?.status === \"active\" ||\r\n                replicationProgress?.cdc?.status === \"watching\" ||\r\n                (pipeline.cdc_enabled && !replicationProgress?.cdc) ||\r\n                (pipeline.status === \"active\" || pipeline.status === \"running\")) && (\r\n                  <div className=\"relative h-4 bg-gradient-to-r from-cyan-500/10 via-cyan-400/20 to-cyan-500/10 rounded-full overflow-hidden border border-cyan-500/30\">\r\n                    {/* Animated shimmer effect */}\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-cyan-400/40 to-transparent animate-[shimmer_2s_infinite]\"\r\n                      style={{ backgroundSize: '200% 100%' }} />\r\n                    {/* Pulsing dots to show continuous activity */}\r\n                    <div className=\"absolute inset-0 flex items-center justify-center gap-1\">\r\n                      {[...Array(3)].map((_, i) => (\r\n                        <div\r\n                          key={i}\r\n                          className=\"w-1.5 h-1.5 bg-cyan-400 rounded-full animate-pulse\"\r\n                          style={{ animationDelay: `${i * 0.3}s` }}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                      <span className=\"text-xs font-bold text-cyan-400 drop-shadow-lg flex items-center gap-2\">\r\n                        <div className=\"relative\">\r\n                          <div className=\"w-1.5 h-1.5 bg-cyan-400 rounded-full animate-pulse\" />\r\n                          <div className=\"absolute inset-0 w-1.5 h-1.5 bg-cyan-400/50 rounded-full animate-ping\" />\r\n                        </div>\r\n                        Real-time CDC Active - Always Watching\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n              <div className=\"grid grid-cols-3 gap-4\">\r\n                <div className=\"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border border-blue-500/20 p-4 rounded-lg shadow-md hover:shadow-lg transition-all relative group overflow-hidden\">\r\n                  {/* Animated background indicator when capturing */}\r\n                  {(replicationProgress?.cdc?.status === \"active\" || replicationProgress?.cdc?.status === \"watching\") && (\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-blue-400/10 to-transparent animate-[shimmer_2s_infinite]\"\r\n                      style={{ backgroundSize: '200% 100%' }} />\r\n                  )}\r\n\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity h-6 w-6 p-0 z-10\"\r\n                    onClick={async () => {\r\n                      if (pipeline.id) {\r\n                        try {\r\n                          await apiClient.syncPipelineStats(pipeline.id)\r\n                          // Refresh progress after sync\r\n                          const progress = await apiClient.getPipelineProgress(pipeline.id)\r\n                          setReplicationProgress(progress)\r\n                        } catch (error) {\r\n                          console.error(\"Failed to sync stats:\", error)\r\n                        }\r\n                      }\r\n                    }}\r\n                    title=\"Sync stats from database - Counts all events (captured, applied, and failed)\"\r\n                  >\r\n                    <RefreshCw className=\"w-3 h-3\" />\r\n                  </Button>\r\n\r\n                  <div className=\"flex items-center gap-2 mb-2 relative z-10\">\r\n                    <span className=\"text-foreground-muted text-xs font-semibold uppercase tracking-wide\" title=\"Total events captured from PostgreSQL (includes applied and failed)\">\r\n                      Captured\r\n                    </span>\r\n                    {(replicationProgress?.cdc?.status === \"active\" || replicationProgress?.cdc?.status === \"watching\") && (\r\n                      <div className=\"relative flex items-center justify-center\">\r\n                        <div className=\"w-2 h-2 bg-cyan-400 rounded-full animate-pulse\" />\r\n                        <div className=\"absolute inset-0 w-2 h-2 bg-cyan-400/50 rounded-full animate-ping\" />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"flex items-baseline gap-2 relative z-10\">\r\n                    <span className=\"text-foreground font-extrabold text-2xl bg-gradient-to-r from-blue-400 to-blue-600 bg-clip-text text-transparent\">\r\n                      {replicationProgress?.cdc?.events_captured || 0}\r\n                    </span>\r\n                    {(replicationProgress?.cdc?.status === \"active\" || replicationProgress?.cdc?.status === \"watching\") && (\r\n                      <span className=\"text-xs text-cyan-400 font-medium animate-pulse\">Live</span>\r\n                    )}\r\n                  </div>\r\n\r\n                  <p className=\"text-xs text-foreground-muted mt-1 relative z-10\">All events from source</p>\r\n                  <Database className=\"absolute -right-4 -bottom-4 w-20 h-20 text-blue-500/10 group-hover:text-blue-500/15 transition-colors transform rotate-12\" />\r\n                </div>\r\n\r\n                <div className=\"bg-gradient-to-br from-green-500/10 to-green-600/5 border border-green-500/20 p-4 rounded-lg shadow-md hover:shadow-lg transition-all relative group overflow-hidden\">\r\n                  <span className=\"text-foreground-muted block mb-2 text-xs font-semibold uppercase tracking-wide relative z-10\" title=\"Events successfully applied to target database\">\r\n                    Applied\r\n                  </span>\r\n                  <span className=\"text-green-400 font-extrabold text-2xl relative z-10\">\r\n                    {replicationProgress?.cdc?.events_applied || 0}\r\n                  </span>\r\n                  <p className=\"text-xs text-foreground-muted mt-1 relative z-10\">Successfully replicated</p>\r\n                  <CheckCircle className=\"absolute -right-4 -bottom-4 w-20 h-20 text-green-500/10 group-hover:text-green-500/15 transition-colors transform rotate-12\" />\r\n                </div>\r\n\r\n                <div className={`bg-gradient-to-br from-red-500/10 to-red-600/5 border border-red-500/20 p-4 rounded-lg shadow-md hover:shadow-lg transition-all relative group overflow-hidden ${(replicationProgress?.cdc?.events_failed || 0) > 0 ? 'border-red-500/40' : ''\r\n                  }`}>\r\n                  {/* Pulsing indicator when there are failures */}\r\n                  {(replicationProgress?.cdc?.events_failed || 0) > 0 && (\r\n                    <>\r\n                      <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-red-500/10 to-transparent animate-[shimmer_2s_infinite]\"\r\n                        style={{ backgroundSize: '200% 100%' }} />\r\n                      <div className=\"absolute top-2 right-2 z-20\">\r\n                        <div className=\"relative\">\r\n                          <AlertCircle className=\"w-4 h-4 text-red-400 animate-pulse\" />\r\n                          <div className=\"absolute inset-0 w-4 h-4 text-red-400/50 animate-ping\" />\r\n                        </div>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n\r\n                  <div className=\"flex items-center gap-2 mb-2 relative z-10\">\r\n                    <span className=\"text-foreground-muted text-xs font-semibold uppercase tracking-wide\" title=\"Events that failed to apply to target database (but were still captured)\">\r\n                      Failed\r\n                    </span>\r\n                    {(replicationProgress?.cdc?.events_failed || 0) > 0 && (\r\n                      <div className=\"relative flex items-center justify-center\">\r\n                        <div className=\"w-2 h-2 bg-red-400 rounded-full animate-pulse\" />\r\n                        <div className=\"absolute inset-0 w-2 h-2 bg-red-400/50 rounded-full animate-ping\" />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <span className=\"text-red-400 font-extrabold text-2xl relative z-10\">\r\n                    {replicationProgress?.cdc?.events_failed || 0}\r\n                  </span>\r\n                  <p className=\"text-xs text-foreground-muted mt-1 relative z-10\">\r\n                    {(replicationProgress?.cdc?.events_failed || 0) > 0\r\n                      ? 'Needs attention'\r\n                      : 'All events applied'}\r\n                  </p>\r\n                  <AlertCircle className=\"absolute -right-4 -bottom-4 w-20 h-20 text-red-500/10 group-hover:text-red-500/15 transition-colors transform rotate-12\" />\r\n                </div>\r\n              </div>\r\n              {replicationProgress?.cdc?.last_event_time && (\r\n                <div className=\"text-xs font-medium text-foreground-muted bg-surface-hover px-3 py-2 rounded-md\">\r\n                  Last event: {new Date(replicationProgress.cdc.last_event_time).toLocaleString()}\r\n                </div>\r\n              )}\r\n              {replicationProgress?.cdc?.status === \"error\" && replicationProgress.cdc.error_message && (\r\n                <div className=\"flex items-start gap-2 text-sm text-red-400 bg-red-500/10 p-3 rounded-lg border border-red-500/30\">\r\n                  <AlertCircle className=\"w-5 h-5 mt-0.5 flex-shrink-0\" />\r\n                  <span>{replicationProgress.cdc.error_message}</span>\r\n                </div>\r\n              )}\r\n\r\n              {/* Recent Failed Events Section */}\r\n              {(() => {\r\n                if (!pipeline?.id) return null\r\n                const pipelineIdStr = String(pipeline.id)\r\n                const failedEvents = events\r\n                  .filter(e => {\r\n                    const eventPipelineId = String(e.pipeline_id || '')\r\n                    return eventPipelineId === pipelineIdStr &&\r\n                      (e.status === 'failed' || e.status === 'error') &&\r\n                      e.error_message\r\n                  })\r\n                  .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())\r\n                  .slice(0, 5) // Show top 5 recent failures\r\n\r\n                if (failedEvents.length === 0) return null\r\n\r\n                return (\r\n                  <div className=\"mt-4 space-y-2 border-t border-red-500/20 pt-4\">\r\n                    <div className=\"flex items-center gap-2 mb-3\">\r\n                      <AlertCircle className=\"w-5 h-5 text-red-400\" />\r\n                      <h4 className=\"text-sm font-bold text-red-400\">Recent Failures ({failedEvents.length})</h4>\r\n                    </div>\r\n                    <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                      {failedEvents.map((event) => (\r\n                        <div\r\n                          key={event.id}\r\n                          className=\"bg-red-500/5 border border-red-500/20 rounded-lg p-3 hover:bg-red-500/10 transition-colors group\"\r\n                        >\r\n                          <div className=\"flex items-start justify-between gap-2 mb-1\">\r\n                            <div className=\"flex items-center gap-2 flex-1 min-w-0\">\r\n                              <Badge className=\"bg-red-500/20 text-red-400 border-red-500/30 text-xs\">\r\n                                {event.event_type?.toUpperCase() || 'UNKNOWN'}\r\n                              </Badge>\r\n                              <span className=\"text-xs font-semibold text-foreground truncate\">\r\n                                {event.table_name || 'Unknown Table'}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <span className=\"text-xs text-foreground-muted whitespace-nowrap\">\r\n                                {new Date(event.created_at).toLocaleTimeString()}\r\n                              </span>\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                className=\"h-6 px-2 text-red-400 hover:text-red-300 hover:bg-red-500/10\"\r\n                                onClick={async () => {\r\n                                  if (!event.id) return\r\n                                  setRetryingEventId(event.id)\r\n                                  try {\r\n                                    await apiClient.retryFailedEvent(event.id)\r\n                                    // Refresh progress and events\r\n                                    if (pipeline.id) {\r\n                                      const progress = await apiClient.getPipelineProgress(pipeline.id)\r\n                                      setReplicationProgress(progress)\r\n                                      dispatch(fetchReplicationEvents({\r\n                                        pipelineId: String(pipeline.id),\r\n                                        limit: 1000\r\n                                      }))\r\n                                    }\r\n                                  } catch (error: any) {\r\n                                    showError(error.message || 'Unknown error', \"Failed to Retry Event\")\r\n                                  } finally {\r\n                                    setRetryingEventId(null)\r\n                                  }\r\n                                }}\r\n                                disabled={retryingEventId === event.id}\r\n                                title=\"Retry this failed event\"\r\n                              >\r\n                                {retryingEventId === event.id ? (\r\n                                  <Loader2 className=\"w-3 h-3 animate-spin\" />\r\n                                ) : (\r\n                                  <RotateCw className=\"w-3 h-3\" />\r\n                                )}\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"text-xs text-red-300 mt-2 line-clamp-2 group-hover:line-clamp-none transition-all\">\r\n                            {event.error_message}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })()}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-foreground-muted border-t border-border/50 pt-6\">\r\n              <Activity className=\"w-12 h-12 mx-auto mb-3 opacity-30\" />\r\n              <p className=\"text-sm font-medium\">CDC monitoring not active</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Status Cards - Enhanced with gradients */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n        {[\r\n          {\r\n            label: \"Status\",\r\n            value: pipeline.status || \"Unknown\",\r\n            gradient: (pipeline.status === \"active\" || pipeline.status === \"running\" || pipeline.status === \"starting\")\r\n              ? \"from-cyan-500/10 to-cyan-600/5\"\r\n              : (pipeline.status === \"paused\")\r\n                ? \"from-amber-500/10 to-amber-600/5\"\r\n                : (pipeline.status === \"stopped\" || pipeline.status === \"failed\" || pipeline.status === \"error\")\r\n                  ? \"from-red-500/10 to-red-600/5\"\r\n                  : \"from-emerald-500/10 to-green-600/5\",\r\n            borderColor: (pipeline.status === \"active\" || pipeline.status === \"running\" || pipeline.status === \"starting\")\r\n              ? \"border-cyan-500/20\"\r\n              : (pipeline.status === \"paused\")\r\n                ? \"border-amber-500/20\"\r\n                : (pipeline.status === \"stopped\" || pipeline.status === \"failed\" || pipeline.status === \"error\")\r\n                  ? \"border-red-500/20\"\r\n                  : \"border-emerald-500/20\",\r\n            textGradient: (pipeline.status === \"active\" || pipeline.status === \"running\" || pipeline.status === \"starting\")\r\n              ? \"from-cyan-400 to-cyan-600\"\r\n              : (pipeline.status === \"paused\")\r\n                ? \"from-amber-400 to-amber-600\"\r\n                : (pipeline.status === \"stopped\" || pipeline.status === \"failed\" || pipeline.status === \"error\")\r\n                  ? \"from-red-400 to-red-600\"\r\n                  : \"from-emerald-400 to-green-500\"\r\n          },\r\n          {\r\n            label: \"Tables\",\r\n            value: tableCount,\r\n            gradient: \"from-blue-500/10 to-blue-600/5\",\r\n            borderColor: \"border-blue-500/20\",\r\n            textGradient: \"from-blue-400 to-blue-600\"\r\n          },\r\n          {\r\n            label: \"Records Synced\",\r\n            value: recordsSynced > 0 ? (recordsSynced >= 1000 ? (recordsSynced / 1000).toFixed(1) + \"K\" : recordsSynced.toString()) : \"0\",\r\n            gradient: \"from-purple-500/10 to-purple-600/5\",\r\n            borderColor: \"border-purple-500/20\",\r\n            textGradient: \"from-purple-400 to-purple-600\"\r\n          },\r\n          {\r\n            label: \"Replication Lag\",\r\n            value: replicationLag !== null ? replicationLag + \"s\" : (pipeline.lagSeconds !== undefined && pipeline.lagSeconds !== null ? pipeline.lagSeconds + \"s\" : \"N/A\"),\r\n            gradient: \"from-cyan-500/10 to-cyan-600/5\",\r\n            borderColor: \"border-cyan-500/20\",\r\n            textGradient: \"from-cyan-400 to-cyan-600\",\r\n            // Add Consumer Lag details if available\r\n            subValue: replicationProgress?.consumer_lag?.['cdc-event-logger'] !== undefined\r\n              ? `Consumer Lag: ${replicationProgress.consumer_lag['cdc-event-logger']}`\r\n              : (pipeline.consumerLag ? `Consumer Lag: ${pipeline.consumerLag}` : null)\r\n          },\r\n        ].map((stat, i) => {\r\n          const Icon = i === 0 ? Activity : i === 1 ? Database : i === 2 ? Zap : Clock;\r\n          return (\r\n            <Card key={i} className={`bg-gradient-to-br ${stat.gradient} ${stat.borderColor} p-5 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 group relative overflow-hidden`}>\r\n              <div className=\"relative z-10\">\r\n                <p className=\"text-sm font-semibold text-foreground-muted uppercase tracking-wide mb-2\">{stat.label}</p>\r\n                <p className={`text-3xl font-extrabold bg-gradient-to-r ${stat.textGradient} bg-clip-text text-transparent`}>{stat.value}</p>\r\n                {/* Display subValue if it exists (e.g. Consumer Lag) */}\r\n                {stat.subValue && (\r\n                  <p className=\"text-xs font-medium text-foreground-muted mt-1 opacity-80\">\r\n                    {stat.subValue}\r\n                  </p>\r\n                )}\r\n              </div>\r\n              <Icon className={`absolute -right-4 -bottom-4 w-24 h-24 ${stat.borderColor.replace('border-', 'text-').replace('/20', '/10')} group-hover:${stat.borderColor.replace('border-', 'text-').replace('/20', '/15')} transition-colors transform rotate-12`} />\r\n            </Card>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Charts - Enhanced visibility */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <Card className=\"bg-surface border-border p-6 shadow-xl\">\r\n          <h3 className=\"text-lg font-bold text-foreground mb-6 flex items-center gap-2\">\r\n            <Database className=\"w-6 h-6 text-blue-400\" />\r\n            Records Per Hour\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={250}>\r\n            <BarChart data={performanceData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(100, 116, 139, 0.15)\" />\r\n              <XAxis\r\n                dataKey=\"time\"\r\n                stroke=\"rgb(148, 163, 184)\"\r\n                tick={{ fill: 'rgb(148, 163, 184)', fontSize: 12, fontWeight: '600' }}\r\n              />\r\n              <YAxis\r\n                stroke=\"rgb(148, 163, 184)\"\r\n                tick={{ fill: 'rgb(148, 163, 184)', fontSize: 12, fontWeight: '600' }}\r\n              />\r\n              <Tooltip\r\n                contentStyle={{\r\n                  backgroundColor: \"rgba(15, 23, 42, 0.95)\",\r\n                  border: \"1px solid rgb(59, 130, 246)\",\r\n                  borderRadius: \"8px\",\r\n                  boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.1)\"\r\n                }}\r\n                labelStyle={{ color: 'rgb(59, 130, 246)', fontWeight: 'bold' }}\r\n                itemStyle={{ color: 'rgb(148, 163, 184)' }}\r\n              />\r\n              <Bar\r\n                dataKey=\"records\"\r\n                fill=\"url(#recordsGradient)\"\r\n                radius={[10, 10, 0, 0]}\r\n              >\r\n                <defs>\r\n                  <linearGradient id=\"recordsGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                    <stop offset=\"0%\" stopColor=\"rgb(59, 130, 246)\" stopOpacity={0.9} />\r\n                    <stop offset=\"100%\" stopColor=\"rgb(37, 99, 235)\" stopOpacity={0.7} />\r\n                  </linearGradient>\r\n                </defs>\r\n              </Bar>\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        </Card>\r\n\r\n        <Card className=\"bg-surface border-border p-6 shadow-xl\">\r\n          <h3 className=\"text-lg font-bold text-foreground mb-6 flex items-center gap-2\">\r\n            <Activity className=\"w-6 h-6 text-cyan-400\" />\r\n            Replication Latency (seconds)\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={250}>\r\n            <LineChart data={performanceData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(100, 116, 139, 0.15)\" />\r\n              <XAxis\r\n                dataKey=\"time\"\r\n                stroke=\"rgb(148, 163, 184)\"\r\n                tick={{ fill: 'rgb(148, 163, 184)', fontSize: 12, fontWeight: '600' }}\r\n              />\r\n              <YAxis\r\n                stroke=\"rgb(148, 163, 184)\"\r\n                tick={{ fill: 'rgb(148, 163, 184)', fontSize: 12, fontWeight: '600' }}\r\n              />\r\n              <Tooltip\r\n                contentStyle={{\r\n                  backgroundColor: \"rgba(15, 23, 42, 0.95)\",\r\n                  border: \"1px solid rgb(6, 182, 212)\",\r\n                  borderRadius: \"8px\",\r\n                  boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.1)\"\r\n                }}\r\n                labelStyle={{ color: 'rgb(6, 182, 212)', fontWeight: 'bold' }}\r\n                itemStyle={{ color: 'rgb(148, 163, 184)' }}\r\n              />\r\n              <Line\r\n                type=\"monotone\"\r\n                dataKey=\"latency\"\r\n                stroke=\"rgb(6, 182, 212)\"\r\n                strokeWidth={3}\r\n                dot={{ fill: \"rgb(6, 182, 212)\", r: 5 }}\r\n                activeDot={{ r: 7, fill: \"rgb(14, 165, 233)\" }}\r\n              />\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Continuous Replication Status Section */}\r\n      {pipeline.cdc_enabled && pipeline.id && (\r\n        <Card className=\"bg-gradient-to-br from-indigo-500/10 to-purple-500/5 border-indigo-500/20 shadow-xl p-6\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h3 className=\"text-xl font-bold text-foreground flex items-center gap-2\">\r\n              <Activity className=\"w-6 h-6 text-indigo-400\" />\r\n              Continuous Replication Status\r\n            </h3>\r\n            <Badge\r\n              variant=\"outline\"\r\n              className={`${pipeline.status === \"active\"\r\n                ? \"bg-success/20 text-success border-success/30\"\r\n                : \"bg-warning/20 text-warning border-warning/30\"\r\n                }`}\r\n            >\r\n              {pipeline.status === \"active\" ? (\r\n                <>\r\n                  <div className=\"w-2 h-2 rounded-full bg-success mr-2 animate-pulse\"></div>\r\n                  Active\r\n                </>\r\n              ) : (\r\n                pipeline.status\r\n              )}\r\n            </Badge>\r\n          </div>\r\n\r\n          {useMemo(() => {\r\n            if (!events || !Array.isArray(events)) {\r\n              return null\r\n            }\r\n            const pipelineIdStr = String(pipeline.id)\r\n            const pipelineEvents = events.filter(e => String(e.pipeline_id) === pipelineIdStr)\r\n            const totalEvents = pipelineEvents.length\r\n            const successEvents = pipelineEvents.filter(e => e.status === 'applied' || e.status === 'success').length\r\n            const failedEvents = pipelineEvents.filter(e => e.status === 'failed' || e.status === 'error').length\r\n            const pendingEvents = totalEvents - successEvents - failedEvents\r\n            const successRate = totalEvents > 0 ? Math.round((successEvents / totalEvents) * 100) : 0\r\n\r\n            // Get latest LSN/Offset from events\r\n            const latestEvent = pipelineEvents.length > 0\r\n              ? pipelineEvents.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())[0]\r\n              : null\r\n\r\n            const sourceConn = connections.find(c => String(c.id) === String(pipeline.source_connection_id))\r\n            const dbType = sourceConn?.connection_type?.toLowerCase() || \"\"\r\n\r\n            // Calculate data transfer (estimate based on events)\r\n            const insertEvents = pipelineEvents.filter(e => e.event_type === 'insert').length\r\n            const updateEvents = pipelineEvents.filter(e => e.event_type === 'update').length\r\n            const deleteEvents = pipelineEvents.filter(e => e.event_type === 'delete').length\r\n\r\n            // Get LSN/Offset display\r\n            const getLsnDisplay = () => {\r\n              if (!latestEvent) return null\r\n\r\n              if (dbType === \"postgresql\" && latestEvent.source_lsn) {\r\n                return { type: \"LSN\", value: latestEvent.source_lsn, label: \"PostgreSQL LSN\" }\r\n              } else if (dbType === \"oracle\" && latestEvent.source_scn) {\r\n                return { type: \"SCN\", value: latestEvent.source_scn.toString(), label: \"Oracle SCN\" }\r\n              } else if (dbType === \"mysql\" && latestEvent.source_binlog_file) {\r\n                return {\r\n                  type: \"Binlog\",\r\n                  value: `${latestEvent.source_binlog_file}:${latestEvent.source_binlog_position || 0}`,\r\n                  label: \"MySQL Binlog\"\r\n                }\r\n              } else if (dbType === \"sqlserver\" && latestEvent.sql_server_lsn) {\r\n                return { type: \"LSN\", value: latestEvent.sql_server_lsn, label: \"SQL Server LSN\" }\r\n              }\r\n              return null\r\n            }\r\n\r\n            const lsnDisplay = getLsnDisplay()\r\n\r\n            return (\r\n              <div className=\"space-y-6\">\r\n                {/* Animated Data Transfer Progress Bar */}\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm font-medium text-foreground\">Data Transfer Progress</span>\r\n                    <span className=\"text-lg font-bold bg-gradient-to-r from-indigo-400 via-purple-500 to-pink-500 bg-clip-text text-transparent animate-pulse\">\r\n                      {successRate}% Success Rate\r\n                    </span>\r\n                  </div>\r\n\r\n                  {/* Enhanced Animated Progress Bar with Data Flow */}\r\n                  <div className=\"relative h-12 bg-gradient-to-r from-surface-hover via-surface-hover/80 to-surface-hover rounded-xl overflow-hidden border-2 border-border/50 shadow-inner\">\r\n                    {/* Animated background shimmer */}\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-[shimmer_3s_infinite] bg-[length:200%_100%]\"></div>\r\n\r\n                    {/* Success segment with animated data flow */}\r\n                    {successEvents > 0 && (\r\n                      <div\r\n                        className=\"absolute left-0 top-0 h-full bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 flex items-center justify-end pr-3 transition-all duration-700 ease-out relative overflow-hidden\"\r\n                        style={{ width: `${totalEvents > 0 ? (successEvents / totalEvents) * 100 : 0}%` }}\r\n                      >\r\n                        {/* Animated data particles flowing */}\r\n                        <div className=\"absolute inset-0 overflow-hidden\">\r\n                          {[...Array(8)].map((_, i) => (\r\n                            <div\r\n                              key={i}\r\n                              className=\"absolute w-3 h-3 bg-white/40 rounded-full shadow-lg\"\r\n                              style={{\r\n                                left: `${i * 12.5}%`,\r\n                                animation: `flow 2.5s infinite ease-in-out`,\r\n                                animationDelay: `${i * 0.3}s`,\r\n                                top: '50%',\r\n                              }}\r\n                            ></div>\r\n                          ))}\r\n                          {/* Additional smaller particles */}\r\n                          {[...Array(12)].map((_, i) => (\r\n                            <div\r\n                              key={`small-${i}`}\r\n                              className=\"absolute w-1.5 h-1.5 bg-white/20 rounded-full\"\r\n                              style={{\r\n                                left: `${i * 8.33}%`,\r\n                                animation: `flow 3s infinite ease-in-out`,\r\n                                animationDelay: `${i * 0.25}s`,\r\n                                top: `${30 + (i % 3) * 20}%`,\r\n                              }}\r\n                            ></div>\r\n                          ))}\r\n                        </div>\r\n\r\n                        {/* Shimmer effect */}\r\n                        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-[shimmer_2s_infinite] bg-[length:200%_100%]\"></div>\r\n\r\n                        {/* Success count badge */}\r\n                        <div className=\"relative z-10 flex items-center gap-2\">\r\n                          <CheckCircle className=\"w-4 h-4 text-white animate-pulse\" />\r\n                          <span className=\"text-sm font-bold text-white drop-shadow-lg\">{successEvents.toLocaleString()}</span>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Failed segment with warning animation */}\r\n                    {failedEvents > 0 && (\r\n                      <div\r\n                        className=\"absolute h-full bg-gradient-to-r from-red-500 via-rose-400 to-red-500 flex items-center justify-end pr-3 transition-all duration-700 ease-out relative overflow-hidden\"\r\n                        style={{\r\n                          left: `${totalEvents > 0 ? (successEvents / totalEvents) * 100 : 0}%`,\r\n                          width: `${totalEvents > 0 ? (failedEvents / totalEvents) * 100 : 0}%`\r\n                        }}\r\n                      >\r\n                        {/* Pulsing error indicator */}\r\n                        <div className=\"absolute inset-0 bg-red-600/30 animate-pulse\"></div>\r\n\r\n                        {/* Failed count badge */}\r\n                        <div className=\"relative z-10 flex items-center gap-2\">\r\n                          <AlertCircle className=\"w-4 h-4 text-white animate-pulse\" />\r\n                          <span className=\"text-sm font-bold text-white drop-shadow-lg\">{failedEvents.toLocaleString()}</span>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Pending segment with loading animation */}\r\n                    {pendingEvents > 0 && (\r\n                      <div\r\n                        className=\"absolute h-full bg-gradient-to-r from-amber-500/60 via-yellow-400/50 to-amber-500/60 flex items-center justify-end pr-3 transition-all duration-700 ease-out relative overflow-hidden\"\r\n                        style={{\r\n                          left: `${totalEvents > 0 ? ((successEvents + failedEvents) / totalEvents) * 100 : 0}%`,\r\n                          width: `${totalEvents > 0 ? (pendingEvents / totalEvents) * 100 : 0}%`\r\n                        }}\r\n                      >\r\n                        {/* Animated loading dots */}\r\n                        <div className=\"absolute inset-0 flex items-center justify-center gap-1\">\r\n                          {[...Array(3)].map((_, i) => (\r\n                            <div\r\n                              key={i}\r\n                              className=\"w-1.5 h-1.5 bg-white/40 rounded-full animate-bounce\"\r\n                              style={{ animationDelay: `${i * 0.2}s` }}\r\n                            ></div>\r\n                          ))}\r\n                        </div>\r\n\r\n                        {/* Pending count badge */}\r\n                        <div className=\"relative z-10 flex items-center gap-2\">\r\n                          <Loader2 className=\"w-4 h-4 text-white animate-spin\" />\r\n                          <span className=\"text-sm font-bold text-white drop-shadow-lg\">{pendingEvents.toLocaleString()}</span>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Empty state with animated waiting indicator */}\r\n                    {totalEvents === 0 && (\r\n                      <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <div className=\"w-2 h-2 bg-indigo-400 rounded-full animate-pulse\"></div>\r\n                          <span className=\"text-xs text-foreground-muted\">Waiting for replication events...</span>\r\n                          <div className=\"w-2 h-2 bg-indigo-400 rounded-full animate-pulse\" style={{ animationDelay: '0.3s' }}></div>\r\n                          <div className=\"w-2 h-2 bg-indigo-400 rounded-full animate-pulse\" style={{ animationDelay: '0.6s' }}></div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Animated border glow when active */}\r\n                    {pipeline.status === \"active\" && totalEvents > 0 && (\r\n                      <div className=\"absolute inset-0 rounded-xl border-2 border-indigo-400/50 animate-pulse pointer-events-none\"></div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Data Transfer Speed Indicator */}\r\n                  {pipeline.status === \"active\" && totalEvents > 0 && (\r\n                    <div className=\"flex items-center gap-2 text-xs text-foreground-muted\">\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <div className=\"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-ping\"></div>\r\n                        <span>Live Data Transfer</span>\r\n                      </div>\r\n                      <span>•</span>\r\n                      <span>{totalEvents.toLocaleString()} events processed</span>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Progress labels */}\r\n                  <div className=\"flex items-center justify-between text-xs text-foreground-muted\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <div className=\"flex items-center gap-1.5\">\r\n                        <div className=\"w-3 h-3 rounded bg-success\"></div>\r\n                        <span>Success: {successEvents.toLocaleString()}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1.5\">\r\n                        <div className=\"w-3 h-3 rounded bg-error\"></div>\r\n                        <span>Failed: {failedEvents.toLocaleString()}</span>\r\n                      </div>\r\n                      {pendingEvents > 0 && (\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                          <div className=\"w-3 h-3 rounded bg-warning/50\"></div>\r\n                          <span>Pending: {pendingEvents.toLocaleString()}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <span className=\"font-semibold\">Total: {totalEvents.toLocaleString()}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* LSN/Offset Display */}\r\n                {lsnDisplay && (\r\n                  <div className=\"p-4 bg-surface/50 rounded-lg border border-indigo-500/20\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <span className=\"text-sm font-medium text-foreground-muted\">{lsnDisplay.label}</span>\r\n                      <Badge variant=\"outline\" className=\"bg-indigo-500/20 text-indigo-400 border-indigo-500/30\">\r\n                        {lsnDisplay.type}\r\n                      </Badge>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Database className=\"w-4 h-4 text-indigo-400\" />\r\n                      <span className=\"font-mono text-sm text-foreground bg-surface px-2 py-1 rounded\">\r\n                        {lsnDisplay.value}\r\n                      </span>\r\n                      {latestEvent && (\r\n                        <span className=\"text-xs text-foreground-muted ml-auto\">\r\n                          Last: {new Date(latestEvent.created_at).toLocaleTimeString()}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Data Transfer Metrics */}\r\n                {/* Data Transfer Metrics */}\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                  {/* Captured */}\r\n                  <Card className=\"relative overflow-hidden p-6 border-none bg-blue-500/5 shadow-[0_15px_30px_-5px_rgba(59,130,246,0.15)] dark:shadow-[0_15px_30px_-5px_rgba(0,0,0,0.3)] rounded-[2rem] group transition-all duration-500 hover:translate-y-[-2px] hover:bg-blue-500/10\">\r\n                    <div className=\"absolute -right-6 -bottom-6 opacity-[0.03] dark:opacity-[0.06] group-hover:opacity-[0.12] transition-all duration-700 group-hover:scale-110 group-hover:-rotate-12 pointer-events-none\">\r\n                      <Database className=\"w-32 h-32 text-blue-500\" />\r\n                    </div>\r\n                    <div className=\"relative z-10\">\r\n                      <div className=\"flex items-center gap-2 mb-4\">\r\n                        <div className=\"p-2 bg-blue-400/10 rounded-lg\">\r\n                          <Database className=\"w-4 h-4 text-blue-400\" />\r\n                        </div>\r\n                        <span className=\"text-[10px] font-black text-blue-400/80 uppercase tracking-[0.2em]\">Captured</span>\r\n                      </div>\r\n                      <p className=\"text-4xl font-black text-blue-500 tracking-tighter drop-shadow-sm\">{totalEvents.toLocaleString()}</p>\r\n                      <p className=\"text-[10px] text-foreground-muted font-black uppercase mt-2 opacity-60\">Total Pipeline Events</p>\r\n                    </div>\r\n                  </Card>\r\n\r\n                  {/* Applied */}\r\n                  <Card className=\"relative overflow-hidden p-6 border-none bg-emerald-500/5 shadow-[0_15px_30px_-5px_rgba(16,185,129,0.15)] dark:shadow-[0_15px_30px_-5px_rgba(0,0,0,0.3)] rounded-[2rem] group transition-all duration-500 hover:translate-y-[-2px] hover:bg-emerald-500/10\">\r\n                    <div className=\"absolute -right-6 -bottom-6 opacity-[0.03] dark:opacity-[0.06] group-hover:opacity-[0.12] transition-all duration-700 group-hover:scale-110 group-hover:-rotate-12 pointer-events-none\">\r\n                      <CheckCircle className=\"w-32 h-32 text-emerald-500\" />\r\n                    </div>\r\n                    <div className=\"relative z-10\">\r\n                      <div className=\"flex items-center gap-2 mb-4\">\r\n                        <div className=\"p-2 bg-emerald-400/10 rounded-lg\">\r\n                          <CheckCircle className=\"w-4 h-4 text-emerald-400\" />\r\n                        </div>\r\n                        <span className=\"text-[10px] font-black text-emerald-400/80 uppercase tracking-[0.2em]\">Applied</span>\r\n                      </div>\r\n                      <p className=\"text-4xl font-black text-emerald-500 tracking-tighter drop-shadow-sm\">{successEvents.toLocaleString()}</p>\r\n                      <p className=\"text-[10px] text-foreground-muted font-black uppercase mt-2 opacity-60\">Successfully Synced</p>\r\n                    </div>\r\n                  </Card>\r\n\r\n                  {/* Errors */}\r\n                  <Card className=\"relative overflow-hidden p-6 border-none bg-red-500/5 shadow-[0_15px_30px_-5px_rgba(239,68,68,0.15)] dark:shadow-[0_15px_30px_-5px_rgba(0,0,0,0.3)] rounded-[2rem] group transition-all duration-500 hover:translate-y-[-2px] hover:bg-red-500/10\">\r\n                    <div className=\"absolute -right-6 -bottom-6 opacity-[0.03] dark:opacity-[0.06] group-hover:opacity-[0.12] transition-all duration-700 group-hover:scale-110 group-hover:-rotate-12 pointer-events-none\">\r\n                      <AlertCircle className=\"w-32 h-32 text-red-500\" />\r\n                    </div>\r\n                    <div className=\"relative z-10\">\r\n                      <div className=\"flex items-center gap-2 mb-4\">\r\n                        <div className=\"p-2 bg-red-400/10 rounded-lg\">\r\n                          <AlertCircle className=\"w-4 h-4 text-red-400\" />\r\n                        </div>\r\n                        <span className=\"text-[10px] font-black text-red-400/80 uppercase tracking-[0.2em]\">Errors</span>\r\n                      </div>\r\n                      <p className=\"text-4xl font-black text-red-500 tracking-tighter drop-shadow-sm\">{failedEvents.toLocaleString()}</p>\r\n                      <p className=\"text-[10px] text-foreground-muted font-black uppercase mt-2 opacity-60\">Failed Event Batches</p>\r\n                    </div>\r\n                  </Card>\r\n\r\n                  {/* Operations */}\r\n                  <Card className=\"relative overflow-hidden p-6 border-none bg-purple-500/5 shadow-[0_15px_30px_-5px_rgba(168,85,247,0.15)] dark:shadow-[0_15px_30px_-5px_rgba(0,0,0,0.3)] rounded-[2rem] group transition-all duration-500 hover:translate-y-[-2px] hover:bg-purple-500/10\">\r\n                    <div className=\"absolute -right-6 -bottom-6 opacity-[0.03] dark:opacity-[0.06] group-hover:opacity-[0.12] transition-all duration-700 group-hover:scale-110 group-hover:-rotate-12 pointer-events-none\">\r\n                      <Activity className=\"w-32 h-32 text-purple-500\" />\r\n                    </div>\r\n                    <div className=\"relative z-10\">\r\n                      <div className=\"flex items-center gap-2 mb-4\">\r\n                        <div className=\"p-2 bg-purple-400/10 rounded-lg\">\r\n                          <Activity className=\"w-4 h-4 text-purple-400\" />\r\n                        </div>\r\n                        <span className=\"text-[10px] font-black text-purple-400/80 uppercase tracking-[0.2em]\">Ops Mix</span>\r\n                      </div>\r\n                      <div className=\"flex flex-col gap-1.5 pt-1\">\r\n                        <div className=\"flex justify-between items-baseline\">\r\n                          <span className=\"text-[10px] font-black text-foreground-muted opacity-80 uppercase\">INS</span>\r\n                          <span className=\"text-xl font-black text-purple-500 tracking-tighter\">{insertEvents.toLocaleString()}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between items-baseline\">\r\n                          <span className=\"text-[10px] font-black text-foreground-muted opacity-80 uppercase\">UPD</span>\r\n                          <span className=\"text-xl font-black text-purple-500 tracking-tighter\">{updateEvents.toLocaleString()}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between items-baseline\">\r\n                          <span className=\"text-[10px] font-black text-foreground-muted opacity-80 uppercase\">DEL</span>\r\n                          <span className=\"text-xl font-black text-purple-500 tracking-tighter\">{deleteEvents.toLocaleString()}</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </Card>\r\n                </div>\r\n\r\n                {/* Real-time Status Indicator */}\r\n                {pipeline.status === \"active\" && (\r\n                  <div className=\"flex items-center justify-between p-3 bg-success/10 border border-success/20 rounded-lg\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"w-2 h-2 rounded-full bg-success animate-pulse\"></div>\r\n                      <span className=\"text-sm font-medium text-foreground\">Replication Active</span>\r\n                    </div>\r\n                    {replicationProgress?.cdc && (\r\n                      <div className=\"text-xs text-foreground-muted\">\r\n                        Last event: {replicationProgress.cdc.last_event_time\r\n                          ? new Date(replicationProgress.cdc.last_event_time).toLocaleTimeString()\r\n                          : \"N/A\"}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )\r\n          }, [events, pipeline?.id, pipeline?.source_connection_id, connections, pipeline?.status])}\r\n        </Card>\r\n      )}\r\n\r\n      {/* CDC Checkpoints */}\r\n      {pipeline.cdc_enabled && pipeline.id && (\r\n        <CheckpointManager\r\n          pipelineId={pipeline.id}\r\n          sourceConnectionType={connections.find(c => String(c.id) === String(pipeline.source_connection_id))?.connection_type}\r\n          tableMappings={pipeline.table_mappings || []}\r\n        />\r\n      )}\r\n\r\n      {/* Tables */}\r\n      <Card className=\"bg-surface border-border p-6\">\r\n        <h3 className=\"text-lg font-semibold text-foreground mb-4\">Replicated Tables ({tableCount})</h3>\r\n        {tableNames.length > 0 ? (\r\n          <div className=\"space-y-2\">\r\n            {pipeline.table_mappings ? (\r\n              // Show source → target mapping\r\n              pipeline.table_mappings.map((tm, idx) => (\r\n                <div key={idx} className=\"flex items-center justify-between p-3 bg-surface-hover rounded-lg hover:bg-surface-hover/80 transition-colors\">\r\n                  <div className=\"flex-1\">\r\n                    <span className=\"text-foreground font-medium\">{tm.source_table}</span>\r\n                    {tm.source_table !== tm.target_table && (\r\n                      <>\r\n                        <span className=\"text-foreground-muted mx-2\">→</span>\r\n                        <span className=\"text-foreground-muted\">{tm.target_table}</span>\r\n                      </>\r\n                    )}\r\n                    {tm.source_schema && (\r\n                      <span className=\"text-xs text-foreground-muted ml-2\">({tm.source_schema})</span>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault()\r\n                        e.stopPropagation()\r\n                        if (!isComparing && !loadingData) {\r\n                          handleCompareTable(tm).catch((err) => {\r\n                            console.error(\"[Compare] Unhandled error:\", err)\r\n                            // Error is already handled in handleCompareTable\r\n                          })\r\n                        }\r\n                      }}\r\n                      disabled={isComparing || loadingData}\r\n                      className=\"bg-transparent border-border hover:bg-surface-hover hover:text-teal-500 active:text-teal-600 text-foreground gap-1 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                      title={isComparing || loadingData ? \"Comparing...\" : \"Compare source and target data\"}\r\n                    >\r\n                      {isComparing || loadingData ? (\r\n                        <>\r\n                          <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                          Comparing...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Eye className=\"w-4 h-4\" />\r\n                          Compare\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                    <CheckCircle className=\"w-5 h-5 text-success flex-shrink-0\" />\r\n                  </div>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              // Fallback to simple table names\r\n              tableNames.map((table, idx) => (\r\n                <div key={idx} className=\"flex items-center justify-between p-3 bg-surface-hover rounded-lg\">\r\n                  <span className=\"text-foreground font-medium\">{table}</span>\r\n                  <CheckCircle className=\"w-5 h-5 text-success\" />\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-8 text-foreground-muted\">\r\n            <p>No tables configured for this pipeline.</p>\r\n          </div>\r\n        )}\r\n      </Card>\r\n\r\n      {/* Data Comparison Section - Inline below tables */}\r\n      {selectedTable && (\r\n        <Card className=\"bg-surface border-border p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold text-foreground\">Data Comparison</h3>\r\n              <p className=\"text-sm text-foreground-muted\">\r\n                {selectedTable.source} → {selectedTable.target}\r\n              </p>\r\n            </div>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={closeComparison}\r\n              className=\"bg-transparent border-border hover:bg-surface-hover\"\r\n            >\r\n              <X className=\"w-4 h-4 mr-2\" />\r\n              Close\r\n            </Button>\r\n          </div>\r\n\r\n          {loadingData ? (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n              <Loader2 className=\"w-6 h-6 animate-spin text-foreground-muted\" />\r\n              <span className=\"ml-2 text-foreground-muted\">Loading table data...</span>\r\n            </div>\r\n          ) : (!sourceData && !targetData) ? (\r\n            // Only show error if both tables failed\r\n            <div className={`p-4 rounded-lg border ${dataError?.includes('⚠️') || dataError?.includes('Warning') || dataError?.includes('Showing available data')\r\n              ? 'bg-warning/10 border-warning/30 text-warning'\r\n              : 'bg-error/10 border-error/30 text-error'\r\n              }`}>\r\n              <div className=\"flex items-start justify-between gap-4\">\r\n                <p className=\"whitespace-pre-line text-sm flex-1\">{dataError || 'Failed to fetch table data'}</p>\r\n                {dataError?.includes('connections that don\\'t exist') && (\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"outline\"\r\n                    onClick={async () => {\r\n                      try {\r\n                        const result = await apiClient.fixOrphanedConnections()\r\n                        // Success - could show success toast if needed, but for now just log\r\n                        console.log(`Successfully fixed ${result.count} pipeline(s).`)\r\n                        // Refresh the pipeline\r\n                        if (pipeline?.id) {\r\n                          const updatedPipeline = await apiClient.getPipeline(pipeline.id)\r\n                          dispatch(setSelectedPipeline(updatedPipeline))\r\n                          dispatch(fetchPipelines())\r\n                        }\r\n                        // Clear error and retry\r\n                        setDataError(null)\r\n                        if (selectedTable) {\r\n                          handleCompareTable({\r\n                            source_table: selectedTable.source,\r\n                            target_table: selectedTable.target,\r\n                            source_schema: selectedTable.sourceSchema,\r\n                            target_schema: selectedTable.targetSchema\r\n                          }).catch(console.error)\r\n                        }\r\n                      } catch (err: any) {\r\n                        showError(err?.message || 'Unknown error', \"Failed to Fix Connections\")\r\n                      }\r\n                    }}\r\n                    className=\"ml-4 shrink-0\"\r\n                  >\r\n                    <RefreshCw className=\"w-4 h-4 mr-2\" />\r\n                    Fix Connections\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {/* Show error banner if there's a partial failure */}\r\n              {dataError && (sourceData || targetData) && (\r\n                <div className={`p-4 rounded-lg border ${dataError.includes('⚠️') || dataError.includes('Warning') || dataError.includes('Showing available data')\r\n                  ? 'bg-warning/10 border-warning/30 text-warning'\r\n                  : 'bg-error/10 border-error/30 text-error'\r\n                  }`}>\r\n                  <div className=\"flex items-start justify-between gap-4\">\r\n                    <div className=\"flex-1\">\r\n                      <p className=\"whitespace-pre-line text-sm\">{dataError}</p>\r\n                      {dataError.includes('Target') && !targetData && selectedTable && (\r\n                        <p className=\"text-xs mt-2 opacity-75\">\r\n                          Table: {(() => {\r\n                            const tableName = selectedTable.target\r\n                            const schema = selectedTable.targetSchema\r\n                            if (schema && tableName.startsWith(`${schema}.`)) {\r\n                              return tableName\r\n                            }\r\n                            return schema ? `${schema}.${tableName}` : tableName\r\n                          })()}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    {dataError.includes('Target') && !targetData && (\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={async () => {\r\n                          if (!selectedTable) return\r\n                          setRetryingTarget(true)\r\n                          setDataError(null)\r\n                          try {\r\n                            const tm = {\r\n                              source_table: selectedTable.source,\r\n                              target_table: selectedTable.target,\r\n                              source_schema: selectedTable.sourceSchema,\r\n                              target_schema: selectedTable.targetSchema\r\n                            }\r\n                            // Handle \"undefined\" schema string - convert to undefined/null\r\n                            let targetSchema = tm.target_schema && tm.target_schema !== \"undefined\" && tm.target_schema.trim() !== \"\"\r\n                              ? tm.target_schema.trim()\r\n                              : undefined\r\n\r\n                            // SQL Server uses \"dbo\" as default schema, not \"public\"\r\n                            const targetConn = connections.find(c => String(c.id) === String(pipeline.target_connection_id))\r\n                            const isTargetSQLServer = targetConn?.connection_type?.toLowerCase() === 'sqlserver' || targetConn?.connection_type?.toLowerCase() === 'sql_server'\r\n                            if (isTargetSQLServer && targetSchema?.toLowerCase() === 'public') {\r\n                              targetSchema = undefined\r\n                            }\r\n\r\n                            const targetConnectionId = pipeline.target_connection_uuid || pipeline.target_connection_id!\r\n                            const targetResult = await apiClient.getTableData(\r\n                              targetConnectionId,\r\n                              tm.target_table,\r\n                              targetSchema, // Use cleaned schema (undefined if \"undefined\" string or SQL Server \"public\")\r\n                              1000 // Increased from 50 to fetch all records\r\n                            )\r\n                            setTargetData(targetResult)\r\n                            setDataError(null)\r\n                            console.log(`[Compare] Target table retry successful: ${targetResult?.records?.length || 0} records`)\r\n                          } catch (retryError: any) {\r\n                            console.error(\"[Compare] Retry failed:\", retryError)\r\n                            const retryErrMsg = retryError.message || \"Retry failed. Please check the target database connection.\"\r\n                            setDataError(`⚠️ Target table unavailable: ${retryErrMsg}\\n\\nShowing available data. Please check the target database connection.`)\r\n                          } finally {\r\n                            setRetryingTarget(false)\r\n                          }\r\n                        }}\r\n                        disabled={retryingTarget || loadingData}\r\n                        className=\"bg-transparent border-border hover:bg-surface-hover whitespace-nowrap\"\r\n                      >\r\n                        {retryingTarget ? (\r\n                          <>\r\n                            <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                            Retrying...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <Activity className=\"w-4 h-4 mr-2\" />\r\n                            Retry Target\r\n                          </>\r\n                        )}\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Table Comparison Header */}\r\n              <div className=\"flex items-center justify-between mb-4 flex-shrink-0\">\r\n                <h4 className=\"text-sm font-bold text-foreground uppercase tracking-wide\">Table Data Comparison</h4>\r\n                <div className=\"flex items-center gap-4 text-xs text-foreground-muted\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 rounded bg-surface-hover border border-border\"></div>\r\n                    <span>Source</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 rounded bg-primary/20 border border-primary/50\"></div>\r\n                    <span>Target</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Side by side tables in card format - Always show both side by side */}\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6\">\r\n                {/* Source Table Card - Always show */}\r\n                {sourceData ? (\r\n                  <Card className=\"bg-surface border-2 border-border p-6 shadow-lg\">\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"flex items-center gap-2 pb-2 border-b border-border\">\r\n                        <Database className=\"w-4 h-4 text-foreground-muted\" />\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"text-sm font-bold text-foreground\">Source Table</p>\r\n                          <p className=\"text-xs text-foreground-muted mt-1\">\r\n                            {(() => {\r\n                              // Prevent duplicate schema in display (e.g., \"public.public.table\" -> \"public.table\")\r\n                              const tableName = selectedTable.source\r\n                              const schema = selectedTable.sourceSchema\r\n                              if (schema && tableName.startsWith(`${schema}.`)) {\r\n                                return tableName // Table already includes schema, don't duplicate\r\n                              }\r\n                              return schema ? `${schema}.${tableName}` : tableName\r\n                            })()}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <div className=\"text-xs text-foreground-muted\">Records</div>\r\n                          <div className=\"text-lg font-semibold text-foreground\">\r\n                            {sourceData?.count || sourceRecords.length || 0}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-sm p-4 bg-surface-hover rounded-lg border-2 border-border shadow-inner\">\r\n                        <div className=\"overflow-x-auto overflow-y-visible\">\r\n                          <table className=\"w-full text-sm table-auto\">\r\n                            <thead className=\"bg-surface-hover\">\r\n                              <tr>\r\n                                {(() => {\r\n                                  // Use columns if available, otherwise use first record keys\r\n                                  if (sourceData?.columns && sourceData.columns.length > 0) {\r\n                                    return sourceData.columns.map((col: any, idx: number) => (\r\n                                      <th key={`source-header-${idx}`} className=\"px-3 py-2 text-left text-foreground-muted font-medium border-b border-border whitespace-nowrap\">\r\n                                        {col.name}\r\n                                      </th>\r\n                                    ))\r\n                                  } else if (sourceRecords.length > 0 && sourceRecords[0]) {\r\n                                    // Fallback: use first record keys as headers\r\n                                    return Object.keys(sourceRecords[0]).map((key: string, idx: number) => (\r\n                                      <th key={`source-header-${idx}`} className=\"px-3 py-2 text-left text-foreground-muted font-medium border-b border-border whitespace-nowrap\">\r\n                                        {key}\r\n                                      </th>\r\n                                    ))\r\n                                  } else {\r\n                                    return (\r\n                                      <th className=\"px-3 py-2 text-left text-foreground-muted font-medium border-b border-border whitespace-nowrap\">\r\n                                        No columns available\r\n                                      </th>\r\n                                    )\r\n                                  }\r\n                                })()}\r\n                              </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                              {(() => {\r\n                                // Debug logging (only in development)\r\n                                if (process.env.NODE_ENV === 'development') {\r\n                                  console.log('[Source Table Render]', {\r\n                                    paginatedCount: paginatedSourceRecords.length,\r\n                                    totalRecords: sourceRecords.length,\r\n                                    hasColumns: !!sourceData?.columns,\r\n                                    columnsCount: sourceData?.columns?.length || 0,\r\n                                    firstRecord: paginatedSourceRecords[0],\r\n                                    sourceData: sourceData\r\n                                  })\r\n                                }\r\n\r\n                                if (paginatedSourceRecords.length > 0 && sourceData?.columns && sourceData.columns.length > 0) {\r\n                                  return paginatedSourceRecords.map((record: any, rowIdx: number) => {\r\n                                    if (!record || typeof record !== 'object') {\r\n                                      console.warn('[Source] Invalid record at index', rowIdx, ':', record)\r\n                                      return null\r\n                                    }\r\n\r\n                                    const recordKeys = Object.keys(record)\r\n\r\n                                    return (\r\n                                      <tr key={`source-row-${rowIdx}`} className=\"border-b border-border/50 hover:bg-surface transition-colors\">\r\n                                        {sourceData.columns.map((col: any, colIdx: number) => {\r\n                                          // Try multiple ways to access the value\r\n                                          let value = record[col.name]\r\n\r\n                                          // If not found, try case variations\r\n                                          if (value === undefined || value === null) {\r\n                                            value = record[col.name.toLowerCase()] ?? record[col.name.toUpperCase()] ?? null\r\n                                          }\r\n\r\n                                          // If still null and record is array-like, try by index\r\n                                          if (value === null && Array.isArray(record)) {\r\n                                            value = record[colIdx] ?? null\r\n                                          }\r\n\r\n                                          return (\r\n                                            <td key={`source-cell-${rowIdx}-${colIdx}`} className=\"px-3 py-2 text-foreground text-xs whitespace-nowrap\">\r\n                                              {value !== null && value !== undefined\r\n                                                ? String(value).substring(0, 50)\r\n                                                : <span className=\"text-foreground-muted\">NULL</span>}\r\n                                            </td>\r\n                                          )\r\n                                        })}\r\n                                      </tr>\r\n                                    )\r\n                                  }).filter(Boolean)\r\n                                } else if (paginatedSourceRecords.length > 0 && (!sourceData?.columns || sourceData.columns.length === 0)) {\r\n                                  // If we have records but no columns, use record keys as columns\r\n                                  const firstRecord = paginatedSourceRecords[0]\r\n                                  const recordKeys = firstRecord ? Object.keys(firstRecord) : []\r\n\r\n                                  return paginatedSourceRecords.map((record: any, rowIdx: number) => (\r\n                                    <tr key={`source-row-${rowIdx}`} className=\"border-b border-border/50 hover:bg-surface transition-colors\">\r\n                                      {recordKeys.map((key: string, colIdx: number) => (\r\n                                        <td key={`source-cell-${rowIdx}-${colIdx}`} className=\"px-3 py-2 text-foreground text-xs whitespace-nowrap\">\r\n                                          {record[key] !== null && record[key] !== undefined\r\n                                            ? String(record[key]).substring(0, 50)\r\n                                            : <span className=\"text-foreground-muted\">NULL</span>}\r\n                                        </td>\r\n                                      ))}\r\n                                    </tr>\r\n                                  ))\r\n                                } else {\r\n                                  return (\r\n                                    <tr>\r\n                                      <td colSpan={sourceData?.columns?.length || 1} className=\"px-3 py-8 text-center text-foreground-muted\">\r\n                                        {sourceRecords.length > 0\r\n                                          ? `No records on page ${sourcePage} of ${sourceTotalPages} (Total: ${sourceRecords.length} records)`\r\n                                          : \"No data available\"}\r\n                                      </td>\r\n                                    </tr>\r\n                                  )\r\n                                }\r\n                              })()}\r\n                            </tbody>\r\n                          </table>\r\n                        </div>\r\n                      </div>\r\n                      {/* Source Table Pagination */}\r\n                      {sourceTotalPages > 1 && (\r\n                        <div className=\"flex items-center justify-between pt-3 border-t border-border\">\r\n                          <div className=\"text-xs text-foreground-muted\">\r\n                            Page {sourcePage} of {sourceTotalPages} ({sourceStartIndex + 1}-{Math.min(sourceEndIndex, sourceRecords.length)} of {sourceRecords.length})\r\n                          </div>\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              onClick={() => setSourcePage(prev => Math.max(1, prev - 1))}\r\n                              disabled={sourcePage === 1 || loadingData}\r\n                              className=\"bg-transparent border-border hover:bg-surface-hover h-7 px-2\"\r\n                            >\r\n                              <ChevronLeft className=\"w-3 h-3\" />\r\n                            </Button>\r\n                            <div className=\"flex items-center gap-1\">\r\n                              {Array.from({ length: Math.min(sourceTotalPages, 5) }, (_, i) => {\r\n                                let pageNum;\r\n                                if (sourceTotalPages <= 5) {\r\n                                  pageNum = i + 1;\r\n                                } else if (sourcePage <= 3) {\r\n                                  pageNum = i + 1;\r\n                                } else if (sourcePage >= sourceTotalPages - 2) {\r\n                                  pageNum = sourceTotalPages - 4 + i;\r\n                                } else {\r\n                                  pageNum = sourcePage - 2 + i;\r\n                                }\r\n                                return (\r\n                                  <Button\r\n                                    key={pageNum}\r\n                                    variant={sourcePage === pageNum ? \"default\" : \"outline\"}\r\n                                    size=\"sm\"\r\n                                    onClick={() => setSourcePage(pageNum)}\r\n                                    disabled={loadingData}\r\n                                    className={\r\n                                      sourcePage === pageNum\r\n                                        ? \"bg-primary hover:bg-primary/90 text-foreground h-7 px-2\"\r\n                                        : \"bg-transparent border-border hover:bg-surface-hover h-7 px-2\"\r\n                                    }\r\n                                  >\r\n                                    {pageNum}\r\n                                  </Button>\r\n                                );\r\n                              })}\r\n                            </div>\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              onClick={() => setSourcePage(prev => Math.min(sourceTotalPages, prev + 1))}\r\n                              disabled={sourcePage === sourceTotalPages || loadingData}\r\n                              className=\"bg-transparent border-border hover:bg-surface-hover h-7 px-2\"\r\n                            >\r\n                              <ChevronRight className=\"w-3 h-3\" />\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </Card>\r\n                ) : (\r\n                  <Card className=\"bg-surface border-2 border-border p-6 shadow-lg\">\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"flex items-center gap-2 pb-2 border-b border-border\">\r\n                        <Database className=\"w-4 h-4 text-foreground-muted\" />\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"text-sm font-bold text-foreground\">Source Table</p>\r\n                          <p className=\"text-xs text-foreground-muted mt-1\">\r\n                            {(() => {\r\n                              // Prevent duplicate schema in display (e.g., \"public.public.table\" -> \"public.table\")\r\n                              const tableName = selectedTable.source\r\n                              const schema = selectedTable.sourceSchema\r\n                              if (schema && tableName.startsWith(`${schema}.`)) {\r\n                                return tableName // Table already includes schema, don't duplicate\r\n                              }\r\n                              return schema ? `${schema}.${tableName}` : tableName\r\n                            })()}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-sm p-6 bg-surface-hover rounded-lg border-2 border-dashed border-border text-center\">\r\n                        {loadingData ? (\r\n                          <div className=\"text-foreground-muted\">\r\n                            <Loader2 className=\"w-5 h-5 animate-spin mx-auto mb-2\" />\r\n                            Loading source data...\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"text-foreground-muted\">\r\n                            <p className=\"font-medium\">Source data not available</p>\r\n                            <p className=\"text-xs mt-1\">Please check the source database connection</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </Card>\r\n                )}\r\n\r\n                {/* Target Table Card - Always show */}\r\n                {targetData ? (\r\n                  <Card className=\"bg-surface border-2 border-primary/50 p-6 shadow-lg\">\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"flex items-center gap-2 pb-2 border-b border-primary/50\">\r\n                        <Database className=\"w-4 h-4 text-primary\" />\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"text-sm font-bold text-foreground\">Target Table</p>\r\n                          <p className=\"text-xs text-foreground-muted mt-1\">\r\n                            {(() => {\r\n                              // Prevent duplicate schema in display (e.g., \"public.public.table\" -> \"public.table\")\r\n                              const tableName = selectedTable.target\r\n                              const schema = selectedTable.targetSchema\r\n                              if (schema && tableName.startsWith(`${schema}.`)) {\r\n                                return tableName // Table already includes schema, don't duplicate\r\n                              }\r\n                              return schema ? `${schema}.${tableName}` : tableName\r\n                            })()}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <div className=\"text-xs text-foreground-muted\">Records</div>\r\n                          <div className=\"text-lg font-semibold text-foreground\">\r\n                            {targetData?.count || targetRecords.length || 0}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-sm p-4 bg-primary/5 rounded-lg border-2 border-primary/40 shadow-inner\">\r\n                        <div className=\"overflow-x-auto overflow-y-visible\">\r\n                          <table className=\"w-full text-sm table-auto\">\r\n                            <thead className=\"bg-primary/10\">\r\n                              <tr>\r\n                                {targetData?.columns?.map((col: any, idx: number) => (\r\n                                  <th key={idx} className=\"px-3 py-2 text-left text-foreground-muted font-medium border-b border-primary/30 whitespace-nowrap\">\r\n                                    {col.name}\r\n                                  </th>\r\n                                ))}\r\n                              </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                              {paginatedTargetRecords.length > 0 ? (\r\n                                paginatedTargetRecords.map((record: any, rowIdx: number) => {\r\n                                  // Debug: log record structure\r\n                                  if (process.env.NODE_ENV === 'development' && rowIdx === 0) {\r\n                                    console.log('[Target Record] First record structure:', record)\r\n                                    console.log('[Target Record] Record keys:', Object.keys(record))\r\n                                    console.log('[Target Record] Columns:', targetData.columns)\r\n                                  }\r\n\r\n                                  // Get all record keys if columns don't match\r\n                                  const recordKeys = Object.keys(record)\r\n                                  const columnsToUse = targetData.columns.length > 0\r\n                                    ? targetData.columns\r\n                                    : recordKeys.map((key, idx) => ({ name: key, type: 'unknown', index: idx }))\r\n\r\n                                  return (\r\n                                    <tr key={rowIdx} className=\"border-b border-primary/20 hover:bg-primary/10 transition-colors\">\r\n                                      {columnsToUse.map((col: any, colIdx: number) => {\r\n                                        // Try multiple ways to access the value\r\n                                        let value = record[col.name] ?? record[col.name.toLowerCase()] ?? record[col.name.toUpperCase()] ?? null\r\n\r\n                                        // If still null, try accessing by index if record is array-like\r\n                                        if (value === null && Array.isArray(record)) {\r\n                                          value = record[colIdx] ?? null\r\n                                        }\r\n\r\n                                        return (\r\n                                          <td key={colIdx} className=\"px-3 py-2 text-foreground text-xs whitespace-nowrap\">\r\n                                            {value !== null && value !== undefined\r\n                                              ? String(value).substring(0, 50)\r\n                                              : <span className=\"text-foreground-muted\">NULL</span>}\r\n                                          </td>\r\n                                        )\r\n                                      })}\r\n                                    </tr>\r\n                                  )\r\n                                })\r\n                              ) : targetRecords.length > 0 ? (\r\n                                // If we have records but pagination is wrong, show all records\r\n                                targetRecords.map((record: any, rowIdx: number) => {\r\n                                  // Debug: log record structure\r\n                                  if (process.env.NODE_ENV === 'development' && rowIdx === 0) {\r\n                                    console.log('[Target Record] First record (fallback) structure:', record)\r\n                                    console.log('[Target Record] Record keys:', Object.keys(record))\r\n                                    console.log('[Target Record] Columns:', targetData.columns)\r\n                                  }\r\n\r\n                                  // Get all record keys if columns don't match\r\n                                  const recordKeys = Object.keys(record)\r\n                                  const columnsToUse = targetData.columns.length > 0\r\n                                    ? targetData.columns\r\n                                    : recordKeys.map((key, idx) => ({ name: key, type: 'unknown', index: idx }))\r\n\r\n                                  return (\r\n                                    <tr key={rowIdx} className=\"border-b border-primary/20 hover:bg-primary/10 transition-colors\">\r\n                                      {columnsToUse.map((col: any, colIdx: number) => {\r\n                                        // Try multiple ways to access the value\r\n                                        let value = record[col.name] ?? record[col.name.toLowerCase()] ?? record[col.name.toUpperCase()] ?? null\r\n\r\n                                        // If still null, try accessing by index if record is array-like\r\n                                        if (value === null && Array.isArray(record)) {\r\n                                          value = record[colIdx] ?? null\r\n                                        }\r\n\r\n                                        return (\r\n                                          <td key={colIdx} className=\"px-3 py-2 text-foreground text-xs whitespace-nowrap\">\r\n                                            {value !== null && value !== undefined\r\n                                              ? String(value).substring(0, 50)\r\n                                              : <span className=\"text-foreground-muted\">NULL</span>}\r\n                                          </td>\r\n                                        )\r\n                                      })}\r\n                                    </tr>\r\n                                  )\r\n                                })\r\n                              ) : (\r\n                                <tr>\r\n                                  <td colSpan={targetData?.columns?.length || 1} className=\"px-3 py-8 text-center text-foreground-muted\">\r\n                                    {targetData?.count === 0 || (targetRecords.length === 0 && (!targetData?.count || targetData.count === 0))\r\n                                      ? \"No data available in target table\"\r\n                                      : targetRecords.length === 0 && targetData?.count > 0\r\n                                        ? `Table exists with ${targetData.count} records, but none loaded. Please check the table structure.`\r\n                                        : `Showing ${targetRecords.length} records (page ${targetPage} of ${targetTotalPages})`}\r\n                                  </td>\r\n                                </tr>\r\n                              )}\r\n                            </tbody>\r\n                          </table>\r\n                        </div>\r\n                      </div>\r\n                      {/* Target Table Pagination */}\r\n                      {targetTotalPages > 1 && (\r\n                        <div className=\"flex items-center justify-between pt-3 border-t border-primary/30\">\r\n                          <div className=\"text-xs text-foreground-muted\">\r\n                            Page {targetPage} of {targetTotalPages} ({targetStartIndex + 1}-{Math.min(targetEndIndex, targetRecords.length)} of {targetRecords.length})\r\n                          </div>\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              onClick={() => setTargetPage(prev => Math.max(1, prev - 1))}\r\n                              disabled={targetPage === 1 || loadingData}\r\n                              className=\"bg-transparent border-border hover:bg-surface-hover h-7 px-2\"\r\n                            >\r\n                              <ChevronLeft className=\"w-3 h-3\" />\r\n                            </Button>\r\n                            <div className=\"flex items-center gap-1\">\r\n                              {Array.from({ length: Math.min(targetTotalPages, 5) }, (_, i) => {\r\n                                let pageNum;\r\n                                if (targetTotalPages <= 5) {\r\n                                  pageNum = i + 1;\r\n                                } else if (targetPage <= 3) {\r\n                                  pageNum = i + 1;\r\n                                } else if (targetPage >= targetTotalPages - 2) {\r\n                                  pageNum = targetTotalPages - 4 + i;\r\n                                } else {\r\n                                  pageNum = targetPage - 2 + i;\r\n                                }\r\n                                return (\r\n                                  <Button\r\n                                    key={pageNum}\r\n                                    variant={targetPage === pageNum ? \"default\" : \"outline\"}\r\n                                    size=\"sm\"\r\n                                    onClick={() => setTargetPage(pageNum)}\r\n                                    disabled={loadingData}\r\n                                    className={\r\n                                      targetPage === pageNum\r\n                                        ? \"bg-primary hover:bg-primary/90 text-foreground h-7 px-2\"\r\n                                        : \"bg-transparent border-border hover:bg-surface-hover h-7 px-2\"\r\n                                    }\r\n                                  >\r\n                                    {pageNum}\r\n                                  </Button>\r\n                                );\r\n                              })}\r\n                            </div>\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              onClick={() => setTargetPage(prev => Math.min(targetTotalPages, prev + 1))}\r\n                              disabled={targetPage === targetTotalPages || loadingData}\r\n                              className=\"bg-transparent border-border hover:bg-surface-hover h-7 px-2\"\r\n                            >\r\n                              <ChevronRight className=\"w-3 h-3\" />\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </Card>\r\n                ) : (\r\n                  <Card className=\"bg-surface border-2 border-primary/50 p-6 shadow-lg\">\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"flex items-center gap-2 pb-2 border-b border-primary/50\">\r\n                        <Database className=\"w-4 h-4 text-primary\" />\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"text-sm font-bold text-foreground\">Target Table</p>\r\n                          <p className=\"text-xs text-foreground-muted mt-1\">\r\n                            {(() => {\r\n                              // Prevent duplicate schema in display (e.g., \"public.public.table\" -> \"public.table\")\r\n                              const tableName = selectedTable.target\r\n                              const schema = selectedTable.targetSchema\r\n                              if (schema && tableName.startsWith(`${schema}.`)) {\r\n                                return tableName // Table already includes schema, don't duplicate\r\n                              }\r\n                              return schema ? `${schema}.${tableName}` : tableName\r\n                            })()}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-sm p-6 bg-primary/5 rounded-lg border-2 border-dashed border-primary/40 text-center\">\r\n                        {loadingData ? (\r\n                          <div className=\"text-foreground-muted\">\r\n                            <Loader2 className=\"w-5 h-5 animate-spin mx-auto mb-2\" />\r\n                            Loading target data...\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"text-foreground-muted\">\r\n                            <p className=\"font-medium\">Target data not available</p>\r\n                            <p className=\"text-xs mt-1\">Please check the target database connection</p>\r\n                          </div>\r\n                        )}\r\n                        {!loadingData && !targetData && (\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={async () => {\r\n                              if (!selectedTable) return\r\n                              setRetryingTarget(true)\r\n                              setDataError(null)\r\n                              try {\r\n                                const tm = {\r\n                                  source_table: selectedTable.source,\r\n                                  target_table: selectedTable.target,\r\n                                  source_schema: selectedTable.sourceSchema,\r\n                                  target_schema: selectedTable.targetSchema\r\n                                }\r\n                                // Handle \"undefined\" schema string - convert to undefined/null\r\n                                let targetSchema = tm.target_schema && tm.target_schema !== \"undefined\" && tm.target_schema.trim() !== \"\"\r\n                                  ? tm.target_schema.trim()\r\n                                  : undefined\r\n\r\n                                // SQL Server uses \"dbo\" as default schema, not \"public\"\r\n                                const targetConn = connections.find(c => String(c.id) === String(pipeline.target_connection_id))\r\n                                const isTargetSQLServer = targetConn?.connection_type?.toLowerCase() === 'sqlserver' || targetConn?.connection_type?.toLowerCase() === 'sql_server'\r\n                                if (isTargetSQLServer && targetSchema?.toLowerCase() === 'public') {\r\n                                  targetSchema = undefined\r\n                                }\r\n\r\n                                const targetConnectionId = pipeline.target_connection_uuid || pipeline.target_connection_id!\r\n                                const targetResult = await apiClient.getTableData(\r\n                                  targetConnectionId,\r\n                                  tm.target_table,\r\n                                  targetSchema, // Use cleaned schema (undefined if \"undefined\" string or SQL Server \"public\")\r\n                                  1000 // Increased from 50 to fetch all records\r\n                                )\r\n                                setTargetData(targetResult)\r\n                                setDataError(null)\r\n                              } catch (retryError: any) {\r\n                                console.error(\"[Compare] Retry failed:\", retryError)\r\n                                const retryErrMsg = retryError.message || \"Retry failed. Please check the target database connection.\"\r\n                                setDataError(`⚠️ Target table unavailable: ${retryErrMsg}`)\r\n                              } finally {\r\n                                setRetryingTarget(false)\r\n                              }\r\n                            }}\r\n                            disabled={retryingTarget}\r\n                            className=\"mt-4 bg-primary/10 border-primary/30 text-primary hover:bg-primary/20 hover:border-primary/50\"\r\n                          >\r\n                            {retryingTarget ? (\r\n                              <>\r\n                                <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                                Retrying...\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                <Activity className=\"w-4 h-4 mr-2\" />\r\n                                Retry Target\r\n                              </>\r\n                            )}\r\n                          </Button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </Card>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </Card>\r\n      )}\r\n      <ConfirmDialogComponent />\r\n      <ErrorToastComponent />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}