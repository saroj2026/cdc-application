{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Saroj/Desktop/cdcteam-feature-as400integration/cdcteam-feature-as400-integration/seg-cdc-application/frontend/app/pipelines/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, useRef, useMemo } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Plus, Settings, Play, Pause, Square, Trash2, AlertCircle, Clock, Loader2, Edit2, Database, GitBranch, Activity, Workflow, ChevronLeft, ChevronRight } from \"lucide-react\"\r\nimport { PageHeader } from \"@/components/ui/page-header\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { PipelineModal } from \"@/components/pipelines/pipeline-modal\"\r\nimport { PipelineWizard } from \"@/components/pipelines/pipeline-wizard\"\r\nimport { PipelineDetail } from \"@/components/pipelines/pipeline-detail\"\r\nimport { useAppDispatch, useAppSelector } from \"@/lib/store/hooks\"\r\nimport { useErrorToast } from \"@/components/ui/error-toast\"\r\nimport {\r\n  fetchPipelines,\r\n  createPipeline,\r\n  updatePipeline,\r\n  deletePipeline,\r\n  triggerPipeline,\r\n  pausePipeline,\r\n  stopPipeline,\r\n  setSelectedPipeline,\r\n} from \"@/lib/store/slices/pipelineSlice\"\r\nimport { fetchReplicationEvents } from \"@/lib/store/slices/monitoringSlice\"\r\nimport { formatDistanceToNow } from \"date-fns\"\r\nimport { ProtectedPage } from \"@/components/auth/ProtectedPage\"\r\n\r\nexport default function PipelinesPage() {\r\n  const dispatch = useAppDispatch()\r\n  const { pipelines, isLoading, error } = useAppSelector((state) => state.pipelines)\r\n  const { connections } = useAppSelector((state) => state.connections)\r\n  const { events } = useAppSelector((state) => state.monitoring)\r\n  const { showError, ErrorToastComponent } = useErrorToast()\r\n  const [isModalOpen, setIsModalOpen] = useState(false)\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false)\r\n  const [editingPipeline, setEditingPipeline] = useState<any>(null)\r\n  const [selectedPipelineId, setSelectedPipelineId] = useState<number | null>(null)\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const pipelinesPerPage = 8\r\n\r\n  // Fetch pipelines on mount and when navigating back to this page\r\n  useEffect(() => {\r\n    // Always fetch pipelines to get latest status (including on refresh)\r\n    dispatch(fetchPipelines())\r\n    \r\n    // Fetch replication events to calculate real progress\r\n    dispatch(fetchReplicationEvents({ limit: 1000, todayOnly: false }))\r\n\r\n    // Also fetch connections for pipeline wizard (only if not already loaded)\r\n    if (connections.length === 0) {\r\n      import(\"@/lib/store/slices/connectionSlice\").then(({ fetchConnections }) => {\r\n        dispatch(fetchConnections())\r\n      })\r\n    }\r\n  }, [dispatch, connections.length])\r\n\r\n  // Auto-refresh pipelines every 10 seconds to keep status updated\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      dispatch(fetchPipelines())\r\n    }, 10000) // Refresh every 10 seconds\r\n    \r\n    return () => clearInterval(interval)\r\n  }, [dispatch])\r\n  \r\n  // Auto-refresh events every 5 seconds to update progress bars in real-time\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      dispatch(fetchReplicationEvents({ limit: 10000, todayOnly: false }))\r\n    }, 5000) // Refresh every 5 seconds\r\n    \r\n    return () => clearInterval(interval)\r\n  }, [dispatch])\r\n  \r\n  // Helper function to calculate replication stats for a pipeline\r\n  const getPipelineReplicationStats = (pipelineId: string | number) => {\r\n    const pipelineIdStr = String(pipelineId)\r\n    const pipelineEvents = events.filter(e => String(e.pipeline_id) === pipelineIdStr)\r\n    const totalEvents = pipelineEvents.length\r\n    const successEvents = pipelineEvents.filter(e => e.status === 'applied' || e.status === 'success').length\r\n    const failedEvents = pipelineEvents.filter(e => e.status === 'failed' || e.status === 'error').length\r\n    const successRate = totalEvents > 0 ? Math.round((successEvents / totalEvents) * 100) : 0\r\n    \r\n    return {\r\n      totalEvents,\r\n      successEvents,\r\n      failedEvents,\r\n      successRate\r\n    }\r\n  }\r\n\r\n  // Helper function to parse table name (handles schema.table format)\r\n  const parseTableName = (tableName: string): { schema?: string; table: string } => {\r\n    if (!tableName) return { table: tableName }\r\n\r\n    // Check if table name contains a dot (schema.table format)\r\n    const parts = tableName.split('.')\r\n    if (parts.length === 2) {\r\n      const schema = parts[0].trim()\r\n      const table = parts[1].trim()\r\n      // Don't treat \"undefined\" as a valid schema name\r\n      if (schema && schema !== \"undefined\") {\r\n        return {\r\n          schema: schema,\r\n          table: table\r\n        }\r\n      }\r\n      // If schema is \"undefined\", treat as no schema\r\n      return { table: table }\r\n    }\r\n    return { table: tableName.trim() }\r\n  }\r\n\r\n  const handleAddPipeline = async (pipelineData: any) => {\r\n    try {\r\n      // Find connection IDs by name\r\n      const sourceConn = connections.find(c => c.name === pipelineData.sourceConnection)\r\n      const targetConn = connections.find(c => c.name === pipelineData.targetConnection)\r\n\r\n      if (!sourceConn || !targetConn) {\r\n        alert(\"Please select valid source and target connections\")\r\n        return\r\n      }\r\n\r\n      // Parse table mappings - handle both tableMapping array and tables array\r\n      const tableMappings = []\r\n\r\n      if (pipelineData.tableMapping && Array.isArray(pipelineData.tableMapping)) {\r\n        // Use tableMapping if available\r\n        for (const tm of pipelineData.tableMapping) {\r\n          const sourceName = tm.source || tm.sourceTable || \"\"\r\n          const targetName = tm.target || tm.targetTable || sourceName\r\n\r\n          if (!sourceName || !targetName) {\r\n            console.warn(\"Skipping invalid table mapping:\", tm)\r\n            continue\r\n          }\r\n\r\n          const sourceParsed = parseTableName(sourceName)\r\n          const targetParsed = parseTableName(targetName)\r\n\r\n          if (!sourceParsed.table || !targetParsed.table) {\r\n            console.warn(\"Skipping table mapping with empty table name:\", { sourceParsed, targetParsed })\r\n            continue\r\n          }\r\n\r\n          const mapping: any = {\r\n            source_table: sourceParsed.table,\r\n            target_table: targetParsed.table,\r\n          }\r\n\r\n          // Only include schema if it exists\r\n          if (sourceParsed.schema) {\r\n            mapping.source_schema = sourceParsed.schema\r\n          }\r\n          if (targetParsed.schema) {\r\n            mapping.target_schema = targetParsed.schema\r\n          }\r\n\r\n          tableMappings.push(mapping)\r\n        }\r\n      } else if (pipelineData.tables && Array.isArray(pipelineData.tables)) {\r\n        // Fallback to tables array if tableMapping is not available\r\n        for (const tableName of pipelineData.tables) {\r\n          if (!tableName) {\r\n            console.warn(\"Skipping empty table name\")\r\n            continue\r\n          }\r\n\r\n          const sourceParsed = parseTableName(tableName)\r\n          // Use tableMapping object if available, otherwise use same name\r\n          const targetName = pipelineData.tableMapping?.[tableName] || tableName\r\n          const targetParsed = parseTableName(targetName)\r\n\r\n          if (!sourceParsed.table || !targetParsed.table) {\r\n            console.warn(\"Skipping table mapping with empty table name:\", { sourceParsed, targetParsed })\r\n            continue\r\n          }\r\n\r\n          const mapping: any = {\r\n            source_table: sourceParsed.table,\r\n            target_table: targetParsed.table,\r\n          }\r\n\r\n          // Only include schema if it exists\r\n          if (sourceParsed.schema) {\r\n            mapping.source_schema = sourceParsed.schema\r\n          }\r\n          if (targetParsed.schema) {\r\n            mapping.target_schema = targetParsed.schema\r\n          }\r\n\r\n          tableMappings.push(mapping)\r\n        }\r\n      }\r\n\r\n      if (tableMappings.length === 0) {\r\n        alert(\"Please select at least one table for replication\")\r\n        return\r\n      }\r\n\r\n      // Validate all table mappings have required fields\r\n      const invalidMappings = tableMappings.filter(tm => !tm.source_table || !tm.target_table)\r\n      if (invalidMappings.length > 0) {\r\n        console.error(\"[Pipeline] Invalid table mappings found:\", invalidMappings)\r\n        showError(\"Invalid table mappings detected. Please check:\\n- All mappings must have source_table and target_table\\n- Table names cannot be empty\", \"Validation Error\")\r\n        return\r\n      }\r\n\r\n      // Build payload with validated data\r\n      const pipelinePayload = {\r\n        name: (pipelineData.name || \"\").trim(),\r\n        description: (pipelineData.description || \"\").trim(),\r\n        source_connection_id: String(sourceConn.id), // Ensure it's a string\r\n        target_connection_id: String(targetConn.id), // Ensure it's a string\r\n        full_load_type: pipelineData.mode === \"full_load\" ? \"overwrite\" :\r\n          pipelineData.mode === \"cdc_only\" ? \"append\" : \"overwrite\",\r\n        cdc_enabled: pipelineData.mode !== \"full_load\",\r\n        cdc_filters: pipelineData.cdc_filters || [],\r\n        table_mappings: tableMappings.map(tm => {\r\n          const mapping: { source_schema?: string; source_table: string; target_schema?: string; target_table: string } = {\r\n            source_table: tm.source_table.trim(),\r\n            target_table: tm.target_table.trim(),\r\n          }\r\n          // Only include schema if it exists, is not empty, and is not \"undefined\"\r\n          if (tm.source_schema && tm.source_schema.trim() !== \"\" && tm.source_schema.trim() !== \"undefined\") {\r\n            mapping.source_schema = tm.source_schema.trim()\r\n          }\r\n          if (tm.target_schema && tm.target_schema.trim() !== \"\" && tm.target_schema.trim() !== \"undefined\") {\r\n            mapping.target_schema = tm.target_schema.trim()\r\n          }\r\n          return mapping\r\n        }),\r\n      }\r\n\r\n      // Validate payload before sending\r\n      if (!pipelinePayload.name || pipelinePayload.name.trim() === \"\") {\r\n        showError(\"Pipeline name is required\", \"Validation Error\")\r\n        return\r\n      }\r\n\r\n      console.log(\"[Pipeline] Creating pipeline with validated payload:\", {\r\n        name: pipelinePayload.name,\r\n        source_connection_id: pipelinePayload.source_connection_id,\r\n        target_connection_id: pipelinePayload.target_connection_id,\r\n        table_mappings_count: pipelinePayload.table_mappings.length,\r\n        table_mappings: pipelinePayload.table_mappings,\r\n      })\r\n\r\n      await dispatch(createPipeline(pipelinePayload)).unwrap()\r\n      setIsModalOpen(false)\r\n    } catch (err: any) {\r\n      // Define pipelinePayload in catch scope for error logging\r\n      let pipelinePayload: any = null\r\n      try {\r\n        // Try to reconstruct payload for logging\r\n        const sourceConn = connections.find(c => c.name === pipelineData?.sourceConnection)\r\n        const targetConn = connections.find(c => c.name === pipelineData?.targetConnection)\r\n        if (sourceConn && targetConn) {\r\n          pipelinePayload = {\r\n            name: pipelineData?.name,\r\n            source_connection_id: String(sourceConn.id),\r\n            target_connection_id: String(targetConn.id),\r\n          }\r\n        }\r\n      } catch { }\r\n\r\n      console.error(\"Failed to create pipeline:\", err)\r\n      console.error(\"Error type:\", typeof err)\r\n      console.error(\"Error constructor:\", err?.constructor?.name)\r\n\r\n      // Handle string errors (from Redux rejectWithValue)\r\n      const errorString = typeof err === 'string' ? err : err?.message || err?.payload || String(err)\r\n      console.error(\"Error string:\", errorString)\r\n\r\n      console.error(\"Error details:\", {\r\n        message: typeof err === 'string' ? err : err?.message,\r\n        name: err?.name,\r\n        code: err?.code,\r\n        status: err?.status || err?.response?.status,\r\n        response: err?.response?.data,\r\n        payload: pipelinePayload\r\n      })\r\n\r\n      // Extract detailed error message from various possible locations\r\n      let errorMessage = \"Failed to create pipeline\"\r\n\r\n      // Check Redux error format\r\n      if (err?.payload) {\r\n        errorMessage = err.payload\r\n      }\r\n      // Check axios response\r\n      else if (err?.response?.data?.detail) {\r\n        errorMessage = err.response.data.detail\r\n      }\r\n      // Check if error has message\r\n      else if (err?.message) {\r\n        errorMessage = err.message\r\n      }\r\n      // Check if error is a string\r\n      else if (typeof err === 'string') {\r\n        errorMessage = err\r\n      }\r\n      // Check for validation errors\r\n      else if (err?.response?.data?.errors) {\r\n        const validationErrors = err.response.data.errors.map((e: any) =>\r\n          `${e.loc?.join('.') || 'field'}: ${e.msg || e.message}`\r\n        ).join('\\n')\r\n        errorMessage = `Validation errors:\\n${validationErrors}`\r\n      }\r\n\r\n      // Show user-friendly error with troubleshooting steps\r\n      showError(errorMessage, \"Failed to Create Pipeline\")\r\n    }\r\n  }\r\n\r\n  const handleEditPipeline = async (pipelineData: any) => {\r\n    if (!editingPipeline) return\r\n\r\n    try {\r\n      // Find connection IDs by name\r\n      const sourceConn = connections.find(c => c.name === pipelineData.sourceConnection)\r\n      const targetConn = connections.find(c => c.name === pipelineData.targetConnection)\r\n\r\n      if (!sourceConn || !targetConn) {\r\n        alert(\"Please select valid source and target connections\")\r\n        return\r\n      }\r\n\r\n      // Parse table mappings - handle both tableMapping array and tables array\r\n      const tableMappings = []\r\n\r\n      if (pipelineData.tableMapping && Array.isArray(pipelineData.tableMapping)) {\r\n        // Use tableMapping if available\r\n        for (const tm of pipelineData.tableMapping) {\r\n          const sourceName = tm.source || tm.sourceTable || \"\"\r\n          const targetName = tm.target || tm.targetTable || sourceName\r\n\r\n          if (!sourceName || !targetName) {\r\n            console.warn(\"Skipping invalid table mapping:\", tm)\r\n            continue\r\n          }\r\n\r\n          const sourceParsed = parseTableName(sourceName)\r\n          const targetParsed = parseTableName(targetName)\r\n\r\n          if (!sourceParsed.table || !targetParsed.table) {\r\n            console.warn(\"Skipping table mapping with empty table name:\", { sourceParsed, targetParsed })\r\n            continue\r\n          }\r\n\r\n          const mapping: any = {\r\n            source_table: sourceParsed.table,\r\n            target_table: targetParsed.table,\r\n          }\r\n\r\n          // Only include schema if it exists\r\n          if (sourceParsed.schema) {\r\n            mapping.source_schema = sourceParsed.schema\r\n          }\r\n          if (targetParsed.schema) {\r\n            mapping.target_schema = targetParsed.schema\r\n          }\r\n\r\n          tableMappings.push(mapping)\r\n        }\r\n      } else if (pipelineData.tables && Array.isArray(pipelineData.tables)) {\r\n        // Fallback to tables array if tableMapping is not available\r\n        for (const tableName of pipelineData.tables) {\r\n          if (!tableName) {\r\n            console.warn(\"Skipping empty table name\")\r\n            continue\r\n          }\r\n\r\n          const sourceParsed = parseTableName(tableName)\r\n          // Use tableMapping object if available, otherwise use same name\r\n          const targetName = pipelineData.tableMapping?.[tableName] || tableName\r\n          const targetParsed = parseTableName(targetName)\r\n\r\n          if (!sourceParsed.table || !targetParsed.table) {\r\n            console.warn(\"Skipping table mapping with empty table name:\", { sourceParsed, targetParsed })\r\n            continue\r\n          }\r\n\r\n          const mapping: any = {\r\n            source_table: sourceParsed.table,\r\n            target_table: targetParsed.table,\r\n          }\r\n\r\n          // Only include schema if it exists\r\n          if (sourceParsed.schema) {\r\n            mapping.source_schema = sourceParsed.schema\r\n          }\r\n          if (targetParsed.schema) {\r\n            mapping.target_schema = targetParsed.schema\r\n          }\r\n\r\n          tableMappings.push(mapping)\r\n        }\r\n      }\r\n\r\n      if (tableMappings.length === 0) {\r\n        alert(\"Please select at least one table for replication\")\r\n        return\r\n      }\r\n\r\n      // Ensure connection IDs are strings\r\n      const pipelineDataPayload = {\r\n        name: pipelineData.name,\r\n        description: pipelineData.description || \"\",\r\n        source_connection_id: String(sourceConn.id),\r\n        target_connection_id: String(targetConn.id),\r\n        full_load_type: pipelineData.mode === \"full_load\" ? \"overwrite\" :\r\n          pipelineData.mode === \"cdc_only\" ? \"append\" : \"overwrite\",\r\n        cdc_enabled: pipelineData.mode !== \"full_load\",\r\n        cdc_filters: pipelineData.cdc_filters || [],\r\n        table_mappings: tableMappings,\r\n      }\r\n\r\n      console.log(\"Updating pipeline with payload:\", {\r\n        id: editingPipeline.id,\r\n        data: {\r\n          ...pipelineDataPayload,\r\n          table_mappings: tableMappings,\r\n        }\r\n      })\r\n\r\n      await dispatch(updatePipeline({\r\n        id: editingPipeline.id,\r\n        data: pipelineDataPayload,\r\n      })).unwrap()\r\n      setIsEditModalOpen(false)\r\n      setEditingPipeline(null)\r\n      dispatch(fetchPipelines())\r\n    } catch (err: any) {\r\n      console.error(\"Failed to update pipeline:\", err)\r\n      const errorMessage = err.response?.data?.detail || err.message || \"Failed to update pipeline\"\r\n      showError(errorMessage, \"Failed to Update Pipeline\")\r\n    }\r\n  }\r\n\r\n  const handleOpenEdit = (pipeline: any) => {\r\n    // Allow editing if pipeline is stopped, paused, or draft\r\n    const canEdit = pipeline.status === \"paused\" || pipeline.status === \"draft\" || pipeline.status === \"deleted\" || !pipeline.status || (pipeline.status !== \"active\" && pipeline.status !== \"running\")\r\n\r\n    if (!canEdit) {\r\n      showError(\"Please stop the pipeline before editing. Running pipelines cannot be modified.\", \"Cannot Edit Pipeline\")\r\n      return\r\n    }\r\n\r\n    // Find connection names for the wizard\r\n    const sourceConn = connections.find(c => c.id === pipeline.source_connection_id)\r\n    const targetConn = connections.find(c => c.id === pipeline.target_connection_id)\r\n\r\n    setEditingPipeline({\r\n      ...pipeline,\r\n      sourceConnection: sourceConn?.name || \"\",\r\n      targetConnection: targetConn?.name || \"\",\r\n    })\r\n    setIsEditModalOpen(true)\r\n  }\r\n\r\n  const handleDeletePipeline = async (id: number) => {\r\n    if (confirm(\"Are you sure you want to delete this pipeline? This action cannot be undone.\")) {\r\n      try {\r\n        await dispatch(deletePipeline(id)).unwrap()\r\n        // Refresh pipelines to remove deleted pipeline\r\n        dispatch(fetchPipelines())\r\n      } catch (err: any) {\r\n        console.error(\"Failed to delete pipeline:\", err)\r\n        const errorMessage = err?.payload || err?.message || err?.response?.data?.detail || \"Failed to delete pipeline\"\r\n        showError(errorMessage, \"Failed to Delete Pipeline\")\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleTriggerPipeline = async (id: number, runType: string = \"full_load\") => {\r\n    try {\r\n      // Optimistically update UI immediately (handled in Redux slice)\r\n      const result = await dispatch(triggerPipeline({ id, runType })).unwrap()\r\n      console.log(\"Pipeline triggered successfully:\", result)\r\n      // Refresh pipelines after longer delays to ensure backend status is updated\r\n      setTimeout(() => {\r\n        dispatch(fetchPipelines())\r\n      }, 3000)\r\n      setTimeout(() => {\r\n        dispatch(fetchPipelines())\r\n      }, 6000)\r\n    } catch (err: any) {\r\n      console.error(\"Failed to trigger pipeline:\", err)\r\n      // Extract error message from various possible locations\r\n      let errorMessage = \"Failed to start pipeline\"\r\n      \r\n      if (err?.payload) {\r\n        errorMessage = err.payload\r\n      } else if (err?.response?.data?.detail) {\r\n        errorMessage = err.response.data.detail\r\n      } else if (err?.response?.data?.message) {\r\n        errorMessage = err.response.data.message\r\n      } else if (err?.message) {\r\n        errorMessage = err.message\r\n      } else if (typeof err === 'string') {\r\n        errorMessage = err\r\n      }\r\n      \r\n      // Remove redundant \"Failed to trigger pipeline\" prefix if present\r\n      if (errorMessage.includes(\"Failed to trigger pipeline\")) {\r\n        errorMessage = errorMessage.replace(\"Failed to trigger pipeline\", \"\").trim()\r\n        if (errorMessage.startsWith(\":\")) {\r\n          errorMessage = errorMessage.substring(1).trim()\r\n        }\r\n      }\r\n      \r\n      // Show user-friendly error with full details\r\n      let displayError = errorMessage\r\n      \r\n      // Handle timeout errors specially\r\n      if (errorMessage.includes(\"timeout\") || errorMessage.includes(\"took too long\")) {\r\n        displayError = \"Pipeline start is taking longer than expected (over 2 minutes). This may indicate:\\n\\n\" +\r\n          \"1. Database connection issues\\n\" +\r\n          \"2. Kafka Connect server is slow or unresponsive\\n\" +\r\n          \"3. Large schema creation taking time\\n\" +\r\n          \"4. Connector setup is hanging\\n\\n\" +\r\n          \"Please check:\\n\" +\r\n          \"- Backend logs for detailed error information\\n\" +\r\n          \"- Kafka Connect server status at http://72.61.233.209:8083\\n\" +\r\n          \"- Database connectivity\\n\" +\r\n          \"- Network connectivity between backend and Kafka Connect\"\r\n        showError(displayError, \"Pipeline Start Timeout\")\r\n        return // Don't continue with other error processing for timeouts\r\n      }\r\n      \r\n      // Extract actual error from Debezium connector error\r\n      if (displayError.includes(\"Failed to create Debezium connector\")) {\r\n        // Extract the actual Kafka Connect error after the colon\r\n        const match = displayError.match(/Failed to create Debezium connector[^:]*:\\s*(.+)/)\r\n        if (match && match[1]) {\r\n          displayError = match[1].trim()\r\n        }\r\n      }\r\n      \r\n      // Remove HTTP error wrapper if present\r\n      if (displayError.includes(\"400 Client Error\") || displayError.includes(\"Bad Request\")) {\r\n        // Try to extract the actual error message\r\n        const parts = displayError.split(\"for url:\")\r\n        if (parts.length > 1) {\r\n          // The actual error should be before \"for url:\" or in the response data\r\n          displayError = parts[0].replace(\"400 Client Error:\", \"\").replace(\"Bad Request\", \"\").trim()\r\n        }\r\n        // Also check response data\r\n        if (err?.response?.data?.detail) {\r\n          displayError = err.response.data.detail\r\n        }\r\n      }\r\n      \r\n      // If still generic, try to get from response\r\n      if (displayError.includes(\"400\") && err?.response?.data?.detail) {\r\n        displayError = err.response.data.detail\r\n      }\r\n      \r\n      showError(displayError, \"Failed to Start Pipeline\")\r\n    }\r\n    // Still refresh to get current status even on error (will revert optimistic update)\r\n    setTimeout(() => {\r\n      dispatch(fetchPipelines())\r\n    }, 1000)\r\n  }\r\n\r\n  const handlePausePipeline = async (id: number) => {\r\n    try {\r\n      await dispatch(pausePipeline(id)).unwrap()\r\n      // Refresh pipelines to get updated status\r\n      setTimeout(() => {\r\n        dispatch(fetchPipelines())\r\n      }, 1000)\r\n    } catch (err: any) {\r\n      console.error(\"Failed to pause pipeline:\", err)\r\n      const errorMessage = err?.payload || err?.message || err?.response?.data?.detail || \"Failed to pause pipeline\"\r\n      showError(errorMessage, \"Failed to Pause Pipeline\")\r\n    }\r\n  }\r\n\r\n  const handleStopPipeline = async (id: number) => {\r\n    if (!confirm(\"Are you sure you want to stop this pipeline?\")) {\r\n      return\r\n    }\r\n    try {\r\n      await dispatch(stopPipeline(id)).unwrap()\r\n      // Refresh pipelines to get updated status\r\n      setTimeout(() => {\r\n        dispatch(fetchPipelines())\r\n      }, 1000)\r\n    } catch (err: any) {\r\n      console.error(\"Failed to stop pipeline:\", err)\r\n      const errorMessage = err?.payload || err?.message || err?.response?.data?.detail || \"Failed to stop pipeline\"\r\n      showError(errorMessage, \"Failed to Stop Pipeline\")\r\n    }\r\n  }\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case \"active\":\r\n        return <div className=\"w-3 h-3 rounded-full bg-success animate-pulse\"></div>\r\n      case \"paused\":\r\n        return <Pause className=\"w-4 h-4 text-warning\" />\r\n      case \"error\":\r\n        return <AlertCircle className=\"w-4 h-4 text-error\" />\r\n      default:\r\n        return <Clock className=\"w-4 h-4 text-muted-foreground\" />\r\n    }\r\n  }\r\n\r\n  const getSourceConnectionName = (sourceId: number) => {\r\n    const conn = connections.find(c => c.id === sourceId)\r\n    return conn?.name || `Connection ${sourceId}`\r\n  }\r\n\r\n  const getTargetConnectionName = (targetId: number) => {\r\n    const conn = connections.find(c => c.id === targetId)\r\n    return conn?.name || `Connection ${targetId}`\r\n  }\r\n\r\n  // Pagination logic\r\n  const totalPages = Math.ceil(pipelines.length / pipelinesPerPage)\r\n  const startIndex = (currentPage - 1) * pipelinesPerPage\r\n  const endIndex = startIndex + pipelinesPerPage\r\n  const paginatedPipelines = useMemo(() => {\r\n    const pipelinesArray = Array.isArray(pipelines) ? pipelines : []\r\n    return pipelinesArray.slice(startIndex, endIndex)\r\n  }, [pipelines, startIndex, endIndex])\r\n\r\n  // Reset to page 1 when pipelines change\r\n  useEffect(() => {\r\n    if (currentPage > totalPages && totalPages > 0) {\r\n      setCurrentPage(1)\r\n    }\r\n  }, [pipelines.length, totalPages, currentPage])\r\n\r\n  if (selectedPipelineId) {\r\n    const pipeline = pipelines.find((p) => p.id === selectedPipelineId)\r\n    if (pipeline) {\r\n      return (\r\n        <>\r\n          <PipelineDetail pipeline={pipeline} onBack={() => setSelectedPipelineId(null)} />\r\n          <ErrorToastComponent />\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ErrorToastComponent />\r\n      <ProtectedPage path=\"/pipelines\" requiredPermission=\"create_pipeline\">\r\n      <div className=\"p-6 space-y-6\">\r\n        <PageHeader\r\n          title=\"Replication Pipelines\"\r\n        subtitle=\"Create and manage data replication pipelines\"\r\n        icon={Workflow}\r\n        action={\r\n          <Button onClick={() => setIsModalOpen(true)} className=\"bg-primary hover:bg-primary/90 text-foreground gap-2\">\r\n            <Plus className=\"w-4 h-4\" />\r\n            New Pipeline\r\n          </Button>\r\n        }\r\n      />\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <div className=\"p-4 bg-error/10 border border-error/30 rounded-lg\">\r\n          <p className=\"text-sm text-error\">{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Loading State */}\r\n      {isLoading && pipelines.length === 0 && (\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <Loader2 className=\"w-6 h-6 animate-spin text-foreground-muted\" />\r\n          <span className=\"ml-2 text-foreground-muted\">Loading pipelines...</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Empty State */}\r\n      {!isLoading && pipelines.length === 0 && (\r\n        <div className=\"text-center py-12\">\r\n          <p className=\"text-foreground-muted mb-4\">No pipelines found</p>\r\n          <Button\r\n            onClick={() => setIsModalOpen(true)}\r\n            className=\"bg-primary hover:bg-primary/90 text-foreground gap-2\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            Create First Pipeline\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Pipelines Grid */}\r\n      {pipelines.length > 0 && (\r\n        <>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3\">\r\n            {paginatedPipelines.map((pipeline) => (\r\n            <Card\r\n              key={pipeline.id}\r\n              className=\"bg-gradient-to-br from-purple-500/10 to-indigo-500/5 border-purple-500/20 hover:border-purple-500/40 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 group cursor-pointer relative overflow-hidden rounded-lg\"\r\n              onClick={() => setSelectedPipelineId(pipeline.id)}\r\n            >\r\n              {/* Animated Green Bar at Top of Card - Always Visible When Running */}\r\n              {(pipeline.status === \"active\" || pipeline.status === \"running\") && (\r\n                <div \r\n                  className=\"absolute top-0 left-0 right-0 z-50 rounded-t-lg\"\r\n                  style={{ \r\n                    height: '5px',\r\n                    backgroundColor: '#22c55e',\r\n                    boxShadow: '0 2px 4px rgba(34, 197, 94, 0.4)'\r\n                  }}\r\n                >\r\n                  <div \r\n                    className=\"h-full w-full relative\"\r\n                    style={{ backgroundColor: '#22c55e' }}\r\n                  >\r\n                    <div \r\n                      className=\"absolute inset-0\"\r\n                      style={{\r\n                        backgroundColor: '#16a34a',\r\n                        animation: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite'\r\n                      }}\r\n                    ></div>\r\n                    <div \r\n                      className=\"absolute inset-0\"\r\n                      style={{\r\n                        background: 'linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.9), transparent)',\r\n                        backgroundSize: '200% 100%',\r\n                        animation: 'shimmer 1.5s infinite'\r\n                      }}\r\n                    ></div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {/* Header with Status */}\r\n              <div className=\"p-4 border-b border-border relative overflow-hidden\">\r\n\r\n                {/* Pipeline Icon - Top Right */}\r\n                <div className=\"absolute top-4 right-4 z-10\">\r\n                  <div className=\"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors\">\r\n                    <Workflow className=\"w-5 h-5 text-primary\" />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-start justify-between mb-2 pr-12\">\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center gap-2 mb-1.5\">\r\n                      {getStatusIcon(pipeline.status)}\r\n                      <h3 className=\"text-base font-semibold text-foreground truncate group-hover:text-primary transition-colors\">\r\n                        {pipeline.name}\r\n                      </h3>\r\n                    </div>\r\n                    {pipeline.description && (\r\n                      <p className=\"text-xs text-foreground-muted line-clamp-1 mb-2\">{pipeline.description}</p>\r\n                    )}\r\n                    <div className=\"flex items-center gap-1.5 flex-nowrap\">\r\n                      {(pipeline.status === \"active\" || pipeline.status === \"running\") && (\r\n                        <Badge className=\"bg-success/20 text-success border border-success/30 text-xs px-1.5 py-0.5 whitespace-nowrap flex-shrink-0\">\r\n                          <div className=\"w-1.5 h-1.5 rounded-full bg-success mr-1 animate-pulse\"></div>\r\n                          Running\r\n                        </Badge>\r\n                      )}\r\n                      <Badge\r\n                        className={\r\n                          `text-xs px-1.5 py-0.5 whitespace-nowrap flex-shrink-0 ${pipeline.full_load_type === \"overwrite\" && pipeline.cdc_enabled\r\n                            ? \"bg-primary/20 text-primary border border-primary/30\"\r\n                            : pipeline.cdc_enabled\r\n                              ? \"bg-info/20 text-info border border-info/30\"\r\n                              : \"bg-warning/20 text-warning border border-warning/30\"\r\n                          }`\r\n                        }\r\n                      >\r\n                        {pipeline.full_load_type === \"overwrite\" && pipeline.cdc_enabled\r\n                          ? \"Full + CDC\"\r\n                          : pipeline.cdc_enabled\r\n                            ? \"CDC\"\r\n                            : \"Full\"}\r\n                      </Badge>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Connection Flow */}\r\n                <div className=\"flex items-center gap-1.5 text-xs text-foreground-muted mt-2\">\r\n                  <Database className=\"w-3 h-3 text-primary\" />\r\n                  <span className=\"truncate flex-1\">{getSourceConnectionName(pipeline.source_connection_id)}</span>\r\n                  <span className=\"text-info\">â†’</span>\r\n                  <Database className=\"w-3 h-3 text-info\" />\r\n                  <span className=\"truncate flex-1\">{getTargetConnectionName(pipeline.target_connection_id)}</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Stats Grid */}\r\n              <div className=\"p-4 grid grid-cols-2 gap-3\">\r\n                {(() => {\r\n                  const stats = getPipelineReplicationStats(pipeline.id)\r\n                  return (\r\n                    <>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"p-1.5 bg-primary/10 rounded-md group-hover:bg-primary/20 transition-colors\">\r\n                          <GitBranch className=\"w-3.5 h-3.5 text-primary\" />\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-xs text-foreground-muted\">Tables</p>\r\n                          <p className=\"text-sm font-semibold text-foreground\">{pipeline.table_mappings?.length || 0}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"p-1.5 bg-info/10 rounded-md group-hover:bg-info/20 transition-colors\">\r\n                          <Activity className=\"w-3.5 h-3.5 text-info\" />\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-xs text-foreground-muted\">Events</p>\r\n                          <p className=\"text-sm font-semibold text-foreground\">{stats.totalEvents.toLocaleString()}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"p-1.5 bg-success/10 rounded-md group-hover:bg-success/20 transition-colors\">\r\n                          <Clock className=\"w-3.5 h-3.5 text-success\" />\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-xs text-foreground-muted\">Success</p>\r\n                          <p className=\"text-sm font-semibold text-foreground\">{stats.successEvents.toLocaleString()}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"p-1.5 bg-warning/10 rounded-md group-hover:bg-warning/20 transition-colors\">\r\n                          <Database className=\"w-3.5 h-3.5 text-warning\" />\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-xs text-foreground-muted\">Rate</p>\r\n                          <p className=\"text-sm font-semibold text-foreground\">{stats.successRate}%</p>\r\n                        </div>\r\n                      </div>\r\n                    </>\r\n                  )\r\n                })()}\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"p-3 pt-0 flex items-center justify-between gap-2 border-t border-border\">\r\n                <div className=\"flex gap-1\">\r\n                  {pipeline.status === \"active\" || pipeline.status === \"running\" ? (\r\n                    <>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"h-7 px-2 bg-transparent border-border hover:bg-surface-hover hover:border-primary/50 transition-all\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation()\r\n                          handlePausePipeline(pipeline.id)\r\n                        }}\r\n                        disabled={isLoading}\r\n                        title=\"Pause\"\r\n                      >\r\n                        <Pause className=\"w-3 h-3\" />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"h-7 px-2 bg-transparent border-border hover:bg-surface-hover hover:border-error/50 text-error hover:text-error transition-all\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation()\r\n                          handleStopPipeline(pipeline.id)\r\n                        }}\r\n                        disabled={isLoading}\r\n                        title=\"Stop\"\r\n                      >\r\n                        <Square className=\"w-3 h-3\" />\r\n                      </Button>\r\n                    </>\r\n                  ) : (\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      className=\"h-7 px-2 bg-transparent border-border hover:bg-primary/10 hover:border-primary/50 transition-all\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation()\r\n                        handleTriggerPipeline(pipeline.id, \"full_load\")\r\n                      }}\r\n                      disabled={isLoading}\r\n                      title=\"Run\"\r\n                    >\r\n                      <Play className=\"w-3 h-3\" />\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n                <div className=\"flex gap-1\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    className=\"h-7 px-2 bg-transparent border-border hover:bg-surface-hover hover:border-primary/50 transition-all\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation()\r\n                      handleOpenEdit(pipeline)\r\n                    }}\r\n                    title=\"Edit\"\r\n                  >\r\n                    <Edit2 className=\"w-3 h-3\" />\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    className=\"h-7 px-2 bg-transparent border-border hover:bg-surface-hover hover:border-primary/50 transition-all\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation()\r\n                      setSelectedPipelineId(pipeline.id)\r\n                    }}\r\n                    title=\"Details\"\r\n                  >\r\n                    <Settings className=\"w-3 h-3\" />\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    className=\"h-7 px-2 bg-transparent border-border hover:bg-surface-hover hover:border-error/50 text-error hover:text-error transition-all\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation()\r\n                      handleDeletePipeline(pipeline.id)\r\n                    }}\r\n                    disabled={isLoading}\r\n                    title=\"Delete\"\r\n                  >\r\n                    <Trash2 className=\"w-3 h-3\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Pagination Controls */}\r\n          {totalPages > 1 && (\r\n            <div className=\"flex items-center justify-between pt-6 border-t border-border\">\r\n              <div className=\"text-sm text-foreground-muted\">\r\n                Showing <span className=\"font-semibold text-foreground\">{startIndex + 1}</span> to{\" \"}\r\n                <span className=\"font-semibold text-foreground\">\r\n                  {Math.min(endIndex, pipelines.length)}\r\n                </span>{\" \"}\r\n                of <span className=\"font-semibold text-foreground\">{pipelines.length}</span> pipelines\r\n              </div>\r\n              \r\n              <div className=\"flex items-center gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\r\n                  disabled={currentPage === 1}\r\n                  className=\"border-border hover:bg-surface-hover disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  <ChevronLeft className=\"w-4 h-4 mr-1\" />\r\n                  Previous\r\n                </Button>\r\n                \r\n                <div className=\"flex items-center gap-1\">\r\n                  {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => {\r\n                    // Show first page, last page, current page, and pages around current\r\n                    if (\r\n                      page === 1 ||\r\n                      page === totalPages ||\r\n                      (page >= currentPage - 1 && page <= currentPage + 1)\r\n                    ) {\r\n                      return (\r\n                        <Button\r\n                          key={page}\r\n                          variant={currentPage === page ? \"default\" : \"outline\"}\r\n                          size=\"sm\"\r\n                          onClick={() => setCurrentPage(page)}\r\n                          className={`min-w-[40px] ${\r\n                            currentPage === page\r\n                              ? \"bg-primary text-white\"\r\n                              : \"border-border hover:bg-surface-hover\"\r\n                          }`}\r\n                        >\r\n                          {page}\r\n                        </Button>\r\n                      )\r\n                    } else if (\r\n                      page === currentPage - 2 ||\r\n                      page === currentPage + 2\r\n                    ) {\r\n                      return (\r\n                        <span key={page} className=\"px-2 text-foreground-muted\">\r\n                          ...\r\n                        </span>\r\n                      )\r\n                    }\r\n                    return null\r\n                  })}\r\n                </div>\r\n                \r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\r\n                  disabled={currentPage === totalPages}\r\n                  className=\"border-border hover:bg-surface-hover disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  Next\r\n                  <ChevronRight className=\"w-4 h-4 ml-1\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Modals */}\r\n      <PipelineModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} onSave={handleAddPipeline} />\r\n      <PipelineWizard\r\n        isOpen={isEditModalOpen}\r\n        onClose={() => {\r\n          setIsEditModalOpen(false)\r\n          setEditingPipeline(null)\r\n        }}\r\n        onSave={handleEditPipeline}\r\n        editingPipeline={editingPipeline}\r\n      />\r\n      </div>\r\n    </ProtectedPage>\r\n    <ErrorToastComponent />\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}